         <script src="https://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script>  
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>

<!-- Datatable Script -->
<script type="text/javascript" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js" integrity="sha512-GDey37RZAxFkpFeJorEUwNoIbkTwsyC736KNSYucu1WJWFK9qTdzYub8ATxktr6Dwke7nbFaioypzbDOQykoRg==" crossorigin="anonymous"></script> -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" integrity="sha512-aEe/ZxePawj0+G2R+AaIxgrQuKT68I28qh+wgLrcAJOz3rxCP+TwrK5SPN+E5I+1IQjNtcfvb96HDagwrKRdBw==" crossorigin="anonymous" /> -->
<!--Timepicker  -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script> -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.13.16/jquery.timepicker.js" integrity="sha512-znJmsCnj1pyv7QN2fn4UYqXw3Bp2KXMYPPbphEOkhGP8RQbePNSLUfZWd733MXIQsyaszx4PhVq9jadWa1fq5w==" crossorigin="anonymous"></script>
 -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.13.16/jquery.timepicker.min.js" integrity="sha512-huX0hcUeIkgR0QvTlhxNpIAcwiN2sABe3VwyzeZAYjMPn3OU71t9ZLlk6qs27Q049SPgeB/Az12jv/ayedXoAw==" crossorigin="anonymous"></script> -->

<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.13.16/jquery.timepicker.min.css" integrity="sha512-GgUcFJ5lgRdt/8m5A0d0qEnsoi8cDoF0d6q+RirBPtL423Qsj5cI9OxQ5hWvPi5jjvTLM/YhaaFuIeWCLi6lyQ==" crossorigin="anonymous" /> -->

<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.13.16/jquery.timepicker.css" integrity="sha512-GgUcFJ5lgRdt/8m5A0d0qEnsoi8cDoF0d6q+RirBPtL423Qsj5cI9OxQ5hWvPi5jjvTLM/YhaaFuIeWCLi6lyQ==" crossorigin="anonymous" /> -->
<!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css"> -->
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js"></script>

<link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="https:////cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> -->

<!-- TimePicker -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/timepicker@1.13.18/jquery.timepicker.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/timepicker@1.13.18/jquery.timepicker.js"></script>

<script type="text/javascript">

  
  // $( function() {
  //   $( "#datepicker" ).datepicker();
  // } );

 $(document).on('ready', function() {

  if (window.performance && window.performance.navigation.type == window.performance.navigation.TYPE_BACK_FORWARD) {
        window.location.reload();
    }
  // $('#rewardPoints').on('change',function() {
  //   var isChecked = $('#rewardPoints:checkbox:checked').length > 0;
    // console.log("IsChecked-----"+isChecked);
  //     if(this.checked) {
  //         alert("Checked");
  //     }
  // });
  var baseURL = window.location.href;
  var originURL = window.location.origin;

  if(baseURL == originURL+"/Dashboard") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Dashboard');
    $('.dashboardNav a').removeClass('active');
    $('.dashboardLink').addClass('active');
  }else if(baseURL == originURL+"/Dashboard/Bookings") {
    // $('.disableView').removeClass('d-none'); 
    // $('.disableView').html('Bookings');
    $('.dashboardNav a').removeClass('active');
    $('.bookingsLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/Leads") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Leads');
    $('.dashboardNav a').removeClass('active');
    $('.leadsLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/Garage") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Garages');
    $('.dashboardNav a').removeClass('active');
    $('.garagesLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/AddNewPackages") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Add Packages');
    $('.dashboardNav a').removeClass('active');
    $('.addPackagesLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/AddNewServices") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Add New Services');
    $('.dashboardNav a').removeClass('active');
    $('.addServicesLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/make") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Add Make');
    $('.dashboardNav a').removeClass('active');
    $('.makeLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/car") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Add Models');
    $('.dashboardNav a').removeClass('active');
    $('.modelLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/addon") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Add Models');
    $('.dashboardNav a').removeClass('active');
    $('.addonLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/carPartPricing") {
    // $('.disableView').removeClass('d-none');
    // $('.disableView').html('Accidental Parts');
    $('.dashboardNav a').removeClass('active');
    $('.carPartPriceLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/uploadServicesParts") {
    $('.dashboardNav a').removeClass('active');
    $('.uploadServicesLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/promocode") {
    $('.dashboardNav a').removeClass('active');
    $('.promoLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/serviceParts") {
    $('.dashboardNav a').removeClass('active');
    $('.servicePartsLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/membershipPackages") {
    $('.dashboardNav a').removeClass('active');
    $('.memberLink').addClass('active');
  } else if(baseURL == originURL+"/ViewUserReward") {
    $('.dashboardNav a').removeClass('active');
    $('.rewardLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/mechanicalServices") {
    $('.dashboardNav a').removeClass('active');
    $('.mechanicalServiceLink').addClass('active');
  }  else if(baseURL == originURL+"/Dashboard/acServices") {
    $('.dashboardNav a').removeClass('active');
    $('.acServiceLink').addClass('active');
  }  else if(baseURL == originURL+"/Dashboard/batteryTyres") {
    $('.dashboardNav a').removeClass('active');
    $('.batteryTyresLink').addClass('active');
  }  else if(baseURL == originURL+"/Dashboard/upkeepServices") {
    $('.dashboardNav a').removeClass('active');
    $('.upkeepServiceLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/insuranceCompanies") {
    $('.dashboardNav a').removeClass('active');
    $('.insuranceLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/seasonal") {
    $('.dashboardNav a').removeClass('active');
    $('.seasonalOffersLink').addClass('active');
  } else if(baseURL == originURL+"/Dashboard/Orders") {
    $('.dashboardNav a').removeClass('active');
    $('.ordersLink').addClass('active');
  } 




  if(baseURL == originURL+'/account') {
    // alert("Hello");
    $('.serviceHistory .dt-buttons').addClass('d-none');
  }

  // var navbarName = $('.navUsername').html();
  // var explodeName = navbarName.split(" ");
  // if(explodeName !== "" && explodeName !== undefined ) {
  //   $('.navUsername').html(explodeName[0]);
  // }
  // console.log('navbarName-----'+JSON.stringify(explodeName[0]));

//   $(window).bind("pageshow", function(event) {
//     if (event.originalEvent.persisted) {
//         window.location.reload();
//     }
// });
  
  $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
  $.ajax({
    url: "/getAllServices",
    method: 'POST',
    success: function(data,status,xhr){
     // console.log("XHR Info--------"+xhr.responseText);
     // if(xhr.status == 250) {
     //  swal(xhr.responseText, "", "warning");
     // }

     // if(xhr.status == 200) {
     //  swal(xhr.responseText, "", "success");
     //  window.location.href="/";
     // }
    }
  });

  $('.updatePassword').on('click',function() {
    // $oldPassword = $('#oldPassword').val();
    $newPassword = $('#newPassword').val();
    $confirmPassword = $('#confirmPassword').val();

    if($newPassword == "") {
      // $('#oldPassError').addClass('d-none');
      $('#confirmPassError').addClass('d-none');
      $('#newPassError').removeClass('d-none');
      document.getElementById("newPassError").innerHTML="Enter new password";
    } else if($newPassword.length < 8) {
      $('#confirmPassError').addClass('d-none');
      $('#newPassError').removeClass('d-none');
      document.getElementById("newPassError").innerHTML="Password length should be greater than or equal to 8 characters.";
    } else if($confirmPassword == "") {
      $('#newPassError').addClass('d-none');
      // $('#oldPassError').addClass('d-none');
      $('#confirmPassError').removeClass('d-none');
      document.getElementById("confirmPassError").innerHTML="Enter confirm password";
    } else if($newPassword !== $confirmPassword) {
      $('#confirmPassError').removeClass('d-none');
      $('#newPassError').addClass('d-none');
      document.getElementById("confirmPassError").innerHTML="Confirm Password should match New Password";
    } else if($newPassword == $confirmPassword) {
      $('#confirmPassError').addClass('d-none');
        
      $.ajax({
        url: "/updatePassword",
        method: 'POST',
        data:{'newPassword':$newPassword},
        success: function(data,status,xhr){
         // console.log("XHR Info--------"+JSON.stringify(xhr));
         if(xhr.status == 250) {
          swal(xhr.responseText, "", "warning");
         }

         if(xhr.status == 200) {
          swal(xhr.responseText, "", "success");
          window.location.href="/";
         }

        }
      });
    }
  });

  $('.uploadServicesParts').on('click',function() {
    $service = $(this).attr('id');
    // alert($service);
    $('.uploadServiceSelected').val($service);
  });

  if($('.servicePartserviceType').val()=="Battery and Tyres") {
    // console.log('Batt & Tyre selected--');

      $('.batteryTyreSelectDiv').removeClass('d-none');
    } else {
      $('.batteryTyreSelectDiv').addClass('d-none');
    }

  $('.servicePartserviceType').on('change',function() {
    // console.log('SelectEd Service is--'+$('.servicePartserviceType').val());

    if($('.servicePartserviceType').val()=="Battery and Tyres") {
    // console.log('Batt & Tyre selected--');

      $('.batteryTyreSelectDiv').removeClass('d-none');
    } else {
      $('.batteryTyreSelectDiv').addClass('d-none');
    }
  });


  $('#financeType').on('change',function() {
    if($('#financeType').val() == 1) {
      $('.selectInsuranceCompanyDiv').removeClass('d-none');
    }else if($('#financeType').val() == 2) {
      $('.selectInsuranceCompanyDiv').addClass('d-none');
    }else{
      $('.selectInsuranceCompanyDiv').addClass('d-none');
    }
  });

  if($('#selectedService').val() == "Accidental Repair") {
    $makeName= $( "#brandSelect option:selected" ).text();
    $modelName= $( "#modelSelect option:selected" ).text();
    $fuelName= $( "#fuelSelect option:selected" ).text();

    $carMakeId= $( "#brandSelect option:selected" ).val();
    $carModelId= $( "#modelSelect option:selected" ).val();
    $carFuelId= $( "#fuelSelect option:selected" ).val();

    $modelId= $( "#modelSelect option:selected" ).val();
    $auth = $('#isUserEstimate').val();

    $('#hiddenBrand').val($makeName);
    $('#hiddenModel').val($modelName);
    $('#hiddenFuel').val($fuelName);

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

  // console.log('Service is---'+$('#selectedService').val());
    // if($auth !== 'true'){
    //   // $('#accLogin').modal('show');
    //   $('#accLogin').modal({
    //     backdrop: 'static',
    //     keyboard: true, 
    //     show: true
    //   }); 
    // } else {
           // emptyCart();
      $.ajax({
        url: "/partsToBeRepaired",
        method: 'POST',
        // data:{'carType':$carType},
        data:{'modelId':$modelId, 'carMakeId':$carMakeId, 'carModelId':$carModelId, 'carFuelId':$carFuelId},
        success: function(data,status,xhr){
          $partsData="";
            // console.log("Parts List ----"+JSON.stringify(data));
            $('#carTypeHidden').val(data.carType);
          data.partPrices.map((val,index)=>{
           $partsData+='<option value="'+val.id+'">'+val.part_name+'</option>';
            
            // if(val.solid>0) {
            //   $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)</option>';
            // }
            // if(val.metallic>0) {
            //   $partsData+='<option value="'+val.id+',metallic">'+val.part_name+'&nbsp(Metallic)</option>';
            // }
            // if(val.pearl>0) {
            //   $partsData+='<option value="'+val.id+',pearl">'+val.part_name+'&nbsp(Pearl)</option>';
            // }
          });
          $('#partsToRepair').html($partsData);
        }
      });
    // }
  }

  if($('#selectedService').val() == "AC Servicing") {
    $makeId= $( "#brandSelect option:selected" ).val();
    $modelId= $( "#modelSelect option:selected" ).val();
    $fuelId= $( "#fuelSelect" ).val();
    $serviceType = $( "#serviceType" ).val();
    // console.log("Check---"+$serviceType);

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url: "/ACRepairServices/getServiceParts",
      method: 'POST',
      data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType},
      success: function(data,status,xhr){
        // console.log("XHRData---"+JSON.stringify(data));
        var partSelectOptions='';
        if(data !== []) {
          data.map((value,index)=> {
            // console.log(value.id);
            partSelectOptions+="<option value="+value.id+" >"+value.part_name+"</option>";
               // $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)&nbsp ₹'+val.solid+'</option>';
            // console.log("Not EMpty"+JSON.stringify(value));
          })
          $('#partSelect').html(partSelectOptions);
        }
      }
    });
    // console.log("Selected Dtata--"+$fuelId);
  }

  // if($('#selectedService').val() == "Mechanical Repair") {

  // }

  // if($('#selectedService').val() !== "") {
  //   $makeId= $( "#brandSelect option:selected" ).val();
  //   $modelId= $( "#modelSelect option:selected" ).val();
  //   $fuelId= $( "#fuelSelect" ).val();
  //   $serviceType = $( "#serviceType" ).val();
    // console.log("Check---"+$serviceType);

  //   $.ajaxSetup({
  //     headers: {
  //       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  //     }
  //   });

  //   $.ajax({
  //     url: "/ACRepairServices/getServiceParts",
  //     method: 'POST',
  //     data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType},
  //     success: function(data,status,xhr){
        // console.log("XHRData---"+JSON.stringify(data));
  //       var partSelectOptions='';
  //       if(data !== []) {
  //         data.map((value,index)=> {
            // console.log(value.id);
  //           partSelectOptions+="<option value="+value.id+" >"+value.part_name+"</option>";
  //              // $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)&nbsp ₹'+val.solid+'</option>';
            // console.log("Not EMpty"+JSON.stringify(value));
  //         })
  //         $('#partSelect').html(partSelectOptions);
  //       }
  //     }
  //   });
    // console.log("Selected Dtata--"+$fuelId);
  // }

  if($('#selectedService').val() == "Battery & Tyres") {
    $makeId= $( "#brandSelect option:selected" ).val();
    $modelId= $( "#modelSelect option:selected" ).val();
    $fuelId= $( "#fuelSelect" ).val();
    $serviceType = $( "#serviceType" ).val();
    // console.log("Check---"+$serviceType);

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url: "/ACRepairServices/getServiceParts",
      method: 'POST',
      data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType},
      success: function(data,status,xhr){
        // console.log("XHRData---"+JSON.stringify(data));
        var partSelectOptions='';
        if(data !== []) {
          data.map((value,index)=> {
            // console.log(value.id);
            partSelectOptions+="<option value="+value.id+" >"+value.part_name+"</option>";
               // $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)&nbsp ₹'+val.solid+'</option>';
            // console.log("Not EMpty"+JSON.stringify(value));
          })
          $('#partSelect').html(partSelectOptions);
        }
      }
    });
    // console.log("Selected Dtata--"+$fuelId);
  }

  if($('#selectedService').val() == "Mechanical Repair") {
    $makeId= $( "#brandSelect option:selected" ).val();
    $modelId= $( "#modelSelect option:selected" ).val();
    $fuelId= $( "#fuelSelect" ).val();
    $serviceType = $( "#serviceType" ).val();
    // console.log("Check---"+$serviceType);

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url: "/ACRepairServices/getServiceParts",
      method: 'POST',
      data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType},
      success: function(data,status,xhr){
        // console.log("XHRData---"+JSON.stringify(data));
        var partSelectOptions='';
        if(data !== []) {
          data.map((value,index)=> {
            // console.log(value.id);
            partSelectOptions+="<option value="+value.id+" >"+value.part_name+"</option>";
               // $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)&nbsp ₹'+val.solid+'</option>';
            // console.log("Not EMpty"+JSON.stringify(value));
          })
          $('#partSelect').html(partSelectOptions);
        }
      }
    });
    // console.log("Selected Dtata--"+$fuelId);
  }

  if($('#selectedService').val() == "Upkeep Services") {
    $makeId= $( "#brandSelect option:selected" ).val();
    $modelId= $( "#modelSelect option:selected" ).val();
    $fuelId= $( "#fuelSelect" ).val();
    $serviceType = $( "#serviceType" ).val();
    // console.log("Check---"+$serviceType);

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url: "/ACRepairServices/getServiceParts",
      method: 'POST',
      data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType},
      success: function(data,status,xhr){
        // console.log("XHRData---"+JSON.stringify(data));
        var partSelectOptions='';
        if(data !== []) {
          data.map((value,index)=> {
            // console.log(value.id);
            partSelectOptions+="<option value="+value.id+" >"+value.part_name+"</option>";
               // $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)&nbsp ₹'+val.solid+'</option>';
            // console.log("Not EMpty"+JSON.stringify(value));
          })
          $('#partSelect').html(partSelectOptions);
        }
      }
    });
    // console.log("Selected Dtata--"+$fuelId);
  }




  // if($('.accSubmit').val() == 'submitted') {
  //   // alert("Hello");
  //   $.ajaxSetup({
  //     headers: {
  //       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  //     }
  //   });

  //   $.ajax({
  //     url:'checkoutPage',
  //     type:'post',
  //     success:function(data){
        // console.log("Checlkout Data----"+JSON.stringify(data));  
  //         $.each(data.mobile,function(checkoutKey,checkoutData){
            // console.log(checkoutData.mobile);
  //           $('#mobileBlock').html('<input type="tel" name="mobileVerification" id="mobileVerification" value="'+checkoutData.mobile+'" class="form-control form-control-lg" disabled>');
  //         });
  //         $.each(data,function(sumKey,sumData){
            // console.log("Sum----"+data.sum);

  //         $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+data.sum+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
  //         });

  //         $('#packageCheckout').html("");
  //         checkpackData = '';
  //         $('#packageCheckout').append(checkpackData);
  //       if(data.cartData !== []) {
  //         $.each(data.cartData,function(cartKey, cartCheck){
            // console.log(cartCheck);
  //           checkpackData += '<div class="col-lg-6 p-0">';
  //           checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
  //           checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartCheck.package_name.toUpperCase()+'</h6>';
  //           checkpackData += '</div>';
  //           checkpackData += '<div class="col-lg-6 p-0">';
  //           // checkpackData += '<h6 class="text-right m-0">$<span>'+cartCheck.discounted_price+'</span</h6>';
  //           if(cartCheck.discounted_price>0) {
  //             checkpackData += '<h6 class="text-right m-0" style="font-weight:bold;color:#121A7F;">₹<span>'+cartCheck.discounted_price+'</span</h6>';
  //           } else {
  //             checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartCheck.total_price+'</span</h6>';
  //           }
  //           checkpackData += '</div>';
  //           checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
  //           checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+cartCheck.package_description.toUpperCase()+'" </p>';
  //           checkpackData += '<hr class="final-payment-line">';
  //           checkpackData += '</div>';
  //         });
  //       }

  //       if(data.accPartsData !== []) {
        // console.log("Checlkout accPartsData----"+JSON.stringify(data));  
  //       $.each(data.accPartsData,function(partKey, cartPart){
            // console.log(cartPart);
  //           checkpackData += '<div class="col-lg-6 p-0">';
  //           // checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
  //           checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartPart.partName.toUpperCase()+'</h6>';
  //           checkpackData += '</div>';
  //           checkpackData += '<div class="col-lg-6 p-0">';
  //           // checkpackData += '<h6 class="text-right m-0">$<span>'+cartPart.discounted_price+'</span</h6>';
            
  //           checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartPart.partPrice+'</span</h6>';
  //           checkpackData += '</div>';
  //           checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
  //           checkpackData += '<hr class="final-payment-line">';
  //           checkpackData += '</div>';
  //         });
  //       }

  //       $('#packageCheckout').append(checkpackData);
  //     }
  //   });
  //   // $("#membershipModal").modal('hide');

  //   $("#accCheckout").modal('show');
  // }

  if($('.accSubmit').val() == 'submitted') {
    // alert("Hello");
    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url:'getCartData',
      type:'post',
      success:function(cartCheckoutData){
        // console.log("cartCheckoutData---"+JSON.stringify(cartCheckoutData));
        $("#checkoutCart").html("");
        CartPack = '';

        if(cartCheckoutData.responseCode != 400){
          $.each(cartCheckoutData.res,function(keyCart,cartData){
            CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+keyCart+'">';
            CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+keyCart+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 1rem;font-weight: bolder;color:#121A7F;padding:0px;">'+cartData.package_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
            CartPack+= '<div class="col-lg-3  col-md-4 col-sm-4 text-right d-flex">';

            if(cartData.discounted_price>0) {
              CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style="text-decoration-line: line-through; font-weight: bold;margin-left: 0px; font-size: 1rem;">'+cartData.total_price+'</span>  ₹<span style="font-weight:bold">'+cartData.discounted_price+'</span></h5>';
            } else {
              CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style=" font-weight: bold;margin-left: 0px; font-size: 1rem;">'+cartData.total_price+'</span></h5>';
            }

            var packageDescription = "";
            if(cartData.package_description !== null) {
              packageDescription = cartData.package_description.toUpperCase();
            } else {
              packageDescription = cartData.package_description;
            }

            CartPack+='<button type="button" class="close deleteFromCart" id="'+cartData.id+'" onclick="deleteFromCart('+cartData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
            CartPack+='<div id="collapseOne'+keyCart+'" class="collapse" aria-labelledby="heading'+keyCart+'" data-parent="#accordion"><div class="card-body">';                   
            CartPack+='<h6 style="font-size: 0.8rem;" class="text-warning">'+packageDescription+'</h6>';
            CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
            // $.each(cartData.has_services,function(keyServ,cartServ){
            //   CartPack+='<div class="col-lg-6"><span>';
            //   CartPack+='<li style="font-size: 0.9rem;">'+cartServ.service_name+'</li>';
            //   CartPack+='</span></div>';
            // });
            CartPack+=  '</div></div></div></ul>';
            CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
             if(cartData.service_time != null){
                CartPack+='<h6 class="bg-white text-color px-3 py-1 m-0 text-center"> '+cartData.service_time+' hours </h6>';
              }else{
                  CartPack+='<h6 class="px-3 py-1 m-0 text-center"></h6>';
              }
            // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >'+cartData.service_time+'</span> hours </h6>';
            CartPack+='</div></div>';
            CartPack+='</div></div></div></div>';
          });
           $.each(cartCheckoutData.MemData,function(keyMem,cartMem){
             // console.log(addonData);
             CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+cartMem.id+'">';
             CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+addonData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+cartMem.addon_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
             CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right d-flex">';
             CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style="text-decoration-line: line-through; font-weight: 100;margin-left: 0px; font-size: 1rem;">'+cartMem.addon_price+'</span></h5>';
             CartPack+='<button type="button" class="close deleteFromCart" id="'+cartMem.id+'" onclick="deleteFromCart('+cartMem.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
             CartPack+='<div id="collapseOne'+cartMem.id+'" class="collapse" aria-labelledby="heading'+cartMem.id+'" data-parent="#accordion"><div class="card-body">';                   
             CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+cartMem.addon_description+'</h6>';
             CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
             CartPack+=  '</div></div></div></ul>';
             // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
             // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
             // CartPack+='</div></div>';
             CartPack+='</div></div></div></div>';
          });

          $.each(cartCheckoutData.addon,function(addonId,addonData){
             // console.log(addonData);
             CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+addonData.id+'">';
             CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+addonData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+addonData.addon_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
             CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right d-flex">';
             CartPack+= '<h5  style="color:#121A7F;" class="m-auto">Approx. ₹<span  style="text-decoration-line: line-through; font-weight: 100;margin-left: 0px; font-size: 1rem;">'+addonData.addon_price+'</span></h5>';
             CartPack+='<button type="button" class="close deleteFromCart" id="'+addonData.id+'" onclick="deleteFromCart('+addonData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
             CartPack+='<div id="collapseOne'+addonData.id+'" class="collapse" aria-labelledby="heading'+addonData.id+'" data-parent="#accordion"><div class="card-body">';                   
             CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+addonData.addon_description+'</h6>';
             CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
             CartPack+=  '</div></div></div></ul>';
             // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
             // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
             // CartPack+='</div></div>';
             CartPack+='</div></div></div></div>';
          });

          $.each(cartCheckoutData.batteryData,function(batteryId,batteryData){
              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+batteryData.id+'">';
               CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+batteryData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+batteryData.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
               CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right d-flex">';
               CartPack+= '<h5  style="color:#121A7F;" class="m-auto">Approx. ₹<span  style="font-weight: 100;margin-left: 0px; font-size: 1rem;">'+batteryData.price+'</span></h5>';
               CartPack+='<button type="button" class="close deleteFromCart" id="'+batteryData.id+'" onclick="deleteFromCart('+batteryData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
               CartPack+='<div id="collapseOne'+batteryData.id+'" class="collapse" aria-labelledby="heading'+batteryData.id+'" data-parent="#accordion"><div class="card-body">';                   
               CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+batteryData.part_description+'</h6>';
               CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
               CartPack+=  '</div></div></div></ul>';
               CartPack+='</div></div></div></div>';
          });

          if(cartCheckoutData.accPartsData !== []) {
            // console.log("Checlkout accPartsData----"+JSON.stringify(cartCheckoutData));  
            $.each(cartCheckoutData.accPartsData,function(partKey, cartPart){
              // console.log(cartPart);
              // CartPack += '<div class="col-lg-12 pt-2" style="display:flex; flex-direction:row; padding-left:20px;">';

              // CartPack += '<div class="col-lg-6 p-0" style="padding-left:20px;">';
              // // CartPack += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
              // CartPack += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartPart.partName.toUpperCase()+'</h6>';
              // CartPack += '</div>';
              // CartPack += '<div class="col-lg-6 p-0">';
              // // CartPack += '<h6 class="text-right m-0">$<span>'+cartPart.discounted_price+'</span</h6>';
              
              // CartPack += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartPart.partPrice+'</span</h6>';
              // CartPack += '</div>';
              // CartPack += '</div>';
              // CartPack += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
              // CartPack += '<hr class="final-payment-line">';
              // CartPack += '</div>';

              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+cartPart.id+'">';
             CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+cartPart.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+cartPart.partName.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
             CartPack+= '<div class="col-lg-3 text-right" class="display:flex; align-items:center;">';
             CartPack+= '<h5 style="color:#121A7F;margin-bottom:0px;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;display:flex;align-items:baseline;">₹'+cartPart.partPrice+'</h5>';
             CartPack+='<button type="button" class="close deleteFromCart" id="'+cartPart.id+'" onclick="deleteFromCart('+cartPart.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
             CartPack+='</div></div></div></div>';

            });
          }
           if(cartCheckoutData.acData !== []) {
            $.each(cartCheckoutData.acData,function(acId,acData){
             // console.log(acData);
             CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+acData.id+'">';
             CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+acData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+acData.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
             CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
             CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+acData.price+'</h5>';
             CartPack+='<button type="button" class="close deleteFromCart" id="'+acData.id+'" onclick="deleteFromCart('+acData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
             CartPack+='<div id="collapseOne'+acData.id+'" class="collapse" aria-labelledby="heading'+acData.id+'" data-parent="#accordion"><div class="card-body">';                   
             // CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+acData.addon_description+'</h6>';
             CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
             CartPack+=  '</div></div></div></ul>';
             // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
             // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
             // CartPack+='</div></div>';
             CartPack+='</div></div></div></div>';
          });
        }
        if(cartCheckoutData.mechData !== []) {
          $.each(cartCheckoutData.mechData,function(mechKey, mechCheck){
          // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.acCheck);
          CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+mechCheck.id+'">';
          CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+mechCheck.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+mechCheck.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
          CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
          CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+mechCheck.price+'</h5>';
          CartPack+='<button type="button" class="close deleteFromCart" id="'+mechCheck.id+'" onclick="deleteFromCart('+mechCheck.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
          CartPack+='<div id="collapseOne'+mechCheck.id+'" class="collapse" aria-labelledby="heading'+mechCheck.id+'" data-parent="#accordion"><div class="card-body">';                   
          CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+mechCheck.part_description+'</h6>';
          CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
          CartPack+=  '</div></div></div></ul>';
          // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
          // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
          // CartPack+='</div></div>';
          CartPack+='</div></div></div></div>';
        });
      }
      if(cartCheckoutData.upData !== []) {
        $.each(cartCheckoutData.upData,function(upKey, upCheck){
          // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.upCheck);
          CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+upCheck.id+'">';
          CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+upCheck.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+upCheck.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
          CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
          CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+upCheck.price+'</h5>';
          CartPack+='<button type="button" class="close deleteFromCart" id="'+upCheck.id+'" onclick="deleteFromCart('+cartData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
          CartPack+='<div id="collapseOne'+upCheck.id+'" class="collapse" aria-labelledby="heading'+upCheck.id+'" data-parent="#accordion"><div class="card-body">';                   
          CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+upCheck.part_description+'</h6>';
          CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
          CartPack+=  '</div></div></div></ul>';
          // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
          // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
          // CartPack+='</div></div>';
          CartPack+='</div></div></div></div>';
        });
      }

        } else {
          CartPack+='<div><h5>Cart is Empty.</h5></div>';
        }
        $('#checkoutCart').append(CartPack);
        $('#deletePack').append(CartID);
      }//Success ends
    });

    $("#addNewPack").modal('show');
  }

  // $("#accidentalImage").on("change", function() {
  //   if ($("#accidentalImage")[0].files.length > 2) {
  //       alert("You can select only 2 images");
  //       $("#accidentalImage")[0].files = null;
  //   } else {
  //       // $("#imageUploadForm").submit();
  //   }
  // });

  $('.accidentalFuelDiv select').on('change',function() {
    $makeName= $( "#brandSelect option:selected" ).text();
    $modelName= $( "#modelSelect option:selected" ).text();
    $fuelName= $( "#fuelSelect option:selected" ).text();
    $modelId= $( "#modelSelect option:selected" ).val();

    $carMakeId= $( "#brandSelect option:selected" ).val();
    $carModelId= $( "#modelSelect option:selected" ).val();
    $carFuelId= $( "#fuelSelect option:selected" ).val();

// console.log("Model Id---"+$modelId);
    // $carType= $( "#carTypeSelect option:selected" ).text();
    $auth = $('#isUserEstimate').val();

    $('#hiddenBrand').val($makeName);
    $('#hiddenModel').val($modelName);
    $('#hiddenFuel').val($fuelName);

    // if($auth !== 'true'){
    //   // $('#accLogin').modal('show');
    //    $('#accLogin').modal({
    //                     backdrop: 'static',
    //                     keyboard: true, 
    //                     show: true
    //             }); 
    // } else {
      // emptyCart();
      $.ajax({
        url: "/partsToBeRepaired",
        method: 'POST',
        // data:{'carType':$carType},
        data:{'modelId':$modelId, 'carMakeId':$carMakeId, 'carModelId':$carModelId, 'carFuelId':$carFuelId},
        success: function(data,status,xhr){
          $partsData="";
            // console.log("Parts List ----"+JSON.stringify(data));
            $('#carTypeHidden').val(data.carType);
          data.partPrices.map((val,index)=>{
              $partsData+='<option value="'+val.id+'">'+val.part_name+'</option>';
            // if(val.solid>0) {
            // }
            // if(val.metallic>0) {
            //   $partsData+='<option value="'+val.id+',metallic">'+val.part_name+'&nbsp(Metallic)</option>';
            // }
            // if(val.pearl>0) {
            //   $partsData+='<option value="'+val.id+',pearl">'+val.part_name+'&nbsp(Pearl)</option>';
            // }
          });
          $('#partsToRepair').html($partsData);

        }
      });
    // }

    // console.log("Changed carTypeSelect---"+JSON.stringify($makeName));          

  });

  $('.promocodeType').on('change',function() {
    $promotype= $( ".promocodeType option:selected" ).val();
    console.log("promotype---"+$promotype);
    if($promotype == 2) {
      $('.maxDiscountDiv').addClass('d-none');
    } else {
      $('.maxDiscountDiv').removeClass('d-none');
    }
    // $('.maxDiscountDiv').addClass('d-none');
  })

  $('#accCheckbox').click(function(){
    var isChecked = $('#accCheckbox:checkbox:checked').length > 0;
    // console.log("Checkbox---"+isChecked);
    if(isChecked==true) {
      // $('#financeType').addClass('d-none');
      // $('.financeType').addClass('d-none');
      // $('#insuranceCompany').addClass('d-none');
      // $('.accidentalRemarkDiv').addClass('d-none');
      $('.checkboxMobileDiv').removeClass('d-none');
      // $('.accidentalQueryDiv').removeClass('d-none');
      // $('#partsToRepair').val('');
      $('#submitAccidentalRequest').removeClass('d-none');
      $('#conFirmAccidentalBooking').addClass('d-none');
      $('#partFound').val('false');
  
    } else {
      // $('#financeType').removeClass('d-none');
      // $('.financeType').removeClass('d-none');
      // $('#insuranceCompany').removeClass('d-none');
      // $('.accidentalRemarkDiv').removeClass('d-none');
      // $('.partsToRepairDiv').removeClass('d-none');
      // $('.accidentalQueryDiv').addClass('d-none');
      $('.checkboxMobileDiv').addClass('d-none');
      $('#submitAccidentalRequest').addClass('d-none');
      $('#conFirmAccidentalBooking').removeClass('d-none');
      $('#partFound').val('true');

    }
  });

  // $('input[type="checkbox"]').click(function(){
    // console.log(this);
  //  // $(this).parent().next().css('display','block');
  //   $(this).parent().next().toggle('show');
  //   $('#acEstimateRequest').toggle();
  //   $('#acEstimateSubmit').toggle();
  //   $('#partSelect').html('');
  // });

  $('.estimateServiceSelect').select2({
      placeholder: "Select Car Service",
      minimumResultsForSearch: Infinity,
  });

  $('#acRepairCheckbox').click(function(){
  // console.log(this);
    var isChecked = $('#acRepairCheckbox:checkbox:checked').length > 0;
    if(isChecked==true) {
    // console.log("Checkboxif---"+isChecked);
      $(this).parent().next().toggle('show');
      $('#acEstimateRequest').toggle();
      $('#acEstimateSubmit').toggle();
      // $("#partSelect").attr("disabled", true);
      $("#acPartFound").val("false");
      $("#remark").val('');
      $("#partNotFound").val('');
      // $("#remark").css('display','none');
      // $("#partNotFound").css('display','block');
      // $(".RemarkBlock").css('display','none');
      // $(".partNotFoundBlock").css('display','block');
      // $("#requestPartError").css('display','block');


      // $('#partSelect').html('');
    }else{
    // console.log("Checkboxelse---"+isChecked);
       $(this).parent().next().toggle('show');
      $('#acEstimateRequest').toggle();
      $('#acEstimateSubmit').toggle();
      // $("#partSelect").attr("disabled", false);
      $("#acPartFound").val("true");
      $("#remark").val('');
      $("#partNotFound").val('');
      // $("#remark").css('display','block');
      // $("#partNotFound").css('display','none');
      // $(".RemarkBlock").css('display','block');
      // $(".partNotFoundBlock").css('display','none');

      // $('#partSelect').html('');
    }

});

  
  // $('.membershipPackage').on('click', function() {
  //   // alert("hello");
  //   // $('$membershipPackTitle').text("Hello");
  // });

  $('#membershipModal').on('show.bs.modal', function(e) {
    var packId = $(e.relatedTarget).attr('id');
    // console.log("Selected Service====="+packId);
    returnPacks ='';
    $(".packageInfo").html('');

    $.ajax({
      url: "/getMembershipPackages",
      method: 'POST',
      data:{ 'packId':packId  },
      success: function(data,status,xhr){
        var abc = JSON.stringify(data);
        var dataPackString = abc.replace('"', '"');
        // console.log("XHRData---"+JSON.stringify(data));
        returnPacks+='<div class="col-lg-12 my-2 tooltipContent"><div class="blueButton py-4 px-3" id="tooltipContent"><div class="row"><div class="col-lg-9 col-md-7 p-0">';
        returnPacks+='<h6 style="font-size: 16px;font-weight: bolder;color:#fff;text-transform:uppercase">'+data.package_name+'</h6>';
        returnPacks+='</div>';
        if(data.discounted_price>0) {
          returnPacks+='<div class="col-lg-3 col-md-5 text-right"><h5 style="color:#fff; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 10px;margin-right: 5px; font-size: 1rem;" >₹'+data.total_price+'</span><span style="font-size: 1rem;">₹'+data.discounted_price+'</span></h5></div>';
        } else {
          returnPacks+='<div class="col-lg-3 text-right"><h5 style="color:#fff;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">₹'+data.total_price+'</span></h5></div>';
        }
        returnPacks+='</div>';
        returnPacks+='<h6 style="font-size: 0.8rem; text-transform:uppercase; " class="text-warning">'+data.package_description+'</h6>';
        returnPacks+='<ul class="pl-0" ><div class="row tooltip-data">';
        if(data.has_services.length>0) {
            $.each(data.has_services,function(ind,dat){
                returnPacks+='<div class="col-lg-6"><span>';
                returnPacks+='<li style="font-size: 0.8rem; font-weight:bold; color:#121A7F;">'+dat.service_name+'</li>';
                returnPacks+='</span></div>';
            });
        }
        returnPacks+='</div></ul>';
        
        // var extraServiceCount = 0;
        // console.log("Length=-------"+JSON.stringify(data));
        // var pacakgeName = JSON.stringify(data.has_services.length);
        // if(data.has_services.length>5) {
        //   extraServiceCount = data.has_services.length - 5;
        // }

        // $.each(data.has_services,function(ind,dat){
        // console.log("Check services---"+abc);
        //   if(ind<5) {
        //     returnPacks+='<div class="col-lg-6"><span>';
        //     returnPacks+='<li style="font-size: 0.8rem; color:#121A7F;">'+dat.service_name+'</li>';
        //     returnPacks+='</span></div>';
        //     if(ind == 4 && extraServiceCount !== 0 ) {
        //         returnPacks+='<div class="loadMore" style=""><a href="javascript:void(0)" class="loadMoreBtn" id="'+data.package_name+'" style="font-size: 0.8rem;">+'+extraServiceCount+'more </a></div>';
        //     }
        //   }
        //   if(ind >= 5) {
        //     returnPacks+='<div class="col-lg-6 '+data.package_name+'_hidden" style="display:none"><span>';
        //     returnPacks+='<li style="font-size: 0.8rem;color:#121A7F;">'+dat.service_name+'</li>';
        //     returnPacks+='</span></div>';
        //     if(ind == data.has_services.length-1) {
        //         returnPacks+='<div class="hideLoadMore '+data.package_name+'_hideBtn" style="display:none;"><a href="javascript:void(0)" class="hideLoadMoreBtn" id="'+data.package_name+'" style="font-size: 0.7rem;"> Hide </a></div>';
        //     }
        //   }

        // });
        returnPacks+='<div class="row" style="align-items:flex-end;">';
         if(data.service_time != null){
          returnPacks+='<div class="col-lg-3"><h6 class="bg-white text-color px-3 py-1 m-0 text-center"> '+data.service_time+' hours </h6></div>';
      }else{
          returnPacks+='<div class="col-lg-3"><h6 class="px-3 py-1 m-0 text-center"></h6></div>';
      }
        returnPacks+='<div class="col-lg-5"></div>';
        returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 yellowBackground  packModel" id="remPack-'+data.id+'" style="font-weight: bolder; display: none;" onclick = "removeModel('+data.id+')" data-pack=\''+dataPackString+'\' type="button"> REMOVE </button></form></div>';
        // returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 blueButton text-light packModel" id="pack-'+data.id+'" style="font-weight: bolder" onclick = "packModel(this)" data-pack=\''+dataPackString+'\' type="button"> Book Now</button></form></div>';
        returnPacks+='<button type="button" class="btn yellowBackground text-color "style="font-weight:bolder;" onclick="checkoutMembershipPackage('+data.package_id+')">Checkout</button>';
        returnPacks+='</div></div></div>';


        $(".packageInfo").append(returnPacks);
      }
    });

  });

  $('.promocodeBtn').on('click',function(){
    var enteredPromo = $('#promo').val();
    var totalAmount = $('.totalAmount').text();
    var rewardPoints = 0;

    console.log("On promo clic----");
    console.log($('#promo').val() != null);
    console.log(!$('#promo').val());
    if($('#promo').val() == null || !$('#promo').val()){
      $('#promoCodeError').removeClass('d-none');
        $("#promoCodeError").html("Please Enter Promocode");
        return false;
    }else{
      $('#promoCodeError').addClass('d-none');
    }

    if(enteredPromo !== "") {
      $.ajaxSetup({
        headers: {
          'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
      });
      $.ajax({
        url: "/verifyPromocode",
        method: 'POST',
        data:{ 'enteredPromo':enteredPromo, 'totalAmount':totalAmount  },
        success: function(data,status,xhr){
          $('#promoCodeError').addClass('d-none');
          // console.log("XHRData---"+JSON.stringify(data));
          if(data !== "Invalid Promocode Code") {
            // $('.totalAmount').text(data.updatedAmount);

            $.ajax({
              url:'checkoutPage',
              type:'post',
              success:function(data){
                rewardPoints = data.applied_points;
              }
            });

            $('.totalAmount').css('text-decoration-line','line-through');
            $('.newTotalAmount').removeClass('d-none');

            // console.log("Reward Points---------"+rewardPoints);

            if(rewardPoints>0) {
              $('.newTotalAmount').text(data.updatedAmount-rewardPoints);
            } else {
              $('.newTotalAmount').text(data.updatedAmount);
            }
            $('#couponType').val(data.promoType);
            $('#couponAmt').val(data.discountAmt);
            $('.promocodeBtn').text('Applied');
            $('.promocodeBtn').attr('disabled',true);
            $('.promoAppliedMsgDiv').removeClass('d-none');
          } else {
            swal({
                title: "Invalid Promo Code",
                text: "",
                icon: "warning",
                showCancelButton: false,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Okay',
                closeOnConfirm: true,
                closeOnClickOutside: false
              }).then(function(isConfirm) {
                 
                
              });
          }
        }
      });

    }
  });

  // $('.partSelect').on('change',function() {
  //   $('.partCheckbox').addClass('d-none');
  //   $('#remark').addClass('d-none');
  //   $('.partCheckbox').val(this.checked ? "TRUE" : "FALSE");
  // })

  $('.removePromo').on('click',function() {
    var currentAmount = $('.totalAmount').text();
    var discountedAmount = $('.couponAmt').text();
    var totalAmount = currentAmount+discountedAmount;
    // console.log("Taotal-Amt----"+totalAmount);
    
    // var rewardPoints = 0;
    // $.ajax({
    //   url:'checkoutPage',
    //   type:'post',
    //   success:function(data){
    //     rewardPoints = data.applied_points;
    //   }
    // });

    // if(rewardPoints>0) {
    //   $('.totalAmount').html(parseInt(currentAmount)-parseInt(rewardPoints));
    // } else {
    //   $('.totalAmount').html(parseInt(currentAmount));
    // }

    $('.totalAmount').css('text-decoration-line','none');
    $('.newTotalAmount').addClass('d-none');
    $('#couponType').val('');
    $('#couponAmt').val('');
    $('.promocodeBtn').text('Apply');
    $('.promocodeBtn').attr('disabled',false);
    $('.promoAppliedMsgDiv').addClass('d-none');
  });

  $(".batteryPartSelect").on("change", function(event){
    // $makeId= $( "#brandSelect option:selected" ).val();
    // $modelId= $( "#modelSelect option:selected" ).val();
    // $fuelId= $( "#fuelSelect" ).val();
    // $batteryOrTyre= $( ".batteryPartSelect option:selected" ).val();
    $auth = $('#isUserEstimate').val();

    // $serviceType = $( "#serviceType" ).val();
    // console.log("Check---"+$serviceType);

    // if($auth !== 'true'){
    //   $('#accLogin').modal('show');
    // } 

    // console.log('Battery Or Tyre----'+$( "#batteryPartSelect option:selected" ).val());
    var batteryOrTyre = $( "#batteryPartSelect option:selected" ).val();

    if(batteryOrTyre == 0) {
      $('#batteryTyreCheckout').text('SUBMIT');
    } else if(batteryOrTyre == 1) {
      $('#batteryTyreCheckout').text('SUBMIT');
    }

    // else {
    //   $.ajax({
    //     url: "/BatteryTyreService/getBatteryParts",
    //     method: 'POST',
    //     data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType, 'batteryOrTyre':$batteryOrTyre},
    //     success: function(data,status,xhr){
          // console.log("XHRData---"+JSON.stringify(data));
    //       var partSelectOptions='';
    //       if(data !== []) {
    //         data.map((value,index)=> {
    //           partSelectOptions+="<option value="+value.id+" >"+value.part_name+'&nbsp ₹'+value.price+"</option>";

              // console.log("Not EMpty"+JSON.stringify(value));
    //         })
    //         $('#partSelect').html(partSelectOptions);
    //       }
    //     }
    //   });
    // }
  });


  // $('#batteryTyreModal').on('show.bs.modal', function(e) {
  //     $makeId= $( "#brandSelect option:selected" ).val();
  //     $modelId= $( "#modelSelect option:selected" ).val();
  //     $fuelId= $( "#fuelSelect" ).val();
  //     $batteryOrTyre= $( ".batteryPartSelect option:selected" ).val();
  //     $auth = $('#isUserEstimate').val();
  //     var base_url = window.location.origin;

  //     $serviceType = $( "#serviceType" ).val();
      // console.log("Check---"+base_url);
  //     $.ajax({
  //       url: "/BatteryTyreService/getBatteryParts",
  //       method: 'POST',
  //       data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType, 'batteryOrTyre':$batteryOrTyre},
  //       success: function(data,status,xhr){
          // console.log("XHRData---"+JSON.stringify(data));
  //         $('#batteryTyreDiv').html('');
  //         var partSelectOptions='';
  //         if(data !== []) {
  //           partSelectOptions+='<div class="col-lg-12">';
  //           if(data.serviceParts.length >1) {
  //             data.serviceParts.map((partData,idx)=>{

  //               partSelectOptions+='<div class="col-lg-12 mb-3 pt-3" style="display:flex; flex-direction:row;">';

  //               partSelectOptions+='<div class="col-lg-4">';
  //               partSelectOptions+='<div class=""><img src="'+base_url+'/images/carParts/'+partData.part_image+'" style="width:100px;height: 100px" /></div>';
  //               partSelectOptions+='</div>';

  //               partSelectOptions+='<div class="col-lg-5">';
  //               partSelectOptions+='<div class"col-lg-12"><h4 class="pt-2">'+partData.part_name+'<h4></div>';
  //               partSelectOptions+='<div class"col-lg-12"><h5 class="">₹'+partData.price+'<h5></div>';
  //               // partSelectOptions+='<div class"col-lg-12"><button class="btn text-light blueButton mr-1 addAccPart" id="part-'+partData.id+'" onclick="addAccidentalPart('+partData.id+')">ADD</button><button class="btn text-light blueButton mr-1 d-none removeAccPart" id="remPart-'+partData.id+'" onclick="removePartFromCart('+partData.id+')">REMOVE</button></div>';
  //               // partSelectOptions+='<div class"col-lg-12"><button class="btn text-light blueButton mr-1 addAccPart" id="part-'+partData.id+'" onclick="addAccidentalPart('+partData.id+')">ADD</button><button class="btn text-light blueButton mr-1 d-none removeAccPart" id="remPart-'+partData.id+'" onclick="removePartFromCart('+partData.id+')">REMOVE</button></div>';
  //               partSelectOptions+='</div>';


  //               partSelectOptions+='<div class="col-lg-3" style="display: flex;align-items: center;">';

  //                   var count =0;
  //               if(data.existingParts.length > 1) {
  //                 // data.existingParts.map((existingPart,key)=>{
  //                 for (var i = 0; i < data.existingParts.length; i++) {
  //                   if(data.existingParts[i].partId == partData.id) {
  //                     partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="'+data.existingParts[i].qty+'" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';
  //                     count = 1;
  //                   }
  //                 }

  //                 if(count != 1) {
  //                   partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="0" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';
  //                 }
  //               } else {
  //                 partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="0" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';
  //               }
  //               // partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="0" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';

  //               partSelectOptions+='</div>';
  //               partSelectOptions+='</div>';

  //               partSelectOptions+='<hr />';

  //             });

            // } else {
              // console.log("No products---");
            //   partSelectOptions+='<div class="p-3"><h4>No products available for the selected Make, Model & Fuel</h4></div>';
              // $('#batteryCheckoutBtn').addClass('d-none');
              // $('.hideBatteryModal').removeClass('d-none');
            // }
  //           } else {
              // console.log("No products---");
  //             partSelectOptions+='<div class="p-3"><h4>No products available for the selected Make, Model & Fuel</h4></div>';
  //             $('#batteryCheckoutBtn').addClass('d-none');
  //           }

  //           partSelectOptions+='</div>';
  //         }

  //         $('#batteryTyreDiv').append(partSelectOptions);
  //       }
  //     });
  // });

  $('#batterySubmitRequest').on('click',function() {
     if($('#brandSelect').val() == 'Select Make' || !$('#brandSelect').val()){
      $('#requestMakeError').removeClass('d-none');
      $("#requestMakeError").html("Select Make");
      return false;
    }else{
      $('#requestMakeError').addClass('d-none');
    }
    if($('#modelSelect').val() == "Select Model" || $('#modelSelect').val() == "") {
      $('#requestModelError').removeClass('d-none');
      $('#requestModelError').text("Select Model.");
      return false;
    }else {
      $('#requestModelError').addClass('d-none');
    }

    if($('#fuelSelect').val() == "Select Fuel" || $('#fuelSelect').val() == "") {
      $('#requestFuelError').removeClass('d-none');
      $('#requestFuelError').text("Select fuel type.");
      return false;
    }else {
      $('#requestFuelError').addClass('d-none');
    }
     if($('#batteryPartSelect').val() == "Select Battery OR Tyre" || $('#batteryPartSelect').val() == "") {
      $('#requestPartSelectError').removeClass('d-none');
      $('#requestPartSelectError').text("Select battery or tyre.");
      return false;
    }else {
      $('#requestPartSelectError').addClass('d-none');
    }
     if(!$('#batteryRemark').val() || $('#batteryRemark').val() == ''){
      $('#requestBatteryRemarkError').removeClass('d-none');
      $("#requestBatteryRemarkError").html("Please Write Remark Here");
      return false;
    }else{
      $('#requestBatteryRemarkError').addClass('d-none');
    }
    if($('#mobile1').val() == "") {
      $('#requestMobileError').removeClass('d-none');
      $('#requestMobileError').text("Enter mobile number");
      return false;
    }else {
      $('#requestMobileError').addClass('d-none');
    }

    $auth = $('#isUserEstimate').val();
    $mobile= $('#mobile1').val();
    // console.log('iiiiiiiiiiiiiiiiiiiiiiiii'+$mobile);
      $makeId= $( "#brandSelect option:selected" ).val();
      $modelId= $( "#modelSelect option:selected" ).val();
      $fuelId= $( "#fuelSelect" ).val();
      $serviceType = $( "#serviceType" ).val();
      $partSelect = $("#partSelect").val();
      $batteryRemark = $('#batteryRemark').val();
      $batteryPartFound = $('.batteryPartFound').val();
      $batteryQuery = $('.batteryQuery').val();
      $batteryORTyre = $('#batteryPartSelect option:selected').val();

    $('#outerLeadMobile').html('');

      $.ajax({
        url: "/BatteryTyreParts/submitBatteryRequest",
        method: 'POST',
        data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType, 'partSelect':$partSelect, 'mobile':$mobile, 'batteryQuery':$batteryRemark, 'batteryPartFound':$batteryPartFound, 'batteryORTyre':$batteryORTyre},
        success: function(data,status,xhr){
          // console.log('xhr----'+JSON.stringify(xhr));
          if(xhr.status == 200) {
            swal({
                title: "Thank you for enquiry",
                text: "Your query has been registered with us. We will get in touch with you as soon as possible.",
                icon: "success",
                showCancelButton: false,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Okay',
                closeOnConfirm: true,
                closeOnClickOutside: false
              }).then(function(isConfirm) {
                 window.location.reload();
                
              });
          }
        }
      });

  });

  // $('#batteryTyreCheckout').on('click',function() {

  //   $auth = $('#isUserEstimate').val();
  //   $mobile= $('#mobile1').val();
  //   $('#outerLeadMobile').html('');
      
    // console.log("Mobike---"+$mobile);

  //   if($auth == 'true'){
  //     $makeId= $( "#brandSelect option:selected" ).val();
  //     $modelId= $( "#modelSelect option:selected" ).val();
  //     $fuelId= $( "#fuelSelect" ).val();
  //     $serviceType = $( "#serviceType" ).val();
  //     $partSelect = $("#partSelect").val();
  //     $batteryRemark = $('#batteryRemark').val();
  //     $batteryPartFound = $('.batteryPartFound').val();
      // console.log("Auth True--"+$partSelect);
      // console.log("Auth True--"+$modelId);
      // console.log("Auth True--"+$fuelId);

  //     $.ajax({
  //       url: "/BatteryTyreParts/buyBatteryParts",
  //       method: 'POST',
  //       data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType, 'partSelect':$partSelect, 'mobile':$mobile, 'batteryRemark':$batteryRemark, 'batteryPartFound':$batteryPartFound},
  //       success: function(data,status,xhr){
  //         if(data.status == true) {
            // console.log("XHRData---"+JSON.stringify(data));
  //           $.ajax({
  //             url:'getCartData',
  //             type:'post',
  //             success:function(cartCheckoutData){
                // console.log("cartCheckoutData---"+JSON.stringify(cartCheckoutData));
  //               $("#checkoutCart").html("");
  //               CartPack = '';
                // console.log(data);
  //               if(cartCheckoutData.responseCode != 400){ 
  //                 $.each(cartCheckoutData.res,function(keyCart,cartData){
  //                   CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+keyCart+'">';
  //                   CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+keyCart+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 1rem;font-weight: bolder;color:#121A7F;padding:0px;">'+cartData.package_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
  //                   CartPack+= '<div class="col-lg-3 text-right d-flex">';

  //                   if(cartData.discounted_price>0) {
  //                     CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style="text-decoration-line: line-through; font-weight: bold;margin-left: 0px; font-size: 1rem;">'+cartData.total_price+'</span>  ₹<span style="font-weight:bold">'+cartData.discounted_price+'</span></h5>';
  //                   } else {
  //                     CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style=" font-weight: bold;margin-left: 0px; font-size: 1rem;">'+cartData.total_price+'</span></h5>';
  //                   }

  //                   CartPack+='<div id="deletePack" class="m-auto"></div></div></div>';
  //                   CartPack+='<div id="collapseOne'+keyCart+'" class="collapse" aria-labelledby="heading'+keyCart+'" data-parent="#accordion"><div class="card-body">';                   
  //                   CartPack+='<h6 style="font-size: 0.8rem;" class="text-warning">'+cartData.package_description.toUpperCase()+'</h6>';
  //                   CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
  //                   $.each(cartData.has_services,function(keyServ,cartServ){
  //                     CartPack+='<div class="col-lg-6"><span>';
  //                     CartPack+='<li style="font-size: 0.9rem;">'+cartServ.service_name+'</li>';
  //                     CartPack+='</span></div>';
  //                   });
  //                   CartPack+=  '</div></div></div></ul>';
  //                   CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
  //                   CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >'+cartData.service_time+'</span> hours </h6>';
  //                   CartPack+='</div></div>';
  //                   CartPack+='</div></div></div></div>';
  //                 });

  //                 $.each(cartCheckoutData.addon,function(addonId,addonData){
                     // console.log(addonData);
  //                    CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+addonData.id+'">';
  //                    CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+addonData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+addonData.addon_name+'<i class="fas fa-caret-down ml-1"></i></button>';
  //                    CartPack+= '<div class="col-lg-3 text-right d-flex">';
  //                    CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style="text-decoration-line: line-through; font-weight: 100;margin-left: 0px; font-size: 1rem;">'+addonData.addon_price+'</span></h5>';
  //                    CartPack+='<div id="deletePack" class="m-auto"></div></div></div>';
  //                    CartPack+='<div id="collapseOne'+addonData.id+'" class="collapse" aria-labelledby="heading'+addonData.id+'" data-parent="#accordion"><div class="card-body">';                   
  //                    CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+addonData.addon_description+'</h6>';
  //                    CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
  //                    CartPack+=  '</div></div></div></ul>';
  //                    CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
  //                    CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
  //                    CartPack+='</div></div>';
  //                    CartPack+='</div></div></div></div>';
  //                 });

  //                 if(cartCheckoutData.batteryData !== []) {
  //                   $.each(cartCheckoutData.batteryData,function(batteryId,batteryData){
  //                       CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+batteryData.id+'">';
  //                        CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+batteryData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+batteryData.part_name+'<i class="fas fa-caret-down ml-1"></i></button>';
  //                        CartPack+= '<div class="col-lg-3 text-right d-flex">';
  //                        CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style="font-weight: 100;margin-left: 0px; font-size: 1rem;">'+batteryData.price+'</span></h5>';
  //                        CartPack+='<div id="deletePack" class="m-auto"></div></div></div>';
  //                        CartPack+='<div id="collapseOne'+batteryData.id+'" class="collapse" aria-labelledby="heading'+batteryData.id+'" data-parent="#accordion"><div class="card-body">';                   
  //                        CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+batteryData.part_description+'</h6>';
  //                        CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
  //                        CartPack+=  '</div></div></div></ul>';
  //                        CartPack+='</div></div></div></div>';
  //                   });
  //                 }

  //                 if(cartCheckoutData.accPartsData !== []) {
                    // console.log("Checlkout accPartsData----"+JSON.stringify(cartCheckoutData));  
  //                   $.each(cartCheckoutData.accPartsData,function(partKey, cartPart){
                      // console.log(cartPart);
  //                     CartPack += '<div class="col-lg-12 pt-2" style="display:flex; flex-direction:row; padding-left:20px;">';

  //                     CartPack += '<div class="col-lg-6 p-0" style="padding-left:20px;">';
  //                     // CartPack += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
  //                     CartPack += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartPart.partName.toUpperCase()+'</h6>';
  //                     CartPack += '</div>';
  //                     CartPack += '<div class="col-lg-6 p-0">';
  //                     // CartPack += '<h6 class="text-right m-0">$<span>'+cartPart.discounted_price+'</span</h6>';
                      
  //                     CartPack += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartPart.partPrice+'</span</h6>';
  //                     CartPack += '</div>';
  //                     CartPack += '</div>';
  //                     CartPack += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
  //                     CartPack += '<hr class="final-payment-line">';
  //                     CartPack += '</div>';
  //                   });
  //                 }

  //               } else {
  //                 CartPack+='<div><h5>Cart is Empty. Please add packages to Cart.</h5></div>';
  //               }
  //               $('#checkoutCart').append(CartPack);
  //               $('#deletePack').append(CartID);
  //             }//Success ends
  //           });
  //           $("#addNewPack").modal('show');
  //         }
  //       }
  //     });

  //   } else {

  //   }

  // });


  $('#batteryCheckbox').click(function(){
    var isChecked = $('#batteryCheckbox:checkbox:checked').length > 0;
    // console.log("Checkbox---"+isChecked);
    if(isChecked==true) {
      // $('#batteryRemark').addClass('d-none');
      $('.batteryQueryDiv').removeClass('d-none');
      $('#batteryTyreCheckout').addClass('d-none');
      $('.batteryPartSelectDiv').addClass('d-none');
      $('.batterySubmitRequest').removeClass('d-none');
      $('#batteryPartFound').val('false');
  
    } else {
      // $('#batteryRemark').removeClass('d-none');
      $('.batteryQueryDiv').addClass('d-none');
      $('#batteryTyreCheckout').removeClass('d-none');
      $('.batteryPartSelectDiv').removeClass('d-none');
      $('.batterySubmitRequest').addClass('d-none');
      $('#batteryPartFound').val('true');
    }
  });


  $(".newFuelSelect").on("change", function(event){
    $makeId= $( "#brandSelect option:selected" ).val();
    $modelId= $( "#modelSelect option:selected" ).val();
    $fuelId= $( "#fuelSelect" ).val();
    $serviceType = $( "#serviceType" ).val();
    // console.log("Fuel Changed---"+$serviceType);

      emptyCart();

    $.ajax({
      url: "/ACRepairServices/getServiceParts",
      method: 'POST',
      data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType},
      success: function(data,status,xhr){
        // console.log("XHRData---"+JSON.stringify(data));
        var partSelectOptions='';
        if(data !== []) {
          data.map((value,index)=> {
            // console.log(value.id);
            partSelectOptions+="<option value="+value.id+" >"+value.part_name+"</option>";
               // $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)&nbsp ₹'+val.solid+'</option>';
            // console.log("Not EMpty"+JSON.stringify(value));
          })
          $('#partSelect').html(partSelectOptions);
        }
      }
    });
    // console.log("Selected Dtata--"+$fuelId);
  });

  $(".newModelSelect").on("change", function(event){
    $makeId= $( "#brandSelect option:selected" ).val();
    $modelId= $( "#modelSelect option:selected" ).val();
    $fuelId= $( "#fuelSelect" ).val();
    $serviceType = $( "#serviceType" ).val();
    // console.log("Make Changed---"+$makeId);
    // console.log("Model Changed---"+$modelId);
    // console.log("Fuel Changed---"+$fuelId);
      emptyCart();
    if($fuelId == 1 || $fuelId == 2 || $fuelId==3) {
      $.ajax({
        url: "/ACRepairServices/getServiceParts",
        method: 'POST',
        data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType},
        success: function(data,status,xhr){
          // console.log("XHRData---"+JSON.stringify(data));
          var partSelectOptions='';
          if(data !== []) {
            data.map((value,index)=> {
              // console.log(value.id);
              partSelectOptions+="<option value="+value.id+" >"+value.part_name+"</option>";
                 // $partsData+='<option value="'+val.id+',solid">'+val.part_name+'&nbsp(Solid)&nbsp ₹'+val.solid+'</option>';
              // console.log("Not EMpty"+JSON.stringify(value));
            })
            $('#partSelect').html(partSelectOptions);
          }
        }
      });
    }
  });

  $('#estimateModal').on('show.bs.modal', function(e) {
    // console.log("Get Estimate---"+$( "#partSelect option:selected" ).val());
    $brandId =  $( "#brandSelect option:selected" ).val();
    $modelId = $( "#modelSelect option:selected" ).val();
    $fuelId = $( "#fuelSelect" ).val();
    $partId = $( "#partSelect option:selected" ).val();

    $.ajax({
      url: "/ACRepairServices/getEstimate",
      method: 'POST',
      data:{'brandId':$brandId, 'modelId':$modelId, 'fuelId':$fuelId, 'partId':$partId},
      success: function(data,status,xhr){
        // console.log("XHRData---"+JSON.stringify(data)); 
        $('#makeName').text(data.make);
        $('#modelName').text(data.model);
        $('#fuelName').text(data.fuel);
        $('#estimatePrice').text(data.price);
               
      }
    });
  });

  $("body").delegate("#assignMake", "change", function(event){
    $brandId = $( "#assignMake option:selected" ).val();
    $brandName = $( "#assignMake option:selected" ).text();
    // console.log("Changed---"+$brandName);

    if($brandId !== 0) {
      $.ajax({
          url: "/AddNewPackages/getModelData",
          method: 'POST',
          data:{'brandId':$brandId},
          success: function(data,status,xhr){
            // console.log("Returned XHR----"+JSON.stringify(data));
            var modelData="<option value='0'>Select Car Model</option>";
            data.map((data,idx)=>{
              // console.log("Data---"+JSON.stringify(data));
              modelData+="<option class='modelOption' value="+data.id+">"+data.model_name+"</option>";
            });
            $("#assignModel").html(modelData);
            $('#selectedMake').val($brandName);
          }
        });
    }
  });

  $("body").delegate("#assignModel", "change", function(event){
    // console.log("Changed---"+$( "#assignModel option:selected" ).val());
    $modelId = $( "#assignModel option:selected" ).val();
    $modelName = $( "#assignModel option:selected" ).text();

    if($modelId !== 0) {
      $.ajax({
          url: "/AddNewPackages/getFuelData",
          method: 'POST',
          data:{'modelId':$modelId},
          success: function(data,status,xhr){
            // console.log("Returned XHR----"+JSON.stringify(data));
            var fuelData="<option value='0'>Select Car Fuel Type</option>";
            data.map((data,idx)=>{
              // console.log("Data---"+JSON.stringify(data));
              fuelData+="<option class='fuelOption' value="+data[0].id+">"+data[0].fuel_type+"</option>";
            });
            $("#assignFuel").html(fuelData);
            $('#selectedModel').val($modelName);
          }
        });
    }
  });

  $("body").delegate("#assignFuel", "change", function(event){
    $fuelName = $( "#assignFuel option:selected" ).text();
    $('#selectedFuel').val($fuelName);
  });

  $('.incCompTable').on('click', '.deleteCompany', function() {
    $compId = $(this).attr('id');

    swal({
      title: "Are you sure you want to delete this part?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/Dashboard/insuranceCompanies/deleteIncComp",
          method: 'POST',
          data:{'incCompId':$compId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              console.log("xhr.responseText------"+xhr.responseText);
              if(xhr.responseText == "Success") {
                window.location.href="/Dashboard/insuranceCompanies"
              } 
            }
          }
        })
      }
    });

  });

  $('.accidentalServiceTable').on('click', '.deleteServicePart', function() {
    $partId = $(this).attr('id'); 

    swal({
      title: "Are you sure you want to delete this part?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/carPartPricing/deleteAccPart",
          method: 'POST',
          data:{'servicePratId':$partId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              console.log("xhr.responseText------"+xhr.responseText);
              if(xhr.responseText == "Success") {
                window.location.href="/Dashboard/carPartPricing"
              } 
            }
          }
        })
      }
    });
  });

  $('.servicesTable').on('click', '.deleteServicePart', function() {
    $partId = $(this).attr('id'); 

    swal({
      title: "Are you sure you want to delete this part/service?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/serviceParts/deleteServicePart",
          method: 'POST',
          data:{'servicePratId':$partId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              console.log("xhr.responseText------"+xhr.responseText);
              if(xhr.responseText == "Mechanical Repair") {
                window.location.href="/Dashboard/mechanicalServices"
              } else if(xhr.responseText == "AC Servicing") {
                window.location.href="/Dashboard/acServices"
              } else if(xhr.responseText == "Battery and Tyres") {
                window.location.href="/Dashboard/batteryTyres"
              } else if(xhr.responseText == "Upkeep Services") {
                window.location.href="/Dashboard/upkeepServices"
              }
              // window.location.href="/Dashboard/serviceParts"
            }
          }
        })
      }
    });
  });

  $('.deletePart').on('click',function() {
    $partId = $(this).attr('id'); 

    swal({
      title: "Are you sure you want to delete this part?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/AddNewPart/deletePart",
          method: 'POST',
          data:{'partId':$partId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              // alert(xhr.responseText);
              window.location.href="/AddNewPart/viewParts"
            }
          }
        })
      }
    });
  });

  $('.deleteCarType').on('click',function() {
    $carTypeId = $(this).attr('id'); 

    swal({
      title: "Are you sure you want to delete this car type?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/AddNewCarType/deleteCarType",
          method: 'POST',
          data:{'carTypeId':$carTypeId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              // alert(xhr.responseText);
              window.location.href="/AddNewCarType/viewCarTypes"
            }
          }
        })
      }
    });
  });

$('.deleteUpkeep').on('click',function() {
      // console.log("Confirmed----"+$(this).attr('id'));     
      $upkeepId = $(this).attr('id');          
    swal({
      title: "Are you sure you want to delete this package?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/AddNewUpkeep/deletePackage",
          method: 'POST',
          data:{'upkeepId':$upkeepId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              // alert(xhr.responseText);
              window.location.href="/Dashboard/AddNewUpkeep"
            }

          }
        })
      }
    });

  });

$('.makeTable').on('click', '.deleteMake',function() {
      // console.log("Confirmed----"+$(this).attr('id'));     
      $makeId = $(this).attr('id');          
    swal({
      title: "Are you sure you want to delete this package?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        // console.log("Yes Delete");
        $.ajax({
          url: "/AddMake/deleteMake",
          method: 'POST',
          data:{'makeId':$makeId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              // alert(xhr.responseText);
              window.location.href="/Dashboard/make"
            }

          }
        })
      }
    });

  });


  $('.deletePackage').on('click',function() {
      // console.log("Confirmed----"+$(this).attr('id'));     
      $packageId = $(this).attr('id');          
    swal({
      title: "Are you sure you want to delete this package?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/AddNewPackages/deletePackage",
          method: 'POST',
          data:{'packageId':$packageId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              // alert(xhr.responseText);
              window.location.href="/Dashboard/AddNewPackages"
            }

          }
        })
      }
    });

  });

  $('#pacakageFeaturesTable').on('click', '.deleteService', function() {
    // alert("Hello");
    $serviceId = $(this).attr('id');
    swal({
      title: "Are you sure you want to delete this service?",
      text: "",
      icon: "warning",
      buttons: [true, "Yes!"],
      showCancelButton: true,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      cancelButtonText: 'Cancel',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        $.ajax({
          url: "/AddNewServices/deleteService",
          method: 'POST',
          data:{'serviceId':$serviceId},
          success: function(data,status,xhr){
            if(xhr.status==250) {
              alert(xhr.responseText);
            }
            if(xhr.status==200) {
              // alert(xhr.responseText);
              window.location.href="/Dashboard/AddNewServices"
            }

          }
        });
      }
    });
  });

  $('#servicesModalHome').on('show.bs.modal', function(e) {
    alert("Checkkk---");
  });

  $(".variable-width").slick({
    dots: false,
    infinite: true,
    speed: 300,
    slidesToShow: 2,
    centerMode: false,
    variableWidth: true,
    slidesToScroll: 1,
    autoplay: true,
    autoplaySpeed: 2000,
  });
  $(".variable").slick({
     dots: false,
     infinite: true,
     variableWidth: true
  });
  $(".variable-width-booking").slick({
    dots: false,
    infinite: true,
    // speed: 300,
    slidesToShow: 6,
    centerMode: false,
    variableWidth: true
   });

  $('#linkToAccidentalRepair').click(function() {
    $brand = $( "#brandSelect option:selected" ).val();

    $model = $( "#modelSelect option:selected" ).val();
    $fuel = $( "#fuelSelect option:selected" ).val();
    // console.log('brandSelect---',$brand);
    window.location.href = '/accidentalRepair?brand='+$brand+'&model='+$model+'&fuel='+$fuel;
  });

  var brand = "";
  var model = "";
  var fuel = "";

  brand = $( "#brandSelect option:selected" ).text();
  model = $( "#modelSelect option:selected" ).text();
  fuel = $( "#fuelSelect option:selected" ).text();

  if(brand !== "" && model !=="" && fuel !=="") {
    // console.log("Not empty");
    $('#hiddenBrand').val(brand);
    $('#hiddenModel').val(model);
    $('#hiddenFuel').val(fuel);
  }

  $('#servicesModal').on('show.bs.modal', function(e) {
    var serviceTitle = $(e.relatedTarget).attr('id');
    // console.log("Selected Service====="+serviceTitle);
    var serviceId = $(e.relatedTarget).data('servicedata');
    // console.log("Test"+JSON.stringify(serviceId));
    $('#servicesModalTitle').text(serviceTitle);
    $('#selectedService').val(serviceTitle);
  });

  // Api on assign garage modal open
  $( ".dashboard-modal" ).on('show.bs.modal', function(e){
    // console.log("Check--"+$(e.relatedTarget).attr('id'));
    var orderId = $(e.relatedTarget).attr('id');
    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url: "/Dashboard/getOrderData",
      method: 'POST',
      data:{'orderId':orderId},
      success: function(response){
        if(response) {
          var responseParsed = JSON.parse(response);
          var packageNameString = '';
          var brandString = '';
          $('#customerContact').text(responseParsed.ordersData.mobile);
          $('#customerAddress').text(responseParsed.ordersData.address);
          $('#pickupDate').text(responseParsed.ordersData.pickup_date);
          $('#hiddenOrderId').val(responseParsed.ordersData.orderId);
          
          // console.log("response---"+JSON.stringify(responseParsed.ordersData));

          if(responseParsed.ordersData.package_name.length>1) {
            responseParsed.ordersData.package_name.map((data,idx)=>{
              if(packageNameString !=='') {
                packageNameString = packageNameString+','+data;
              } else {
                packageNameString=data;
              }
            });
            // console.log("checkkk--"+packageNameString);
            $('#packageBooked').text(packageNameString);
          }else {
            $('#packageBooked').text(responseParsed.ordersData.package_name[0]);
          }

          // if(responseParsed.ordersData.brand.length>1) {
          //   responseParsed.ordersData.brand.map((data,idx)=>{
          //     if(brandString !=='') {
          //       brandString = brandString+','+data;
          //     } else {
          //       brandString=data;
          //     }
          //   });
            // console.log("checkkk--"+brandString);
          //   $('#packageBooked').text(brandString);
          // }else {
          //   $('#packageBooked').text(responseParsed.ordersData.brand[0]);
          // }

        }
      
      }
    });

    

    $('.assignService').on("click", function(){
      // $.ajaxSetup({
      //   headers: {
      //     'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      //   }
      // });

      // var orderId = $('#hiddenOrderId').val();
      var orderId = $(this).attr('orderid');
      console.log("OrderId is----"+orderId);
      var garageId= $(this).attr('data-id');
      // console.log("AssignGarage Success!!!"+$(this).attr('data-id'));
      // console.log("AssignGarage Success!!!"+orderId);

      $.ajax({
        url: "/Dashboard/assignGarageToOrder",
        method: 'POST',
        data:{'orderId':orderId, 'garageId':garageId},
        success: function(data,status,xhr){
          if(xhr.status==250) {
            alert(xhr.responseText);
          }
          if(xhr.status==200) {
            alert(xhr.responseText);
            window.location.href="/Dashboard/Bookings"
          }
        }
      }); 
    });

    $('.assignServiceHome').on("click", function(){
      // $.ajaxSetup({
      //   headers: {
      //     'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      //   }
      // });

      var orderId = $('#hiddenOrderId').val();
      var garageId= $(this).attr('data-id');
      // console.log("AssignGarage Success!!!"+$(this).attr('data-id'));
      // console.log("AssignGarage Success!!!"+orderId);

      $.ajax({
        url: "/Dashboard/assignGarageToOrder",
        method: 'POST',
        data:{'orderId':orderId, 'garageId':garageId},
        success: function(data,status,xhr){
          if(xhr.status==250) {
            alert(xhr.responseText);
          }
          if(xhr.status==200) {
            alert(xhr.responseText);
            window.location.href="/Dashboard"
          }
        }
      }); 
    });

  });

  
  


  //on garageRequest update status btn click
    $('#updateGarageReqStatus').click(function(e) {
      e.preventDefault();
      var status = $('#selectGarageReqStatus').val();
      var reqId = $('#hiddenGarageRequestId').val();
      var noteData = $('#extraNote').val();
      $.ajax({
        url: "/Dashboard/updateGarageReqStatus",
        method: 'POST',
        data:{'status':status, 'reqId':reqId, 'noteData':noteData},
        success: function(data,status,xhr){
          if(xhr.status==250) {
            alert(xhr.responseText);
          }
          if(xhr.status==200) {
            alert(xhr.responseText);
            window.location.href="/Dashboard/Garage"
          }
        }
      }); 

    });
  // 

  // On unassign modal open
  $('#setStatusModal').on('show.bs.modal', function(e) {
    var currentStatus = $(e.relatedTarget).attr('status');
    var garageRequestId = $(e.relatedTarget).attr('garageId');
    // console.log("Unassign open---"+garageRequestId);

    $('#selectGarageReqStatus').val(currentStatus);
    $('#hiddenGarageRequestId').val(garageRequestId);
  });
  // 

  // Unassign Service
  // $('.unassignGarage').click(function(e) {
  //   e.preventDefault();
  //   var orderId = $(this).attr('orderid');
  //   // var orderId= $(this).attr('data-bookingId');
  //   console.log('orferId----'+orderId);
  //   $.ajaxSetup({
  //     headers: {
  //       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  //     }
  //   });

  //   $.ajax({
  //       url: "/Dashboard/unassignGarage",
  //       method: 'POST',
  //       data:{'orderId':orderId},
  //       success: function(data,status,xhr){
  //         if(xhr.status==250) {
  //           alert(xhr.responseText);
  //         }
  //         if(xhr.status==200) {
  //           alert(xhr.responseText);
  //           // window.location.href="/Dashboard/Bookings"
  //         }
  //       }
  //     }); 
  //   //   url: "/Dashboard/unassignGarage",
  //   //   method: 'POST',
  //   //   data:{'orderId':orderId}
  //   //   success: function(response){
  //   //       success: function(data,status,xhr){
  //   //       if(xhr.status==250) {
  //   //         alert(xhr.responseText);
  //   //       }
  //   //       if(xhr.status==200) {
  //   //         alert(xhr.responseText);
  //   //         window.location.href="/Dashboard/Bookings"
  //   //       }
  //   //     }
      
  //   //   }
  //   // });

  // });

  // $(".navbar-nav li a").on("click", function(){
    // console.log("Hello---"+JSON.stringify($(this).parent().addClass('nav-item')));
  //   $(".navbar-nav li").removeClass("active");
  //   $(this).attr('aria-selected', true);
  // });

  $.ajaxSetup({
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
  });

  $.ajax({
      url: "/PServices/getCartCount",
      method: 'POST',
      success: function(response){
          if(response) {
            $countData =  JSON.parse(response);
            $count = $countData.count;
              $('.outerCheckoutNavBtnDiv').css('display','block');
            if($count>0) {
              $('.outerCheckoutBtnDiv').css('display','block');
              $('.bookServiceBtn').css('display','block');
            }else {
              $('.bookServiceBtn').css('display','none');
            }
          }
      
      }
    });

  $.ajax({
      url: "getCartCount",
      method: 'POST',
      success: function(response){
        if(response) {
          $countData =  JSON.parse(response);
          $count = $countData.count;
          if($count>0) {
            $('.outerCheckoutBtnDiv').css('display','block');
          }else {
            $('.outerCheckoutBtnDiv').css('display','none');
          }
        }  
      
      }
    });

});


$(".nav .dashboard-link").on("click", function(e){
  $(".nav").find(".active").removeClass("active");
  $(this).attr('aria-selected', true);
});
 var count=0;
 function new_element(id,data){
  // var ul = document.getElementById("dynamic-list");
  //   var candidate = document.getElementById("candidate");
  //   var li = document.createElement("li");
  //   li.setAttribute('id',candidate.value);
  //   li.appendChild(document.createTextNode(candidate.value));
  //   ul.appendChild(li);
  count=count+1;
  // console.log(count); 

  $("#"+id+"  .serviceList").append('<div class="col-lg-4 blogBox"><span><li style="font-size: 1rem; display: flex;"> <input type="text" style="width: 80%;" name="list['+count+']" required><button type="button" style="border:0px; background-color: transparent;padding: 0px;" aria-label="Close"><span aria-hidden="true">&times;</span></button></li></span></div>');
}


$('#logoutBtn').click(function() {
  // alert("logout");
});

$('#document').ready(function(){
  $('.closePackage').click(function(e) {
    e.preventDefault();
    window.location.reload();
  //   var userCheck = $(this).attr('data-user');
  //   if(userCheck == "true"){
  //     $('#addNewPack').modal('hide');
  //      $("#addNewPack").attr('aria-hidden', false);
  //   }else if(userCheck == "false"){
  //     window.location.reload();
  //   }
  //   var useCheck = $(this).attr('data-use');
  //   if(useCheck == "true"){
  //     $('#payment').modal('hide');
  //      $("#payment").attr('aria-hidden', false);
  //   }else if(useCheck == "false"){
  //     window.location.reload();
  //   }
  //    var userAddon = $(this).attr('data-addoncheck');
  //   if(userAddon == "true"){
  //     $('#addonServ').modal('hide');
  //      $("#addonServ").attr('aria-hidden', false);
  //   }else if(userAddon == "false"){
  //     window.location.reload();
  //   }
  // var battery = $(this).attr('data-battery');
  //   if(battery == "true"){
  //     $('#batteryTyreModal').modal('hide');
  //      $("#batteryTyreModal").attr('aria-hidden', false);
  //   }else if(battery == "false"){
  //     window.location.reload();
  //   }
    

    // console.log(userAddon);
    // console.log("heeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee");
  });

  $('.closePack').click(function(e) {
    window.location.reload();
});

  $('.modal').removeClass('show');
  $(".blogBox").on('click', this, function (e) {
    $(this).remove();
  });

  // $( ".closeButton" ).click(function() {
  //   $(  ).remove();
  // });

$('#acEstimateRequest').click(function(e){
  e.preventDefault();
  if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Select Make'){
      $('#requestMakeError').removeClass('d-none');
      $("#requestMakeError").html("Select Make");
      return false;
    }else{
      $('#requestMakeError').addClass('d-none');
    }

    if(!$('#modelSelect').val() || $('#modelSelect').val() == 'Select Model'){
      $('#requestModelError').removeClass('d-none');
      $("#requestModelError").html("Select Model");
      return false;
    }else{
      $('#requestModelError').addClass('d-none');
    }

    if(!$('#fuelSelect').val() || $('#fuelSelect').val() == 'Select Fuel'){
      $('#requestFuelError').removeClass('d-none');
      $("#requestFuelError").html("Select Fuel");
      return false;
    }else{
      $('#requestFuelError').addClass('d-none');
    }
   
    if(!$('#mobile1').val() || $('#mobile1').val() == ''){
      $('#requestMobileError').removeClass('d-none');
      $("#requestMobileError").html("Enter Mobile Number");
      return false;
    }else{
      $('#requestMobileError').addClass('d-none');
    }
    // if($('#acPartFound').val() == true){
    //   if(!$('#remark').val() || $('#remark').val() == ''){
    //     $('#requestRemarkError').removeClass('d-none');
    //     $("#requestRemarkError").html("Enter Remark");
    //     return false;
    //   }else{
    //     $('#requestRemarkError').addClass('d-none');
    //   }

    // }
    if(!$('#remark').val() || $('#remark').val() == ''){
      $('#requestRemarkError').removeClass('d-none');
      $("#requestRemarkError").html("Enter Remark");
      return false;
    }else{
      $('#requestRemarkError').addClass('d-none');
    }
   $("#remark").html("");


    // console.log($('#acEstimateForm').serialize());

    $auth = $('#isUserEstimate').val();
    // console.log($auth);
    $('#outerLeadMobile').html('');
    if($auth == 'true'){
      $.ajaxSetup({
        headers: {
         'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
      });   
     $.ajax({
          url: "/PartNotFoundLead",
          method: 'post',
          data: $('#acEstimateForm').serialize(),
          success: function(response){
            // console.log(response);
            if(response.status == true){
               swal({
                  title: "Thank you for enquiry",
                  text: " Our mechanic will visit your place and will give you quote at the time of pick up. ",
                  icon: "success",
                  showCancelButton: false,
                  confirmButtonColor: '#DD6B55',
                  confirmButtonText: 'Okay',
                  closeOnConfirm: true,
                  closeOnClickOutside: false
                }).then(function(isConfirm) {
                   window.location.reload();
                  
                });

              }else{
                // console.log('error');
              }
          }
        });
    }else{
      // alert('hello');

        //  var mobileNumber = {'mobileNumber': $('#mobile1').val()}
        //  var mobileNum  =  $('#mobile1').val();
        //  var brands = $('#brandSelect').val();
        //  var models = $('#modelSelect').val();
        //  var fuels = $('#fuelSelect').val();
        //  // var partIds = $('#partSelect').val();
        //  var acPartFound = $('#acPartFound').val();
        //  var remark = $('#remark').val();
        //  var servType = $('#serviceType').val();
        //  var serviceId = $('#serviceId').val();
        //  var acRepairCheckbox = $('#acRepairCheckbox').val();
        //  var partNotFound = $('#partNotFound').val();
         // console.log(partIds);

          // console.log(mobileNumber);
        // $('#outerLeadMobile').append('<input type="text" class="form-control" name="mobile1" id="mobile1" placeholder="Mobile Number" value="'+mobileNum+'" readonly>');
        // $('#outerLeadMobile').append('<input type="hidden" name="brands" id="brands" value="'+brands+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="models" id="models" value="'+models+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="fuels" id="fuels" value="'+fuels+'">');
        // // $('#outerLeadMobile').append('<input type="hidden" name="estimatePart" id="estimatePart" value="'+partIds+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="partNotFound" id="partNotFound" value="'+partNotFound+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="acPartFound" id="acPartFound" value="'+acPartFound+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="remark" id="remark" value="'+remark+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="serviceType" id="serviceType" value="'+servType+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="serviceId" id="serviceId" value="'+serviceId+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="acRepairCheckbox" id="acRepairCheckbox" value="'+acRepairCheckbox+'">');
        //  $("#modelSelection").append('');
        // $("#EstimateLogin").modal('toggle');
         $.ajaxSetup({
              headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
          });
             $.ajax({
          url: "/PartNotFoundLead",
          method: 'post',
          data: $('#acEstimateForm').serialize(),
          success: function(response){
            // console.log(response);
            if(response.status == true){
               swal({
                  title: "Thank you for enquiry",
                  text: " Our mechanic will visit your place and will give you quote at the time of pick up. ",
                  icon: "success",
                  showCancelButton: false,
                  confirmButtonColor: '#DD6B55',
                  confirmButtonText: 'Okay',
                  closeOnConfirm: true,
                  closeOnClickOutside: false
                }).then(function(isConfirm) {
                   window.location.reload();
                  
                });

              }else{
                // console.log('error');
              }
          }
        });
    }

});

$("#verifyEstimate").click(function(e){
   e.preventDefault();
      
      $formData = $("#estimate_form").serialize();
      var estimateMobile = $('#estimateMobile').val();
      var estimateOtp = $('#estimateOtp').val();
      var estimateCheck = $('#estimateCheckbox').val();
      $storedOTP = localStorage.getItem('otp');
      // console.log(estimateOtp);
        // console.log("formData----"+$formData);
      if($storedOTP == $('#estimateOtp').val()) {
        $("#EstimateLogin").modal('toggle');
          $.ajaxSetup({
          headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
          }
        });   

      if ($('#acPartFound').val() == "false") {
        // console.log("hello part not found");
         $.ajax({
              url: "/PartNotFoundLead",
              method: 'post',
              data: $formData,
              success: function(response){
                // console.log(response);
                if(response.status == true){
                 swal({
                    title: "Thank you for enquiry",
                    text: " Our mechanic will visit your place and will give you quote at the time of pick up. ",
                    icon: "success",
                    showCancelButton: false,
                    confirmButtonColor: '#DD6B55',
                    confirmButtonText: 'Okay',
                    closeOnConfirm: true,
                    closeOnClickOutside: false
                  }).then(function(isConfirm) {
                      location.reload(); 
                  });

                }else{
                  // console.log("something went wrong");
                }
              }
            });
          }else{
        // console.log("hello part not found");
            $.ajax({
              url:'getEstimate',
              type:'post',
              data: $formData,
              success: function(response){
                // console.log(response);
                if(response.status == true){
                  // console.log(response.status);
                  onOuterCheckoutClick();
                }
              }
            });

          }




     }else {
       alert("Invalid OTP");
   }
});





$('#acEstimateSubmit').click(function(e){
  e.preventDefault();
  var partPrice= $(this).attr('data-price');
    // console.log(partPrice);
  if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Select Make'){
      $('#requestMakeError').removeClass('d-none');
      $("#requestMakeError").html("Select Make");
      return false;
    }else{
      $('#requestMakeError').addClass('d-none');
    }

    if(!$('#modelSelect').val() || $('#modelSelect').val() == 'Select Model'){
      $('#requestModelError').removeClass('d-none');
      $("#requestModelError").html("Select Model");
      return false;
    }else{
      $('#requestModelError').addClass('d-none');
    }

    if(!$('#fuelSelect').val() || $('#fuelSelect').val() == 'Select Fuel'){
      $('#requestFuelError').removeClass('d-none');
      $("#requestFuelError").html("Select Fuel");
      return false;
    }else{
      $('#requestFuelError').addClass('d-none');
    }
     if(!$('#mobile1').val() || $('#mobile1').val() == ''){
      $('#requestMobileError').removeClass('d-none');
      $("#requestMobileError").html("Enter Mobile Number");
      return false;
    }else{
      $('#requestMobileError').addClass('d-none');
    }
    if(!$('#partSelect').val() || $('#partSelect').val() == null){
      $('#requestPartError').removeClass('d-none');
      $("#requestPartError").html("Select Car Part");
      return false;
    }else{
      $('#requestPartError').addClass('d-none');
    }

    // if($('#acPartFound').val() == 'false'){
    //   if(!$('#partNotFound').val() || $('#partNotFound').val() == ''){
    //   $('#requestpartNotFoundError').removeClass('d-none');
    //   $("#requestpartNotFoundError").html("Enter Your Query");
    //   return false;
    // }else{
    //   $('#requestpartNotFoundError').addClass('d-none');
    // }

    // }



    // $('#acEstimateSubmit').attr('disabled','true')

    // console.log($('#acEstimateForm').serialize());

    $auth = $('#isUserEstimate').val();
    // console.log($auth);
    $('#outerLeadMobile').html('');
    if($auth == 'true'){
      $.ajaxSetup({
        headers: {
         'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
      });   
     $.ajax({
          url: "getEstimate",
          method: 'post',
          data: $('#acEstimateForm').serialize(),
          success: function(response){
            // console.log(response);
            // $('#estimateAppendMake').html(''); 
            // $('#estimateAppendModel').html(''); 
            // $('#estimateAppendFuel').html(''); 
            // $('#estimatedTotalPrice').html(''); 
            // $('#selectedP').html(''); 
            if(response.status == true){
              // console.log(response.make);
               if(response.status == true){
                // console.log(response.status);
                $.ajax({
                  url: "/PServices/getCartCount",
                  method: 'POST',
                  success: function(response){
                      if(response) {
                        $countData =  JSON.parse(response);
                        $count = $countData.count;
                          $('.outerCheckoutBtnDiv').css('display','block');
                    console.log("checkCartCount called---------"+$count);
                        if($count>0) {
                          $('.bookServiceBtn').css('display','block');
                        }else {
                          $('.bookServiceBtn').css('display','none');
                        }
                      }
                  
                  }
                });
                onOuterCheckoutClick();

              }
            }
          }
        });
    }else{
        // $("#EstimateLogin").modal('toggle');
        $('#EstimateLogin').modal({
                backdrop: 'static',
                keyboard: true, 
                show: true
              });

         var mobileNumber = {'mobileNumber': $('#mobile1').val()};
         var mobileNum  =  $('#mobile1').val();
         var brand = $('#brandSelect').val();
         var model = $('#modelSelect').val();
         var fuel = $('#fuelSelect').val();
         var partIds = $('#partSelect').val();
         var acPartFound = $('#acPartFound').val();
         var remark = $('#remark').val();
         var servType = $('#serviceType').val();
         var servId  = $('#serviceId').val();
         var estimateCheckbox = $('#acRepairCheckbox').val();
         var partNotFound = $('#partNotFound').val();

          // console.log(acPartFound);
        $('#outerLeadMobile').append('<input type="text" class="form-control" maxlength="10" name="mobile1" id="mobile1" placeholder="Mobile Number" value="'+mobileNum+'" readonly>');
        $('#outerLeadMobile').append('<input type="hidden" name="brands" id="brands" value="'+brand+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="models" id="models" value="'+model+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="fuels" id="fuels" value="'+fuel+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="partSelection" id="partSelection" value="'+partIds+'">');
        // $('#outerLeadMobile').append('<input type="hidden" name="Uname" id="Uname" value="'+username+'">');        
        $('#outerLeadMobile').append('<input type="hidden" name="acPartFound" id="acPartFound" value="'+acPartFound+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="partNotFound" id="partNotFound" value="'+partNotFound+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="remark" id="remark" value="'+remark+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="serviceType" id="serviceType" value="'+servType+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="serviceId" id="serviceId" value="'+servId+'">');
        $('#outerLeadMobile').append('<input type="hidden" name="acRepairCheckbox" id="acRepairCheckbox" value="'+estimateCheckbox+'">');
         $("#modelSelection").append('');
         $.ajaxSetup({
              headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
          });
          $.ajax({
            url: "leadOtp",
            method: 'post',
            data: mobileNumber,
            success:function(data,status,xhr) {
              // console.log("OTP Test1---"+JSON.stringify(xhr));
              if(xhr.status==200) {
                localStorage.setItem("otp", xhr.responseText);
                // Resend OTP Code ---------------------------------------------
        
                  $('.resendOtpDiv').removeClass('d-none');
                  $('.resendOtpText').css('cursor','not-allowed');
                  $('.resendOtpText').css('pointer-events','none');
                  // var fiveMinutes = 60 * 1,
                  var display2 = document.querySelector('#time2');



                  var timer2 = new CountDownTimer(30);
                  timer2.onTick(format(display2)).start();

                  function format(display) {
                    return function (minutes, seconds) {
                      minutes = minutes < 10 ? "0" + minutes : minutes;
                      seconds = seconds < 10 ? "0" + seconds : seconds;
                      display.textContent = minutes + ':' + seconds;
                      // console.log("Check---"+seconds);
                      if(seconds == 0) {
                        $('.resendOtpTextTimer').addClass('d-none');
                        $('.resendOtpText').css('pointer-events','auto');
                        $('.resendOtpText').css('cursor','pointer');
                      }
                    };
                  } 

                // Resend OTP Code Ends ---------------------------------------------
              }
              if(xhr.status==250) {
                swal(xhr.responseText, "", "warning");
              }
            },
            error:function () {
              // console.log('error');
            }
          });
    }

});

  $('#request_submit').click(function(e){
      var email = $('#requestEmail').val();
      var name = $('#requestName').val();
      // console.log(mobile);
      if(!$('#requestName').val() || !name.trim()){
        $('#requestNameError').removeClass('d-none');
        $('#requestMobileError').addClass('d-none');
        $('#requestEmailError').addClass('d-none');
        document.getElementById("requestNameError").innerHTML="Enter Valid Name";
        return false;
      }
      if(!$('#requestmobile').val()){
          $('#requestMobileError').removeClass('d-none');
          $('#requestNameError').addClass('d-none');
          $('#requestEmailError').addClass('d-none');
          document.getElementById("requestMobileError").innerHTML="Enter mobile";
          return false;
       }
       if(!$('#requestEmail').val()){
          $('#requestEmailError').removeClass('d-none');
          $('#requstNameError').addClass('d-none');
          $('#requeMobileError').addClass('d-none');
          document.getElementById("requestEmailError").innerHTML="Enter email";
          return false;
      }
      //   if (emailReg.test(email)) {
      //       $('#requestEmailError').removeClass('d-none');
      //     $('#requstNameError').addClass('d-none');
      //     $('#requeMobileError').addClass('d-none');
      //     document.getElementById("requestEmailError").innerHTML="Enter valid email";
      //     return false;
      //      }
      var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
          if(!regex.test(email)) {
            // console.log('false');
          $('#requestEmailError').removeClass('d-none');
            document.getElementById("requestEmailError").innerHTML="Enter valid email";
            return false;
          }
          $('#requestNameError').addClass('d-none');
        $('#requestMobileError').addClass('d-none');
        $('#requestEmailError').addClass('d-none');
        e.preventDefault();

        $isLoggedIn = $('.isLoggedIn').val();
        console.log("Is user logged in----"+$isLoggedIn);

        /*Ajax Request Header setup*/
        $.ajaxSetup({
          headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
          }
        });


        if($isLoggedIn == "true") {
          $('#request_submit').html('Sending..');
          
          /* Submit form data using ajax*/
          
          $.ajax({
            url: "Callback",
            method: 'post',
            data: $('#request_form').serialize(),
            success: function(response){
              $('#request_submit').html('Submit');
              $('#res_message').show();
              $('#res_message').html(response.msg);
              $('#msg_div').removeClass('d-none');

              document.getElementById("request_form").reset(); 
              setTimeout(function(){
                 $('#res_message').hide();
                 $('#msg_div').hide();
              },8000);
            }
          });

        } else {
          $('#outerLeadMobile').append('<input type="text" class="form-control" maxlength="10" name="mobile1" id="mobile1" placeholder="Mobile Number" value="'+$('#requestmobile').val()+'" readonly>');
          $('#outerLeadMobile').append('<input type="hidden" name="Brand_id" id="Brand_id" value="'+email+'">');
          $('#outerLeadMobile').append('<input type="hidden" name="Model_id" id="Model_id" value="'+name+'">');

          $('#reqCBLogin').modal({
            backdrop: 'static',
            keyboard: true, 
            show: true
          });

          $.ajaxSetup({
            headers: {
              'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
          });
          // console.log('hello');
          $.ajax({
            url: "leadOtp",
            method: 'post',
            data: {'mobileNumber':$('#requestmobile').val()},
            success:function(data,status,xhr) {
              console.log("OTP Test77---"+JSON.stringify(xhr));
              if(xhr.status==200) {
                localStorage.setItem("otp", xhr.responseText);
                $('.otpText').show();
                $('.loginUserBtn').show();
                $('.sendOtpBtn').hide();
                 // Resend OTP Code ---------------------------------------------
                $('.resendOtpDiv').removeClass('d-none');
                $('.resendOtpText').css('cursor','not-allowed');
                $('.resendOtpText').css('pointer-events','none');
                    // var fiveMinutes = 60 * 1,
                var display2 = document.querySelector('#time3');
                var timer2 = new CountDownTimer(30);
                timer2.onTick(format(display2)).start();
                function format(display) {
                return function (minutes, seconds) {
                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;
                display.textContent = minutes + ':' + seconds;
                // console.log("Check---"+seconds);
                if(seconds == 0) {
                  $('.resendOtpTextTimer').addClass('d-none');
                  $('.resendOtpText').css('pointer-events','auto');
                  $('.resendOtpText').css('cursor','pointer');
                }
              };
            } 
    // Resend OTP Code Ends ---------------------------------------------
          }
          if(xhr.status==250) {
            swal(xhr.responseText, "", "warning");
          }
        },
        error:function () {
          // console.log('error');
        }
      });
        }     
  });

  $('#verifyReqCBLogin').click(function(e){
    e.preventDefault();
    $formData = $("#reqCBLoginForm").serialize();
    console.log('formData----');
    console.log($formData);
    var leadModbile = $('#leadMobile').val();
    var leadOtp = $('#leadOtp').val();
    $storedOTP = localStorage.getItem('otp');
    if($storedOTP == $('#leadOtp').val()) {
      console.log("Valid OTP");
      $.ajaxSetup({
        headers: {
          'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
      });
  
      $.ajax({
        url: "Callback",
        method: 'post',
        data: $('#request_form').serialize(),
        success: function(response){
          $('#request_submit').html('Submit');
          $('#res_message').show();
          $('#res_message').html(response.msg);
          $('#msg_div').removeClass('d-none');

          document.getElementById("request_form").reset(); 
          setTimeout(function(){
             $('#res_message').hide();
             $('#msg_div').hide();
          },8000);
        }
      });
      $("#reqCBLogin").modal('hide');
    } else {
      alert("Invalid OTP");
      console.log("Invalid Otp");
    }

  });

  
  $('#submitServicesFormBtn2').click(function(e){

    if($('#brandSelection').val() == "" || $('#modelSelection').val() == "" || $('#fuelSelection').val() == "" || $('#user_name').val() == "" || $('#mobileNo').val() == "" ) {
      swal({
        title: "Please Fill All Required Fields.",
        text: "",
        icon: "warning",
        showCancelButton: false,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: 'Okay',
        closeOnConfirm: true,
        closeOnClickOutside: false
      }).then(function(isConfirm) {
        
      });
      return false;
    } else {
      $('#mobileError').addClass('d-none');
    }

    var mobileNo = $('#mobileNo').val();

    if($('#brandSelection').val() == "Model" || $('#brandSelection').val() == "") {
        $('#brandError').removeClass('d-none');
        $('#brandError').text("Select a valid car brand.");
        return false;
    }else {
      $('#brandError').addClass('d-none');
    }

    if($('#modelSelection').val() == "Model" || $('#modelSelection').val() == "") {
        $('#modelError').removeClass('d-none');
        $('#modelError').text("Select a valid car model.");
        return false;
    }else {
      $('#modelError').addClass('d-none');
    }

    if($('#fuelSelection').val() == "Fuel" || $('#fuelSelection').val() == "") {
        $('#fuelError').removeClass('d-none');
        $('#fuelError').text("Select a valid fuel type.");
        return false;
    }else {
      $('#fuelError').addClass('d-none');
    }

    if(mobileNo.length<10) {
      $('#mobileError').removeClass('d-none');
      $('#mobileError').text("Enter a valid mobile number.");
      return false;
    } else {
      $('#mobileError').addClass('d-none');
    }


    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url: "/registerServiceLead",
      method: 'post',
      data: $('#servicesForm').serialize(),
      success: function(response){
        // console.log('response---'+response);
          swal("Request Submitted",'','success');
        $("#servicesModal").modal('hide');
        $('.modal-backdrop').css('display','none');
        // if(JSON.parse( response.responseCode) == 200) {
        // }
      }
    });
  });

  $('#submitServicesFormBtn').click(function(e){

    if($('#brandSelect').val() == "" || $('#modelSelect').val() == "" || $('#fuelSelect').val() == "" || $('#user_name').val() == "" || $('#mobileNo').val() == "" ) {
      swal({
        title: "Please Fill All Required Fields.",
        text: "",
        icon: "warning",
        showCancelButton: false,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: 'Okay',
        closeOnConfirm: true,
        closeOnClickOutside: false
      }).then(function(isConfirm) {
        
      });
      return false;
    } else {
      $('#mobileError').addClass('d-none');
    }
    
    var mobileNo = $('#mobileNo').val();
    // console.log("ooo---o----"+mobileNo.length);

    if($('#brandSelect').val() == "Model" || $('#brandSelect').val() == "") {
        $('#brandError').removeClass('d-none');
        $('#brandError').text("Select a valid car brand.");
        return false;
    }else {
      $('#brandError').addClass('d-none');
    }

    if($('#modelSelect').val() == "Model" || $('#modelSelect').val() == "") {
        $('#modelError').removeClass('d-none');
        $('#modelError').text("Select a valid car model.");
        return false;
    }else {
      $('#modelError').addClass('d-none');
    }

    if($('#fuelSelect').val() == "Fuel" || $('#fuelSelect').val() == "") {
        $('#fuelError').removeClass('d-none');
        $('#fuelError').text("Select a valid fuel type.");
        return false;
    }else {
      $('#fuelError').addClass('d-none');
    }

    if(mobileNo.length<10) {
      $('#mobileError').removeClass('d-none');
      $('#mobileError').text("Enter a valid mobile number.");
      return false;
    } else {
      $('#mobileError').addClass('d-none');
    }

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
      url: "services/registerServiceLead",
      method: 'post',
      data: $('#servicesForm').serialize(),
      success: function(response){
          // alert("Request Submitted");

          swal({
            title: "Request Submitted Successfully!!!",
            text: "",
            icon: "success",
            showCancelButton: false,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'Okay',
            closeOnConfirm: true,
            closeOnClickOutside: false
          }).then(function(isConfirm) {
            if (isConfirm) {
              $("#servicesModal").modal('hide');
              $('.modal-backdrop').css('display','none');
              location.reload();
            }
          });

        // $("#servicesModal").modal('hide');
        // $('.modal-backdrop').css('display','none');
        // if(JSON.parse( response.responseCode) == 200) {
        // }
      }
    });
  });

  $('#garage_submit').click(function(e){
    e.preventDefault();
    var garageName = $('#garagename').val();
    var garageAddress = $('#garageAddress').val();
    var mobileNo = $('#garagemobile').val();

    var mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
    var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
      var filter = /^\d*(?:\.\d{1,2})?$/;
    var name = $('#garagename').val();
    var email = $('#garageemail').val();
    var mobNum = $('#garagemobile').val();
     // console.log("Check---"+$('#garageAddress').val());
      if(!$('#garagename').val() || !garageName.trim()){
        $('#NameError').removeClass('d-none');
        $('#MobileError').addClass('d-none');
        $('#EmailError').addClass('d-none');
        $('#AddressError').addClass('d-none');
        document.getElementById("NameError").innerHTML="Enter Valid Name";
        return false;
      }

      if(name == null || name == '  ' || name == ' ' || !name.trim()){
        // console.log('hi');
        $('.displayError').removeClass('d-none');
        $('.errorList').html('Enter Valid Name');
        return false;
      }
      if(!$('#garagemobile').val()){
        $('#MobileError').removeClass('d-none');
        $('#NameError').addClass('d-none');
        $('#EmailError').addClass('d-none');
        $('#AddressError').addClass('d-none');
        document.getElementById("MobileError").innerHTML="Enter Mobile";
        return false;
      }
      if (filter.test(mobNum)) {
        if(mobNum.length==10){

        } else {
            $('#MobileError').removeClass('d-none');
            $('#MobileError').html('Please put 10 digit mobile number');
            return false;
        }
      }else {
        $('#MobileError').removeClass('d-none');
        $('#MobileError').html('Enter valid number');
        return false;
      }

       if(!$('#garageAddress').val()){
        $('#AddressError').removeClass('d-none');
        $('#NameError').addClass('d-none');
        $('#EmailError').addClass('d-none');
        $('#MobileError').addClass('d-none');
        document.getElementById("AddressError").innerHTML="Enter Garage Address";
        return false;
      }
       if(!$('#garageemail').val()){
        $('#EmailError').removeClass('d-none');
        $('#MobileError').addClass('d-none');
        $('#NameError').addClass('d-none');
        $('#AddressError').addClass('d-none');
        document.getElementById("EmailError").innerHTML="Enter Email";
        return false;
      }
      if(!regex.test(email)) {
         // console.log('false');
        $('.displayError').removeClass('d-none');
        $('.errorList').html('Enter Valid Email');
        return false;
      }



        $('#NameError').addClass('d-none');
        $('#MobileError').addClass('d-none');
        $('#EmailError').addClass('d-none');
        $('#AddressError').addClass('d-none');
        if($('#garageemail').val().match(mailformat)){
          $('#EmailError').addClass('d-none');
          // console.log("email format matched");

      /*Ajax Request Header setup*/
          $.ajaxSetup({
            headers: {
              'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
          }
        });

        $('#garage_submit').html('Sending..');

        /* Submit form data using ajax*/
        $.ajax({
         url: "GarageReq",
         method: 'post',
         data: $('#garage_form').serialize(),
         success: function(response){
          //------------------------
            $('#garage_submit').html('Submit');
            $('#res_message').show();
            $('#res_message').html(response.msg);
            $('#msg_div').removeClass('d-none');

            document.getElementById("garage_form").reset(); 
            setTimeout(function(){
              $('#res_message').hide();
              $('#msg_div').hide();
            },8000);
         }
        });
      }else{
      $('#EmailError').removeClass('d-none');
      $('#MobileError').addClass('d-none');
      $('#NameError').addClass('d-none');
      // $('#AddressError').addClass('d-none');
      document.getElementById("EmailError").innerHTML="Enter Valid Email";
      return false;
    }      
 });

   $('#selectCar').click(function(e){
      e.preventDefault();
      var a = $('#changeTextData').text();
      var b = "Select Car"; 
      // console.log
      var ans = a.localeCompare(b);
      var mobile = $('#mobile1').val();
       var carDetailsId = document.getElementById("changeTextDataIds").value;
            var brand_id = document.getElementById('brand_id').value;
            var model_id = document.getElementById('model_id').value;
            var fuel_id  = document.getElementById('fuel_id').value;
            // console.log('aaaaaaaaaaaaaaaa=====>'+brand_id);
      // console.log("Ans=="+ans);
           // alert('test==>'+ JSON.stringify(mobile));
      if (ans == 0) { 
         $('#div1').removeClass('d-none');
         document.getElementById("div1").innerHTML="Select Your Car";
         return false;
      } else {
        $('#div1').addClass('d-none');
      }

      if(!$('#mobile1').val()){
        $('#div2').removeClass('d-none');
        document.getElementById("div2").innerHTML="Enter mobile";

        return false;
      } 
     $('#outerLeadMobile').html('');
      var AuthUser1 = $('#isUserLoggedIn').val();
      if (AuthUser1 == "true") {
      // console.log("PackModelTrue---"+$('#isUserLoggedIn').val());
            document.getElementById("div2").innerHTML="";
            var completeSelection = document.getElementById("changeTextData").innerHTML;
            var idsSelection = document.getElementById("changeTextDataIds").value;
            var selectionArr = completeSelection.split(',');
            var idsArr = idsSelection.split(',')
            // console.log("00000000-------"+selectionArr[0]);

            $.ajaxSetup({
                headers: {
                  'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
              }
            });
            $.ajax({
              url: "/saveDataToSession",
              method: 'post',
              data: {'selectionArr':selectionArr, 'idsSelection':idsSelection},
              success:function(data,status,xhr) {
                // console.log("OK-------"+JSON.stringify(xhr));
                if(xhr.status == 200) {
                  window.location.href = "/services/"+xhr.responseText;
                }
              }
            });

            // window.location.replace('/PServices/'+selectionArr+idsSelection);
      }else{
        
        var mobileNumber = {'mobileNumber': mobile}
        $('#outerLeadMobile').append('<input type="text" class="form-control" maxlength="10" name="leadMobile" id="leadMobile" placeholder="Mobile Number" value="'+mobile+'" readonly>');
        $('#outerLeadMobile').append('<input type="hidden" class="form-control" name="carDetails" id="carDetails" value="'+a+'">');
         $('#outerLeadMobile').append('<input type="hidden" class="form-control" name="carDetailsIds" id="carDetailsIds" value="'+carDetailsId+'">');
         $('#outerLeadMobile').append('<input type="hidden" class="form-control" name="brand_id" id="brand_id" value="'+brand_id+'">');
         $('#outerLeadMobile').append('<input type="hidden" class="form-control" name="model_id" id="model_id" value="'+model_id+'">');
         $('#outerLeadMobile').append('<input type="hidden" class="form-control" name="fuel_id" id="fuel_id" value="'+fuel_id+'">');
         // $("#modelSelection").append('');
        $("#exampleModalCenter").modal('toggle');
         $.ajaxSetup({
              headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
          });
          $.ajax({
            url: "leadOtp",
            method: 'post',
            data: mobileNumber,
            success:function(data,status,xhr) {
              // console.log("OTP Test2---"+JSON.stringify(xhr));
              if(xhr.status==200) {
                localStorage.setItem("otp", xhr.responseText);
                // Resend OTP Code ---------------------------------------------
        
                  $('.resendOtpDiv').removeClass('d-none');
                  $('.resendOtpText').css('cursor','not-allowed');
                  $('.resendOtpText').css('pointer-events','none');
                  // var fiveMinutes = 60 * 1,
                  var display2 = document.querySelector('#time2');
                  var timer2 = new CountDownTimer(30);
                  timer2.onTick(format(display2)).start();

                  function format(display) {
                    return function (minutes, seconds) {
                      minutes = minutes < 10 ? "0" + minutes : minutes;
                      seconds = seconds < 10 ? "0" + seconds : seconds;
                      display.textContent = minutes + ':' + seconds;
                      // console.log("Check---"+seconds);
                      if(seconds == 0) {
                        $('.resendOtpTextTimer').addClass('d-none');
                        $('.resendOtpText').css('pointer-events','auto');
                        $('.resendOtpText').css('cursor','pointer');
                      }
                    };
                  } 

                // Resend OTP Code Ends ---------------------------------------------
              }
              if(xhr.status==250) {
                swal(xhr.responseText, "", "warning");
              }
            },
            error:function () {
              // console.log('error');
            }
          });

        }

      // else if (ans == 1){
         // console.log('test==----');
      //    document.getElementById("div1").innerHTML="";

      //    if(!$('#mobile1').val()){
      //       $('#div2').removeClass('d-none');
      //       document.getElementById("div2").innerHTML="Enter mobile";

      //       return false;
      //    }
      //    else{
            // console.log("selectCar--------"+ans);
            // document.getElementById("div2").innerHTML="";
            // var completeSelection = document.getElementById("changeTextData").innerHTML;
            // var idsSelection = document.getElementById("changeTextDataIds").value;
            // console.log("OK-------"+idsSelection);
            // var selectionArr = completeSelection.split(',');
            // var idsArr = idsSelection.split(',')
            // console.log("00000000-------"+selectionArr[0]);
            // window.location.replace('/PServices/'+selectionArr+idsSelection);
      //    }
      // }

   });

  $('#resendOtpHome').click(function() {
    // console.log("leadNo----"+$('#leadMobile').val());
    $.ajax({
      url: "leadOtp",
      method: 'post',
      data: {'mobileNumber': $('#leadMobile').val()},
      success:function(data,status,xhr) {
        // console.log("OTP Test---123-----"+JSON.stringify(xhr));
        if(xhr.status==200) {
          localStorage.setItem("otp", xhr.responseText);
          // Resend OTP Code ---------------------------------------------
  
            $('.resendOtpTextTimer').removeClass('d-none');
            $('.resendOtpDiv').removeClass('d-none');
            $('.resendOtpText').css('pointer-events','none');
            $('.resendOtpText').css('cursor','not-allowed');
            // var fiveMinutes = 60 * 1,
            var display2 = document.querySelector('#time2');
            var timer2 = new CountDownTimer(30);
            timer2.onTick(format(display2)).start();

            function format(display) {
              return function (minutes, seconds) {
                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;
                display.textContent = minutes + ':' + seconds;
                // console.log("Check---"+seconds);
                if(seconds == 0) {
                  $('.resendOtpTextTimer').addClass('d-none');
                  $('.resendOtpText').css('pointer-events','auto');
                  $('.resendOtpText').css('cursor','pointer');
                }
              };
            } 

          // Resend OTP Code Ends ---------------------------------------------
        }
        if(xhr.status==250) {
          swal(xhr.responseText, "", "warning");
        }
      },
      error:function () {
        // console.log('error');
      }
    });
  });


  $('#verifyLead').click(function(e){
    e.preventDefault();
    // alert('hello');
    if(!$('#leadMobile').val()){
      $('#div2').removeClass('d-none');
      document.getElementById("div2").innerHTML="Enter mobile";
      return false;
    } 

      $formData = $("#lead_form").serialize();
      var leadModbile = $('#leadMobile').val();
      var leadOtp = $('#leadOtp').val();
      $storedOTP = localStorage.getItem('otp');
      // console.log($storedOTP);
      if($storedOTP == $('#leadOtp').val()) {
        // console.log("formData----"+$formData);
         $.ajax({
          url:'withSelectCarRegistration',
           type:'post',
           data: $formData,
           success:function(data,status,xhr){
           // console.log("XHR---"+JSON.stringify(data));
            car_ids       = data.carDetailsIds;
            car_details   = data.car_details
            // console.log(car_details);
            // console.log(car_ids);
            // document.getElementById("div2").innerHTML="";
            // var completeSelection = document.getElementById("changeTextData").innerHTML;
            // var idsSelection = document.getElementById("changeTextDataIds").value;
            // console.log("OK-------"+completeSelection);
            // var selectionArr = completeSelection.split(',');
            // var idsArr = idsSelection.split(',')
            // console.log("00000000-------"+selectionArr[0]);
            window.location.href = "/services";
            // window.location.replace('/PServices/'+car_details+car_ids);
        }
       });
        $("#exampleModalCenter").modal('toggle');
     }else {
       alert("Invalid OTP");
     // $('#loginWithOTPModal').modal('show');
   }
});


  $('#verifyCheckService').click(function(e){
     e.preventDefault();
      $formData = $("#checkServiceLoginForm").serialize();
      // console.log($formData);
      var leadModbile = $('#leadMobile').val();
      var leadOtp = $('#leadOtp').val();
      $storedOTP = localStorage.getItem('otp');
      if($storedOTP == $('#leadOtp').val()) {
        // console.log("formData----"+$formData);
        $.ajax({
          url:'searchPackages',
          type:'post',
          data: $formData,
          success:function(data){
            // console.log("CheckData2---------"+JSON.stringify(data.categories));
            // console.log(data.categories);
            $.ajax({
              url:'getCartPackages',
              type:'get',
              data:{Model_id},
              success:function(data){
                uniqueIdsArr = [... new Set(data.cartIdArr)]
                $.each(uniqueIdsArr,function(idx,val){
                   // console.log("Data----"+JSON.stringify(val));
                  $('#pack-'+val).html("Added");
                  $('#pack-'+val).prop('disabled', true);
                  $('#remPack-'+val).css("display", "block");
                  $('.packModel').prop('disabled', true);
                  $('#pack-'+val).removeClass("bookPackageModel");
                  $('.bookPackageModel').prop('disabled', true);

                });
             }
          });

          $("#packData").html("");
          returnPacks = '';
          returnServs = '';
          $("#packData").append(returnPacks);
          window.location.reload();

          $.each(data.categories,function(row,data1){
             var abc = JSON.stringify(data1);
             var dataPackString = abc.replace('"', '"');
             // console.log(dataPackString);
             // var xyz = abc.split(" ").join("&").toLowerCase();
             // const string4 = new String("A String object");
             // console.log(xyz);
              // console.log("Val00---"+uniqueIdsArr);
           returnPacks+='<div class="col-lg-4 my-2"><div class="tooltipContent blueButton py-4 px-3" id="tooltipContent" style="border:1px solid #F5E72E"><div class="row"><div class="col-lg-9 p-0">';
           returnPacks+='<h6 style="font-size: 0.9rem;font-weight: bolder;color:#fff;text-transform:uppercase">'+data1.package_name+'</h6>';
           returnPacks+='</div>';
           if(data1.discounted_price>0) {
                returnPacks+='<div class="col-lg-3 text-right"><h5 style="color:#fff; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 10px;margin-right: 5px; font-size: 1rem;" >₹'+data1.total_price+'</span><span style="font-size: 1rem;">₹'+data1.discounted_price+'</span></h5></div>';
            } else {
                returnPacks+='<div class="col-lg-3 text-right"><h5 style="color:#fff;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">₹'+data1.total_price+'</h5></div>';
            }
           returnPacks+='</div>';
           returnPacks+='<h6 style="font-size: 0.8rem; text-transform:uppercase; " class="text-white">'+data1.package_description+'</h6>';
            returnPacks+='<ul class="pl-0" ><div class="row tooltip-data">';
           if(data1.has_services.length>0) {
              $.each(data1.has_services,function(ind,dat){
                  returnPacks+='<div class="col-lg-6"><span>';
                  returnPacks+='<li style="font-size: 0.8rem; font-weight:bold; color:#121A7F;">'+dat.service_name+'</li>';
                  returnPacks+='</span></div>';
              });
          }
            returnPacks+='</div></ul>';
             
           // returnPacks+='<ul class="pl-0" ><div class="row">';
         //   var extraServiceCount = 0;
         //    var pacakgeName = JSON.stringify(data1.has_services.length);
         //    if(data1.has_services.length>5) {
         //      extraServiceCount = data1.has_services.length - 5;
         //    }
            // console.log("Check services---"+pacakgeName);
         //    $.each(data1.has_services,function(ind,dat){
         //      if(ind<5) {
         //        returnPacks+='<div class="col-lg-6"><span>';
         //        returnPacks+='<li style="font-size: 0.8rem; color:#121A7F;">'+dat.service_name+'</li>';
         //        returnPacks+='</span></div>';
         //        if(ind == 4 && extraServiceCount !== 0 ) {
         //            returnPacks+='<div class="loadMore" style=""><a href="javascript:void(0)" class="loadMoreBtn" id="'+data1.package_name+'" style="font-size: 0.8rem;">+'+extraServiceCount+'more </a></div>';
         //        }
         //      }
         //      if(ind >= 5) {
         //        returnPacks+='<div class="col-lg-6 '+data1.package_name+'_hidden" style="display:none"><span>';
         //          returnPacks+='<li style="font-size: 0.8rem;color:#121A7F;">'+dat.service_name+'</li>';
         //          returnPacks+='</span></div>';
         //          if(ind == data1.has_services.length-1) {
         //              returnPacks+='<div class="hideLoadMore '+data1.package_name+'_hideBtn" style="display:none;"><a href="javascript:void(0)" class="hideLoadMoreBtn" id="'+data1.package_name+'" style="font-size: 0.7rem;"> Hide </a></div>';
         //          }
         //        }

         //  });
         // returnPacks+='</div></ul>';
         returnPacks+='<div class="row" style="align-items:flex-end;">';
          if(data1.service_time != null){
            returnPacks+='<div class="col-lg-3"><h6 class="bg-white text-color px-3 py-1 m-0 text-center"> '+data1.service_time+' hours </h6></div>';
        }else{
            returnPacks+='<div class="col-lg-3"><h6 class="px-3 py-1 m-0 text-center"></h6></div>';
        }
         returnPacks+='<div class="col-lg-5"></div>';
         returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 yellowBackground text-color packModel removePackageModel" id="remPack-'+data1.id+'" style="font-weight: bolder; display: none;" onclick = "removeModel('+data1.id+')" data-pack=\''+dataPackString+'\' type="button"> REMOVE </button></form></div>';
           returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 yellowBackground text-color packModel bookPackageModel" id="pack-'+data1.id+'" style="font-weight: bolder" onclick = "checkoutPackage(this)" data-pack=\''+dataPackString+'\' type="button"> Book Now</button></form></div>';
           returnPacks+='</div></div></div>';
        });
        $("#packData").append(returnPacks);
     }
  });
        $("#checkServiceLogin").modal('hide');
     }else {
       alert("Invalid OTP");
     // $('#loginWithOTPModal').modal('show');
   }


  });



});

  // In your Javascript (external .js resource or <script> tag)


  /*periodic services select make,model,fuel */

  var makeData = '';
  var fuelsData = '';
  var Brand_id='';
  var Model_id='';
  var Fuel_id='';
  var models='';
  var fuels='';
  var returnPacks='';
  var returnServs='';
  var uniqueIdsArr = [];

  $(document).ready(function () {

      $("#addGarage").click(function(e){
        e.preventDefault();
        // console.log($( "#garageSetStatus option:selected" ).val())

        $garageName = $("#garage-name").val();
        $garageLocation = $("#garage-location").val();
        $garageContactNo = $("#garage-contactNo").val();
        $garageDescription = $("#garage-description").val();
        $mechanicDetails = $("#mechanic-details").val();
        $otherDetails = $("#other-details").val();
        // $garageStatus = $( "#garageSetStatus option:selected" ).val();

        var garageData = {'garage_name': $garageName, 'garage_location': $garageLocation, 'garage_contactNo':$garageContactNo,  'garage_description': $garageDescription, 'mechanic_details': $mechanicDetails, 'other_details': $otherDetails, 'garageStatus':'0' }

        $.ajaxSetup({
            headers: {
               'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });

        $.ajax({
          url:'/addNewGarage',
          type:'post',
          data:{garageData},
          success:function(data){
            alert('Garage added successfully!!!');
            window.location.reload();
          }
        });

      });

      $('.editGarage').click(function(){
        // e.preventDefault();
        $garageName = $(this).attr('garageName');
        $garageLocation = $(this).attr('garageLocation');
        $garageContactNo = $(this).attr('garageContactNo');
        $garageDescription = $(this).attr('garageDescription');
        $mechanicDetails = $(this).attr('mechanicDetails');
        $otherDetails = $(this).attr('otherDetails');
        $status = $(this).attr('status');
        $garageId = $(this).attr('garageId');

        // console.log("Modal Data---"+$(this).attr('status'));
      });

      $( "#garageModal" ).on('show.bs.modal', function(e){
        // console.log("Edit Gargae Moadl")
        $('#update-garage-name').val($garageName);
        $('#update-garage-location').val($garageLocation);
        $('#update-garage-contactNo').val($garageContactNo);
        $('#update-garage-description').val($garageDescription);
        $('#update-mechanic-details').val($mechanicDetails);
        $('#update-other-details').val($otherDetails);
        $('#update-garageSetStatus').val($status);
        $('#garageUpdateId').text($garageId);

      });

      $("#updateGarage").click(function(e){
        e.preventDefault();

        $garageName = $('#update-garage-name').val();
        $garageLocation = $('#update-garage-location').val();
        $garageContactNo = $('#update-garage-contactNo').val();
        $garageDescription = $('#update-garage-description').val();
        $mechanicDetails = $('#update-mechanic-details').val();
        $otherDetails = $('#update-other-details').val();
        $status = $('#update-garageSetStatus').val();
        $garageId = $('#garageUpdateId').text();
        // console.log("Update--"+$garageId);

        $.ajaxSetup({
            headers: {
               'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });

        $.ajax({
            url:'/updateGarages',
            type:'post',
            data:{'garageName':$garageName, 'garageLocation':$garageLocation, 'garageContactNo':$garageContactNo, 'garageDescription':$garageDescription, 'mechanicDetails':$mechanicDetails, 'otherDetails':$otherDetails, 'status':$status, 'garageId':$garageId},
            success:function(data,status,xhr){
              // console.log('DataGarage----'+JSON.stringify(data));
              // console.log("Data--"+JSON.stringify(xhr));
              if(xhr.status==250) {
                alert(xhr.responseText);
              }
              if(xhr.status==200) {
                alert(xhr.responseText);
                window.location.href="/Dashboard/Garage"
              }
            }
        });

      });

      //Code for service modals
      $("body").delegate("#brandSelection", "change", function(event){
        $("#modelSelection").innerHTML = '';
        $('.loader-wrapper').css('display','flex');

        Brand_id = $(this).val();
        $.ajaxSetup({
            headers: {
               'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });
        $.ajax({
          url:'models',
          type:'post',
          data:{Brand_id},
          success:function(data){
            $("#modelSelection").select2("destroy").select2();
            $("#modelSelection").empty();

            makeData = '';
            $("#modelSelection").append('<option></option>');
            $(".fuelSelection").html("");
            fuelsData = '';
            $("#fuelSelection").append('<option></option>');

            $.each(data,function(index,row){
              makeData+="<option id=model-"+row.id+" value="+row.id+">"+row.model_name+"</option>";
            });

            $("#modelSelection").append(makeData);
            $("#modelSelection").select2({minimumResultsForSearch: Infinity});
            $('.loader-wrapper').css('display','none');
          }
        });


      });

       $("body").delegate("#modelSelect", "change", function(event){
                // console.log("Heooo---");
              $('.loader-wrapper').css('display','flex');

               // $("#modelSelect").change(function(event){
                  $("#fuelSelect").innerHTML = '';
                  Model_id = $(this).val();
                  // console.log("heeyyyyyyyy"+Model_id);
                  emptyCart();
                  $.ajaxSetup({
                     headers: {
                        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                     }
                  });

                  $.ajax({
                     url:'fuels',
                     type:'post',
                     data:{Model_id},
                     success:function(data) {
                        // if(typeof $("#fuelSelect").select2() !== 'undefined' ) {
                        //   $("#fuelSelect").select2("destroy").select2();
                        // }
                        $("#fuelSelect").empty();
                        fuelsData = '<option selected hidden>Select Fuel</option>';
                        // $("#fuelSelect").append('<option>Fuel</option>');
                        // $("#fuelSelect").select2({minimumResultsForSearch: Infinity});

                        $.each(data,function(key,value){
                          // console.log("Key---"+key);
                           fuelsData+="<option id='fuel"+key+"' class='fuelsClass' value="+value[0]+">"+value[1]+"</option>";
                        });
                        $("#fuelSelect").html(fuelsData);

                        // $("#fuelSelect").select2({ placeholder: 'Select Fuel',minimumResultsForSearch: Infinity});
                        $('.loader-wrapper').css('display','none');

                      }

                      });
                });





      //Code for brandSelect Dropdwon change.
      $("body").delegate("#brandSelect", "change", function(event){
      // $("#brandSelect").change(function (event) {
     $('.loader-wrapper').css('display','flex');
         // console.log("Brand click---");
         $("#modelSelect").innerHTML = '';
         // alert("You have Selected  :: "+$(this).val());
         Brand_id = $(this).val();
         // console.log("hiiii"+Brand_id);
         emptyCart();
         $.ajaxSetup({
            headers: {
               'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
         });
         $.ajax({
            url:'models',
            type:'post',
            data:{Brand_id},
            success:function(data){
               // $(".modelSelect").html("");
               // $("#modelSelect").select2("destroy").select2();
               $("#modelSelect").empty();
               
               $("#modelSelect").html("");
               makeData = '';
               $("#modelSelect").append('<option selected hidden>Select Model</option>');
               $(".fuelSelect").html("");
               fuelsData = '';
               $("#fuelSelect").append('<option selected hidden>Select Fuel</option>');
               // console.log(data);
               $.each(data,function(index,row){
                  makeData+="<option id=model-"+row.id+" value="+row.id+">"+row.model_name+"</option>";
               });

               $("#modelSelect").append('<option selected hidden>Select Model</option>');
               $("#fuelSelect").append('<option selected hidden>Select Fuel</option>');

               // $("#modelSelect").select2({ placeholder: 'Select Model', minimumResultsForSearch: Infinity});
               $("#modelSelect").append(makeData);
               // $("#modelSelect").select2({ minimumResultsForSearch: Infinity });
                $('.loader-wrapper').css('display','none');

               $("body").delegate("#modelSelect", "change", function(event){
                // console.log("Heooo---");
               // $("#modelSelect").change(function(event){
                  $("#fuelSelect").innerHTML = '';
                  $('.loader-wrapper').css('display','flex');
                  $(".fuelSelect").html("");
                  fuelsData = '';
                  Model_id = $(this).val();
                  // console.log("heeyyyyyyyy"+Model_id);
                  emptyCart();
                  $.ajaxSetup({
                     headers: {
                        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                     }
                  });

                  $.ajax({
                     url:'fuels',
                     type:'post',
                     data:{Model_id},
                     success:function(data) {
                        // if(typeof $("#fuelSelect").select2() !== 'undefined' ) {
                        //   $("#fuelSelect").select2("destroy").select2();
                        // }
                        // $("#fuelSelect").empty();
                        fuelsData = '<option selected hidden>Select Fuel</option>';
                        // $("#fuelSelect").append('<option>Fuel</option>');
                        // $("#fuelSelect").select2({ minimumResultsForSearch: Infinity });

                        // fuelsData = '<option selected hidden>Select Fuel</option>';
                        $.each(data,function(key,value){
                          // console.log("Key---"+key);
                           fuelsData+="<option id='fuel"+key+"' class='fuelsClass' value="+value[0]+">"+value[1]+"</option>";
                        });
                        $("#fuelSelect").html(fuelsData);

                        // $("#fuelSelect").select2({ placeholder: 'Select Fuel', minimumResultsForSearch: Infinity});
                        $('.loader-wrapper').css('display','none');

                        $(".searchPackage").click(function(){
                           if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Brand'){
                      $('#requestMakeError').removeClass('d-none');
                      $("#requestMakeError").html("Select Make");
                      return false;
                    }else{
                      $('#requestMakeError').addClass('d-none');
                    }
                    if($('#modelSelect').val() == "Model" || $('#modelSelect').val() == "") {
                      $('#requestModelError').removeClass('d-none');
                      $('#requestModelError').text("Select Model.");
                      return false;
                    }else {
                      $('#requestModelError').addClass('d-none');
                    }

                    if($('#fuelSelect').val() == "Fuel" || $('#fuelSelect').val() == "") {
                      $('#requestFuelError').removeClass('d-none');
                      $('#requestFuelError').text("Select fuel type.");
                      return false;
                    }else {
                      $('#requestFuelError').addClass('d-none');
                    }
                    if(!$('#mobile1').val() || $('#mobile1').val() == "") {
                      $('#requestMobError').removeClass('d-none');
                      $('#requestMobError').text("Enter Mobile.");
                      return false;
                    }else {
                      $('#requestMobError').addClass('d-none');
                    }
                            emptyCart();
                           $("#packData").innerHTML = '';
                        $('.loader-wrapper').css('display','flex');

                           // Fuel_id = $(this).val();
                           var auth_check = $('#isUserEstimate').val();
                           Fuel_id = $('#fuelSelect').val();
                           var mobile1 = $('#mobile1').val();
                           // console.log("Checkingg searchPackage--"+JSON.stringify($('#fuelSelect').val()));  
                           // console.log('ddddddddddd'+$('#mobile1').val());
                           // console.log('hellooooooooooooo'+$('#isUserEstimate').val());
                           // alert(Brand_id);
                           // alert(Model_id);
                           // alert(Fuel_id);
                           var mobile1 = $('#mobile1').val();
                           $('#outerLeadMobile').html('');
                          if(auth_check == "true"){
                            $.ajaxSetup({
                               headers: {
                                 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                               }
                            });

                          $.ajax({
                           url:'searchPackages',
                           type:'post',
                           data:{'Brand_id':Brand_id,"Model_id":Model_id,"Fuel_id":Fuel_id, "mobile1": mobile1},
                           success:function(data){
                              // console.log("CheckData2---------"+JSON.stringify(data.categories));
                              // console.log(data.categories);
                              $.ajax({
                                 url:'getCartPackages',
                                 type:'get',
                                 data:{Model_id},
                                 success:function(data){
                                    uniqueIdsArr = [... new Set(data.cartIdArr)]
                                    $.each(uniqueIdsArr,function(idx,val){
                                       // console.log("Data----"+JSON.stringify(val));
                                      $('#pack-'+val).html("Added");
                                      $('#pack-'+val).removeClass("bookPackageModel");
                                      $('.bookPackageModel').prop('disabled', true);
                                       $('#pack-'+val).prop('disabled', true);
                                       $('#remPack-'+val).css("display", "block");

                                    });
                                 }
                              });

                              $("#packData").html("");
                              returnPacks = '';
                              returnServs = '';
                              $("#packData").append(returnPacks);

                                        $('.loader-wrapper').css('display','none');
                              $.each(data.categories,function(row,data1){
                                 var abc = JSON.stringify(data1);
                                 var dataPackString = abc.replace('"', '"');
                                 // console.log(dataPackString);
                                 // var xyz = abc.split(" ").join("&").toLowerCase();
                                 // const string4 = new String("A String object");
                                 // console.log(xyz);
                                    // console.log("Val00---"+uniqueIdsArr);
                                 returnPacks+='<div class="col-lg-4 my-2 tooltipContent"><div class="blueButton py-4 px-3" id ="tooltipContent"style="border:1px solid #F5E72E"><div class="row py-2"><div class="col-lg-7 col-6 p-0">';
                                 returnPacks+='<h6 style="font-size: 0.9rem;font-weight: bolder;color:#fff;text-transform:uppercase">'+data1.package_name+'</h6>';
                                 returnPacks+='</div>';
                                 if(data1.discounted_price>0) {
                                      returnPacks+='<div class="col-lg-5 col-6 text-right wordBreak"><h5 style="color:#fff; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 10px;margin-right: 5px; font-size: 1rem;" >₹'+data1.total_price+'</span><span style="font-size: 1rem;">₹'+data1.discounted_price+'</span></h5></div>';
                                  } else {
                                      returnPacks+='<div class="col-lg-5 col-6 text-right wordBreak"><h5 style="color:#fff;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">₹'+data1.total_price+'</h5></div>';
                                  }
                                 returnPacks+='</div>';
                                 // returnPacks+='<h6 style="font-size: 0.8rem; text-transform:uppercase; " class="text-white">'+data1.package_description+'</h6>';
                                 returnPacks+='<h6 style="font-size: 0.8rem;" class="text-white">'+data1.package_description+'</h6>';
                                 // returnPacks+='<ul class="pl-0" ><div class="row">';
                                 // var extraServiceCount = 0;
                                 //  var pacakgeName = JSON.stringify(data1.has_services.length);
                                 //  if(data1.has_services.length>5) {
                                 //    extraServiceCount = data1.has_services.length - 5;
                                 //  }
                                  // console.log("Check services---"+pacakgeName);
                                 //  $.each(data1.has_services,function(ind,dat){
                                 //        if(ind<5) {
                                 //          returnPacks+='<div class="col-lg-6"><span>';
                                 //          returnPacks+='<li style="font-size: 0.8rem; color:#121A7F;">'+dat.service_name+'</li>';
                                 //          returnPacks+='</span></div>';
                                 //          if(ind == 4 && extraServiceCount !== 0 ) {
                                 //              returnPacks+='<div class="loadMore" style=""><a href="javascript:void(0)" class="loadMoreBtn" id="'+data1.package_name+'" style="font-size: 0.8rem;">+'+extraServiceCount+'more </a></div>';
                                 //          }
                                 //        }
                                 //        if(ind >= 5) {
                                 //          returnPacks+='<div class="col-lg-6 '+data1.package_name+'_hidden" style="display:none"><span>';
                                 //          returnPacks+='<li style="font-size: 0.8rem;color:#121A7F;">'+dat.service_name+'</li>';
                                 //          returnPacks+='</span></div>';
                                 //          if(ind == data1.has_services.length-1) {
                                 //              returnPacks+='<div class="hideLoadMore '+data1.package_name+'_hideBtn" style="display:none;"><a href="javascript:void(0)" class="hideLoadMoreBtn" id="'+data1.package_name+'" style="font-size: 0.7rem;"> Hide </a></div>';
                                 //          }
                                 //        }

                                 //  });
                                 // returnPacks+='</div></ul>';
                                 // if(data1.has_services.length>0) {
                                 //    returnPacks+='<ul class="pl-0" ><div class="row tooltip-data">';
                                 //      $.each(data1.has_services,function(ind,dat){
                                 //          returnPacks+='<div class="col-lg-6"><span>';
                                 //          returnPacks+='<li style="font-size: 0.8rem; font-weight:bold; color:#121A7F;">'+dat.service_name+'</li>';
                                 //          returnPacks+='</span></div>';
                                 //      });
                                 //    returnPacks+='</div></ul>';
                                 //  }
                                //  returnPacks+='<div class="row" style="align-items:flex-end;">';
                                //  if(data1.service_time != null){
                                //     returnPacks+='<div class="col-lg-3"><h6 class="bg-white text-color px-3 py-1 m-0 text-center"> '+data1.service_time+' hours </h6></div>';
                                // }else{
                                //     returnPacks+='<div class="col-lg-3"><h6 class="px-3 py-1 m-0 text-center"></h6></div>';
                                // }
                                //  returnPacks+='<div class="col-lg-5"></div>';
                                //  returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 yellowBackground text-color packModel removePackageModel" id="remPack-'+data1.id+'" style="font-weight: bolder; display: none;" onclick = "removeModel('+data1.id+')" data-pack=\''+dataPackString+'\' type="button"> REMOVE </button></form></div>';
                                //  returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 yellowBackground text-color packModel bookPackageModel" id="pack-'+data1.id+'" style="font-weight: bolder" onclick = "checkoutPackage(this)" data-pack=\''+dataPackString+'\' type="button"> Book Now</button></form></div>';
                                //  returnPacks+='</div></div></div>';

                                returnPacks+='<div class="row py-2" style="align-items:flex-end;">';
                                if(data1.service_time != null){
                                    returnPacks+='<div class="col-lg-5"><h6 class="bg-white text-color px-3 py-1 m-0 text-center"> '+data1.service_time+' hours </h6></div>';
                                }else{
                                    returnPacks+='<div class="col-lg-5"><h6 class="px-3 py-1 m-0 text-center"></h6></div>';
                                }
                                returnPacks+='<div class="col-lg-3 col-5"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 yellowBackground text-color packModel removePackageModel" id="remPack-'+data1.id+'" style="font-weight: bolder; display: none;" onclick = "removeModel('+data1.id+')" data-pack=\''+dataPackString+'\' type="button"> REMOVE </button></form></div>'; 
                                returnPacks+='<div class="col-lg-4 col-5"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 yellowBackground text-color packModel bookPackageModel" id="pack-'+data1.id+'" style="font-weight: bolder" onclick = "checkoutPackage(this)" data-pack=\''+dataPackString+'\' type="button">Book Now</button></form></div>';
                                    returnPacks+='</div></div>';
                                var noOfFeatures = data1.has_services.length;
                                console.log("No of features---"+noOfFeatures);
                                        returnPacks+='<ul class="pl-0" ><div class="row tooltip-data">';
                                    if(noOfFeatures > 0) {
                                        $.each(data1.has_services,function(ind,dat){
                                            returnPacks+='<div class="col-lg-6"><span>';
                                            returnPacks+='<li style="font-size: 0.8rem; font-weight:bold; color:#121A7F;">'+dat.service_name+'</li>';
                                            returnPacks+='</span></div>';
                                        });
                                    }
                                        returnPacks+='</div></ul> </div>';

                              });
                              $("#packData").append(returnPacks);
                           }
                        });

                           }else{
                            var mobileNumber = {'mobileNumber':mobile1}
                              $('#outerLeadMobile').append('<input type="text" class="form-control" maxlength="10" name="mobile1" id="mobile1" placeholder="Mobile Number" value="'+mobile1+'" readonly>');
                              $('#outerLeadMobile').append('<input type="hidden" name="Brand_id" id="Brand_id" value="'+Brand_id+'">');
                              $('#outerLeadMobile').append('<input type="hidden" name="Model_id" id="Model_id" value="'+Model_id+'">');
                              $('#outerLeadMobile').append('<input type="hidden" name="Fuel_id" id="Fuel_id" value="'+Fuel_id+'">');
                              $('#outerLeadMobile').append('<input type="hidden" name="authCheck" id="authCheck" value="'+auth_check+'">');

                              // $("#checkServiceLogin").modal('toggle');
                                    $('#checkServiceLogin').modal({
                                    backdrop: 'static',
                                    keyboard: true, 
                                    show: true
                                  }); 

                              $.ajaxSetup({
                                headers: {
                                  'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                                }
                              });
                              // console.log('hello');
                              $.ajax({
                                url: "leadOtp",
                                method: 'post',
                                data: mobileNumber,
                                success:function(data,status,xhr) {
                                  // console.log("OTP Test4---"+JSON.stringify(xhr));
                                  if(xhr.status==200) {
                                    localStorage.setItem("otp", xhr.responseText);
                                    $('.otpText').show();
                                    $('.loginUserBtn').show();
                                    $('.sendOtpBtn').hide();
                                     // Resend OTP Code ---------------------------------------------
                                    $('.resendOtpDiv').removeClass('d-none');
                                    $('.resendOtpText').css('cursor','not-allowed');
                                    $('.resendOtpText').css('pointer-events','none');
                                        // var fiveMinutes = 60 * 1,
                                    var display2 = document.querySelector('#time2');
                                    var timer2 = new CountDownTimer(30);
                                    timer2.onTick(format(display2)).start();
                                    function format(display) {
                                    return function (minutes, seconds) {
                                    minutes = minutes < 10 ? "0" + minutes : minutes;
                                    seconds = seconds < 10 ? "0" + seconds : seconds;
                                    display.textContent = minutes + ':' + seconds;
                                    // console.log("Check---"+seconds);
                                    if(seconds == 0) {
                                      $('.resendOtpTextTimer').addClass('d-none');
                                      $('.resendOtpText').css('pointer-events','auto');
                                      $('.resendOtpText').css('cursor','pointer');
                                    }
                                  };
                                } 
                        // Resend OTP Code Ends ---------------------------------------------
                              }
                              if(xhr.status==250) {
                                swal(xhr.responseText, "", "warning");
                              }
                            },
                            error:function () {
                              // console.log('error');
                            }
                          });
                        }
                          

                     });
                  }
               });
            });
         }
   });
});
//       //Code for brandSelect Dropdwon change.
//       $("body").delegate("#brandUpkeepSelect", "change", function(event){
//       // $("#brandSelect").change(function (event) {
         // console.log("Brand Upkeep click---");
//          $("#modelSelect").innerHTML = '';
//          // alert("You have Selected  :: "+$(this).val());
//          Brand_id = $(this).val();
         // console.log(Brand_id);

//          $.ajaxSetup({
//             headers: {
//                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
//             }
//          });
//          $.ajax({
//             url:'models',
//             type:'post',
//             data:{Brand_id},
//             success:function(data){
//                // $(".modelSelect").html("");
//                $("#modelUpkeepSelect").select2("destroy").select2();
//                $("#modelUpkeepSelect").empty();
               
//                makeData = '';
//                $("#modelUpkeepSelect").append('<option>Model</option>');
//                $(".fuelSelect").html("");
//                fuelsData = '';
//                $("#fuelUpkeepSelect").append('<option>Fuel</option>');
               // console.log("Upkeep"+JSON.stringify(data));
//                $.each(data,function(index,row){
//                   makeData+="<option id=model-"+row.id+" value="+row.id+">"+row.model_name+"</option>";
//                });

//                $("#modelUpkeepSelect").append(makeData);
//                $("#modelUpkeepSelect").select2();

//                $("body").delegate("#modelUpkeepSelect", "change", function(event){
                // console.log("Heooo---");
//                // $("#modelSelect").change(function(event){
//                   $("#fuelUpkeepSelect").innerHTML = '';
//                   Model_id = $(this).val();
                  // console.log(Model_id);
//                   $.ajaxSetup({
//                      headers: {
//                         'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
//                      }
//                   });

//                   $.ajax({
//                      url:'fuels',
//                      type:'post',
//                      data:{Model_id},
//                      success:function(data) {
//                         $("#fuelUpkeepSelect").select2("destroy").select2();
//                         $("#fuelUpkeepSelect").empty();

//                         fuelsData = '<option>Fuel</option>';
//                         $("#fuelUpkeepSelect").append('<option>Fuel</option>');
//                         $.each(data,function(key,value){
                          // console.log("Key---"+key);
//                            fuelsData+="<option id='fuel"+key+"' class='fuelsClass' value="+value[0]+">"+value[1]+"</option>";
//                         });
//                         $("#fuelUpkeepSelect").html(fuelsData);

//                         $("#fuelUpkeepSelect").select2();

//                         $(".searchUpkeepPackage").click(function(){
//                            $("#packData").innerHTML = '';
//                            // Fuel_id = $(this).val();
//                            Fuel_id = $('#fuelUpkeepSelect').val();
                           // console.log("Checkingg searchPackage--"+JSON.stringify($('#fuelSelect').val()));  

//                            // alert(Brand_id);
//                            // alert(Model_id);
//                            // alert(Fuel_id);
//                         $.ajaxSetup({
//                            headers: {
//                              'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
//                            }
//                         });
//                         $.ajax({
//                            url:'searchUpkeepPackages',
//                            type:'post',
//                            data:{'Brand_id':Brand_id,"Model_id":Model_id,"Fuel_id":Fuel_id},
//                            success:function(data){
                              // console.log("CheckData2---------"+JSON.stringify(data.categories));
                              // console.log(data.categories);

//                               $.ajax({
//                                  url:'getCartPackages',
//                                  type:'get',
//                                  data:{Model_id},
//                                  success:function(data){
//                                     uniqueIdsArr = [... new Set(data.cartIdArr)]
//                                     $.each(uniqueIdsArr,function(idx,val){
                                       // console.log("Data----"+JSON.stringify(val));
//                                        $('#pack-'+val).html("Added");
//                                        $('#pack-'+val).prop('disabled', true);
//                                        $('#remPack-'+val).css("display", "block");
//                                     });
//                                  }
//                               });

//                               $("#packData").html("");
//                               returnPacks = '';
//                               returnServs = '';
//                               $("#packData").append(returnPacks);

//                               $.each(data.categories,function(row,data1){
//                                  var abc = JSON.stringify(data1);
//                                  var dataPackString = abc.replace('"', '"');
                                 // console.log(dataPackString);
//                                  // var xyz = abc.split(" ").join("&").toLowerCase();
//                                  // const string4 = new String("A String object");
                                 // console.log(xyz);
                                    // console.log("Val00---"+uniqueIdsArr);
//                                  returnPacks+='<div class="col-lg-6 my-2"><div class="bg-light py-4 px-3"><div class="row"><div class="col-lg-9 p-0">';
//                                  returnPacks+='<h6 style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;text-transform:uppercase">'+data1.package_name+'</h6>';
//                                  returnPacks+='</div>';
//                                  if(data1.discounted_price>0) {
//                                       returnPacks+='<div class="col-lg-3 text-right"><h5 style="color:#121A7F; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 10px;margin-right: 5px; font-size: 1rem;" >₹'+data1.total_price+'</span><span style="font-size: 1rem;">₹'+data1.discounted_price+'</span></h5></div>';
//                                   } else {
//                                       returnPacks+='<div class="col-lg-3 text-right"><h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">₹'+data1.total_price+'</span></h5></div>';
//                                   }
//                                  returnPacks+='</div>';
//                                  returnPacks+='<h6 style="font-size: 0.8rem; text-transform:uppercase; " class="text-warning">'+data1.package_description+'</h6>';
//                                  returnPacks+='<ul class="pl-0" ><div class="row">';
//                                  var extraServiceCount = 0;
//                                   var pacakgeName = JSON.stringify(data1.has_services.length);
//                                   if(data1.has_services.length>5) {
//                                     extraServiceCount = data1.has_services.length - 5;
//                                   }
                                  // console.log("Check services---"+pacakgeName);
//                                   $.each(data1.has_services,function(ind,dat){
//                                         if(ind<5) {
//                                           returnPacks+='<div class="col-lg-6"><span>';
//                                           returnPacks+='<li style="font-size: 0.8rem; color:#121A7F;">'+dat.service_name+'</li>';
//                                           returnPacks+='</span></div>';
//                                           if(ind == 4 && extraServiceCount !== 0 ) {
//                                               returnPacks+='<div class="loadMore" style=""><a href="javascript:void(0)" class="loadMoreBtn" id="'+data1.package_name+'" style="font-size: 0.8rem;">+'+extraServiceCount+'more </a></div>';
//                                           }
//                                         }
//                                         if(ind >= 5) {
//                                           returnPacks+='<div class="col-lg-6 '+data1.package_name+'_hidden" style="display:none"><span>';
//                                           returnPacks+='<li style="font-size: 0.8rem;color:#121A7F;">'+dat.service_name+'</li>';
//                                           returnPacks+='</span></div>';
//                                           if(ind == data1.has_services.length-1) {
//                                               returnPacks+='<div class="hideLoadMore '+data1.package_name+'_hideBtn" style="display:none;"><a href="javascript:void(0)" class="hideLoadMoreBtn" id="'+data1.package_name+'" style="font-size: 0.7rem;"> Hide </a></div>';
//                                           }
//                                         }

//                                   });
//                                  returnPacks+='</div></ul>';
//                                  returnPacks+='<div class="row" style="align-items:flex-end;>';
//                                  returnPacks+='<div class="col-lg-3" style="padding-bottom:8px;"><h6 class="yellowBackground px-3 py-1 m-0 text-center"> '+data1.service_time+' hours </h6></div>';
//                                  returnPacks+='<div class="col-lg-5"></div>';
//                                  returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 blueButton text-light packModel" id="remPack-'+data1.id+'" style="font-weight: bolder; display: none;" onclick = "removeModel('+data1.id+')" data-pack=\''+dataPackString+'\' type="button"> REMOVE </button></form></div>';
//                                  returnPacks+='<div class="col-lg-2"><form class="form-inline my-2 my-lg-0 justify-content-end"><button class="btn my-4 my-sm-2 blueButton text-light packModel" id="pack-'+data1.id+'" style="font-weight: bolder" onclick = "packModel(this)" data-pack=\''+dataPackString+'\' type="button"> BOOK NOW</button></form></div>';
//                                  returnPacks+='</div></div></div>';
//                               });
//                               $("#packData").append(returnPacks);
//                            }
//                         });
//                      });
//                   }
//                });
//             });
//          }
//    });
// });
});



function packModel(obj)
{
  if(AuthUser) {
    // console.log("PackModelTrueeeeee---"+AuthUser);

  }else {
    // alert('You need to login in order to book a package');
    swal({
      title: "You need to login in order to book a package",
      text: "",
      icon: "warning",
      showCancelButton: false,
      confirmButtonColor: '#DD6B55',
      confirmButtonText: 'Okay',
      closeOnConfirm: true,
      closeOnClickOutside: false
    }).then(function(isConfirm) {
      if (isConfirm) {
        window.location.href = '/login';
      }
    });
    return false;
    // window.location.href = '/login';
  }
   var servList = '';
   var id = obj.id;
   var button = document.getElementById(id);
   var dataPack = button.getAttribute('data-pack');
   var abc = JSON.parse(dataPack);
      // var xyz = abc.split("&").join(" ").toLowerCase();
      // console.log(abc);
      jQuery.noConflict();
    // $('#prizePopup').modal('toggle');
    $("#packModel").modal('toggle');
    $('#pack_id').html(abc.id);
    $('#modalPackName').html(abc.package_name.toUpperCase());
    $('#discountedPrice').html(abc.discounted_price);
    $('#totalPrice').html(abc.total_price);
    // console.log("package_name---------"+abc.package_description);
    if(abc.package_description !== null) {
      $('#briefDesc').html(abc.package_description.toUpperCase());
    }
    if(abc.service_time !== null) {
      $('#serviceTime').html(abc.service_time);
    }

    if(abc.discounted_price>0) {
           $('#packageTotalPrice').html(abc.discounted_price);
      } else {
           $('#packageTotalPrice').html(abc.total_price);
      }
    // $('#packageTotalPrice').html(abc.discounted_price);
    packPrice = '';
    if(abc.discounted_price>0) {
      // console.log("Priceeee-------------"+abc.discounted_price);
          $("#packagePrices").html('<div class="col-lg-3 text-right"><h5 style="color:#121A7F; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 0px;margin-right: 5px; font-size: 1rem;" >₹'+abc.total_price+'</span>₹<span id="totalPrice" style="font-size: 1rem;">'+abc.discounted_price+'</span</h5></div>');
      } else {
      // console.log("Priceeee2222222-------------"+abc.discounted_price);

          $("#packagePrices").html('<div class="col-lg-3" style="margin:0px 10px 0px auto;"><h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 0px;margin-right: 5px; font-size: 1rem;">₹<span id="totalPrice" style="font-size: 1rem;">'+abc.total_price+'</span></span></h5></div>');
      }
                                 

    // $.each(abc.has_services,function(key,idx5){
        // console.log(idx5.service_name);

    //     servList+='<div class="col-lg-3 col-md-3 col-sm-3"><span>';
    //     servList+='<li style="font-size: 0.9rem;">'+idx5.service_name+'</li>';
    //     servList+='</span></div>';
    //  });
    // $('#serviceLists').html(servList);
      // $('#allData').html('<input type="hidden" name="alldata" id="alldata" data-all=\''+dataPack+'\'>');  
      // <a id="packModel" style="font-weight: bold;font-size: 18px;color:#121A7F" href="javascript:void(0)" onclick="addNewPackage(this)">ADD PACKAGE</a>    
      $('#NewPack').html('<button type="button" class="btn blueButton text-light"style="font-weight:bold;" onclick="checkoutPackage()">Checkout</button>');
}

// function loadMoreServices(packageName) {
//   // e.preventDefault();
  // console.log("Package Name----"+JSON.stringify(packageName))
// }

$('.signUpBtn').click(function(){
// alert($('#username').val());
  var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  var name = $('#username').val();
  var email = $('#signupemail').val();
  var mobNum = $('#mobile').val();
  var filter = /^\d*(?:\.\d{1,2})?$/;

    if (filter.test(mobNum)) {
      if(mobNum.length==10){

      } else {
          $('.displayError').removeClass('d-none');
          $('.errorList').html('Please put 10 digit mobile number');
          return false;
      }
    }else {
        $('.displayError').removeClass('d-none');
        $('.errorList').html('Enter valid number');
        return false;
      }


      if(!regex.test(email)) {
         // console.log('false');
        $('.displayError').removeClass('d-none');
        $('.errorList').html('Enter Valid Email');
        return false;
      }
      if(name == null || name == '  ' || name == ' ' || !name.trim()){
        // console.log('hi');
        $('.displayError').removeClass('d-none');
        $('.errorList').html('Enter Valid Name');
        return false;
      }
    $('.displayError').addClass('d-none');
  $formData = $("#form").serialize();
  $.ajax({
      url:'checkRegistartionValidation',
      type:'post',
      data: $formData,
      success:function(data,status,xhr){
        // console.log("Errors---"+JSON.stringify(xhr));
        $('#loginWithOTPModal').modal('show');
      },
      error: function(xhr){
          // console.log("Errorsssssss---"+JSON.stringify(xhr.responseJSON));

          if(xhr.responseJSON.errors.confirmpassword) {
            $('.displayError').removeClass('d-none');
            $('.errorList').text(xhr.responseJSON.errors.confirmpassword[0]);
          }
          if(xhr.responseJSON.errors.password) {
            $('.displayError').removeClass('d-none');
            $('.errorList').text(xhr.responseJSON.errors.password[0]);
          }
          if(xhr.responseJSON.errors.mobile) {
            $('.displayError').removeClass('d-none');
            $('.errorList').text(xhr.responseJSON.errors.mobile[0]);
          }
          if(xhr.responseJSON.errors.email) {
            $('.displayError').removeClass('d-none');
            $('.errorList').text(xhr.responseJSON.errors.email[0]);
          } 

      }
    });
});

$('#loginWithOTPModal').on('show.bs.modal', function(e) {
  // console.log("LocalData----"+localStorage.getItem('otp'));
  $enteredNo = $('#form').find('input[name="mobile"]').val();
  $('#mobilenum').val($enteredNo);
});

$('#registerAfterOtpBtn').click(function(e){
  e.preventDefault();
  $formData = $("#form").serialize();
  $storedOTP = localStorage.getItem('otp');
  if($storedOTP == $('#otp').val()) {
    // console.log("formData----"+$formData);
    $.ajax({
      url:'Pages/registerWithOTP',
      type:'post',
      data: $formData,
      success:function(data,status,xhr){
        // console.log("XHR Register Success------------------------"+JSON.stringify(xhr));
        if(xhr.status==200) {
          window.location.href="/";
        }
      }
    });
  }else {
    alert("Invalid OTP");
    // $('#loginWithOTPModal').modal('show');
  }
});

function removeModel(obj){
   // console.log("Remove---"+JSON.stringify(obj));
   // console.log("removed");
   $.ajax({
      url:'removeCartPackages',
      type:'post',
      data:{obj},
      success:function(data){
         // console.log("data0000------"+JSON.stringify(data));
         if(data.responseStatus == 200) {
            $('#pack-'+obj).html("Book Now");
            $('#pack-'+obj).prop('disabled', false);
            $('#remPack-'+obj).css("display", "none");
            $('#pack-'+obj).addClass("bookPackageModel");
            $('.bookPackageModel').prop('disabled', false);

            $.ajax({
              url: "/PServices/getCartCount",
              method: 'POST',
              success: function(response){
                if(response) {
                  $countData =  JSON.parse(response);
                  $count = $countData.count;
                  if($count>0) {
                    $('.outerCheckoutBtnDiv').css('display','block');
                  }else {
                    $('.outerCheckoutBtnDiv').css('display','none');
                  }
                }
              
              }
            });

            $.ajax({
              url: "getCartCount",
              method: 'POST',
              success: function(response){
                if(response) {
                  $countData =  JSON.parse(response);
                  $count = $countData.count;
                  if($count>0) {
                    $('.outerCheckoutBtnDiv').css('display','block');
                  }else {
                    $('.outerCheckoutBtnDiv').css('display','none');
                  }
                }
              
              }
            });

         }
      }
   });
}



   function addNewPackage(){
      // alert('hello');
      var id              = $('#pack_id').text();
      var discountPrice   = $('#packageTotalPrice').text();
      // console.log(id);
      // console.log('+++++++++++++'+discountPrice);
      var data = {package_id: id,package_price:discountPrice};

      $.ajaxSetup({
        headers: {
          'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        },
        error: function(xhr){
          // alert('Request Status: ' + xhr.status + ' Status Text: ' + xhr.statusText + ' ' + xhr.responseText);
          if(xhr.status == 401) {
            alert("You have to login to book services.");
            window.location.href = '/login';
          }
        }
    });
      $.ajax({
        url:'addCart',
        type:'post',
        data:{'package_id': id,'package_price':discountPrice},
        success:function(data){
          // console.log("CratData---"+JSON.stringify(data.pack_id));
          $('#pack-'+data.pack_id).html("Added");
          $('#pack-'+data.pack_id).removeClass("bookPackageModel");
          $('.bookPackageModel').prop('disabled', true);
          $('#pack-'+data.pack_id).prop('disabled', true);
          $('#remPack-'+data.pack_id).css("display", "block");
          $('.outerCheckoutBtnDiv').css('display','block');
          if(data.responseCode == 404) {
            // alert(data.msg);
            $('#signup').modal('show');
          }
        }
       
    });
      $("#packModel").modal('toggle');

   }

   function addNewAddon(addonObj){
      var id = addonObj.id;
      // var button = document.getElementById(id);
      var dataid = addonObj.getAttribute('id');
      var dataprice = addonObj.getAttribute('data-price');
      var datauser = addonObj.getAttribute('data-user');
      var data = {package_id: dataid,package_price:dataprice};
      $.ajaxSetup({
        headers: {
          'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
      });
      $.ajax({
        url:'addNewAddon',
        type:'post',
        data:{'addon_id': dataid,'addon_price':dataprice},
        success:function(data){
          window.location.reload();
          // console.log(JSON.stringify(data));
          // alert(data.msg);
          // window.location.reload();
        }
      });
      if(datauser == "false"){
        window.location.reload();
      }
    $("#addonServ").modal('toggle');
      // window.location.reload();

 }

function deleteFromCart(delId){
  var Cart_id = delId;
  $.ajaxSetup({
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
   });
  $.ajax({
        url:'deleteCartItem',
        type:'post',
        data:{'cartId': Cart_id},
        success:function(data){
          // console.log(JSON.stringify(data));
          onOuterCheckoutClick();
        }
      });
      $.ajax({
        url:'checkCartItem',
        type:'post',
        success:function(data){
          if(data.status == 200){

          }else{
            window.location.reload();
          }
        }
      });


}


function checkCartCount() {
  $.ajax({
    url: "/PServices/getCartCount",
    method: 'POST',
    success: function(response){
        if(response) {
          $countData =  JSON.parse(response);
          $count = $countData.count;
            $('.outerCheckoutBtnDiv').css('display','block');
      console.log("checkCartCount called---------"+$count);
          if($count>0) {
            $('.bookServiceBtn').css('display','block');
          }else {
            $('.bookServiceBtn').css('display','none');
          }
        }
    
    }
  });
}

 var CartPack = '';
 var CartID = '';
 async function checkoutPackage(obj){

   var id = obj.id;
   var button = document.getElementById(id);
   var dataPack = button.getAttribute('data-pack');
  var xyz = JSON.parse(dataPack);
   // var id              = $('#pack_id').text();
   // var packName        = $('#modalPackName').text();
   // var discountPrice   = $('#discountedPrice').text();
   // var packDescription = $('#briefDesc').text();
   // var serviceTime     = $('#serviceTime').text();
   // var packagePrice    = $('#packageTotalPrice').text();
   // var packPrice       = $('#totalPrice').text();
      var id              = xyz.id;
   var packName        = xyz.package_name;
   if(xyz.discounted_price>0) {
    var discountPrice   = xyz.discounted_price;
   } else {
    var discountPrice   = xyz.total_price;
   }
  console.log("discountPrice-----");
  console.log(discountPrice);
   var packDescription = xyz.package_description;
   var serviceTime     = xyz.service_time;
   var packagePrice    = xyz.total_price;
   var packPrice       = xyz.total_price;
   // console.log(id);
   // console.log(packName);
   // console.log(discountPrice);
   // console.log(id);
   // console.log(id);
   // $("#packModel").modal('toggle');

   jQuery.noConflict();
    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
    
    var id              = xyz.id;
    // var discountPrice   = xyz.total_price;
    var data = {package_id: id,package_price:discountPrice};

    $.ajax({
      url:'addCart',
      type:'post',
      data:{'package_id': id,'package_price':discountPrice},
      success:function(data){
        // console.log("CratData---"+JSON.stringify(data.pack_id));
        $('#pack-'+data.pack_id).removeClass("bookPackageModel");
        $('.bookPackageModel').prop('disabled', true);
        $('#pack-'+data.pack_id).html("Added");
        $('#pack-'+data.pack_id).removeClass("bookPackageModel");
        $('.bookPackageModel').prop('disabled', true);
        $('#pack-'+data.pack_id).prop('disabled', true);
        $('#remPack-'+data.pack_id).css("display", "block");
        $.ajax({
          url: "/PServices/getCartCount",
          method: 'POST',
          success: function(response){
              if(response) {
                $countData =  JSON.parse(response);
                $count = $countData.count;
                  $('.outerCheckoutBtnDiv').css('display','block');
            console.log("checkCartCount called---------"+$count);
                if($count>0) {
                  $('.bookServiceBtn').css('display','block');
                }else {
                  $('.bookServiceBtn').css('display','none');
                }
              }
          
          }
        });
        console.log("Count-======="+$count);
        // alert(data.msg);
        // swal(data.msg, "", "success");
      }
    });

    // console.log("Data-----------=="+JSON.stringify(data));

    setTimeout(function(){ 
      $.ajax({
        url:'getCartData',
        type:'post',
        success:function(data){
          $("#checkoutCart").html("");
          CartPack = '';
          // console.log(data.responseCode);
          if(data.responseCode != 400){          
              // alert('Data Found');
              $.each(data.res,function(keyCart,cartData){
                CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+keyCart+'">';
                CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+keyCart+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 1rem;font-weight: bolder;color:#121A7F;padding:0px;">'+cartData.package_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
                CartPack+= '<div class="col-lg-2 col-md-3 col-sm-3 pr-0 text-right d-flex">';

  if(cartData.discounted_price>0) {
                CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style="text-decoration-line: line-through; font-weight: bold;margin-left: 0px; font-size: 1rem;">'+cartData.total_price+'</span>  ₹<span style="font-weight:bold">'+cartData.discounted_price+'</span></h5>';
        } else {
             CartPack+= '<h5  style="color:#121A7F;" class="m-auto">₹<span  style=" font-weight: bold;margin-left: 0px; font-size: 1rem;">'+cartData.total_price+'</span></h5>';
        }
                var packageDescription = "";
                if(cartData.package_description !== null) {
                  packageDescription = cartData.package_description.toUpperCase();
                } else {
                  packageDescription = cartData.package_description;
                }

                CartPack+='<button type="button" class="close deleteFromCart" id="'+cartData.id+'" onclick="deleteFromCart('+cartData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
                CartPack+='<div id="collapseOne'+keyCart+'" class="collapse" aria-labelledby="heading'+keyCart+'" data-parent="#accordion"><div class="card-body">';                   
                CartPack+='<h6 style="font-size: 0.8rem;" class="text-warning">'+packageDescription+'</h6>';
                CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
               //  $.each(cartData.has_services,function(keyServ,cartServ){
               //    CartPack+='<div class="col-lg-6"><span>';
               //    CartPack+='<li style="font-size: 0.9rem;">'+cartServ.service_name+'</li>';
               //    CartPack+='</span></div>';
               // });
                CartPack+=  '</div></div></div></ul>';
                CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
                 if(cartData.service_time != null){
                  returnPacks+='<h6 class="bg-white text-color px-3 py-1 m-0 text-center"> '+cartData.service_time+' hours </h6>';
              }else{
                  returnPacks+='<h6 class="px-3 py-1 m-0 text-center"></h6>';
              }
                CartPack+='</div></div>';
                CartPack+='</div></div></div></div>';
                console.log("Cartdata is-----"+JSON.stringify(cartData));
             });
              $.each(data.addon,function(addonId,addonData){
               // console.log(addonData);
               CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+addonData.id+'">';
               CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+addonData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+addonData.addon_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
               CartPack+= '<div class="col-lg-3  col-md-4 col-sm-4 text-right d-flex pr-0">';
               CartPack+= '<h5  style="color:#121A7F;" class="m-auto">Approx. ₹<span  style="text-decoration-line: line-through; font-weight: 100;margin-left: 0px; font-size: 1rem;">'+addonData.addon_price+'</span></h5>';
               CartPack+='<button type="button" class="close deleteFromCart" id="'+addonData.id+'" onclick="deleteFromCart('+addonData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div></div>';
               CartPack+='<div id="collapseOne'+addonData.id+'" class="collapse" aria-labelledby="heading'+addonData.id+'" data-parent="#accordion"><div class="card-body">';                   
               CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+addonData.addon_description+'</h6>';
               CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
               CartPack+=  '</div></div></div></ul>';
               // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
               // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
               // CartPack+='</div></div>';
               CartPack+='</div></div></div></div>';
            });

              if(data.batteryData !== []) {
                $.each(data.batteryData,function(batteryId,batteryData){
                    CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+batteryData.id+'">';
                     CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+batteryData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+batteryData.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
                     CartPack+= '<div class="col-lg-2 col-md-4 col-sm-4 text-right d-flex pr-0">';
                     CartPack+= '<h5  style="color:#121A7F;" class="m-auto">Approx. ₹<span  style=" font-weight: bold;margin-left: 0px; font-size: 1rem;">'+batteryData.price+'</span></h5>';
                     CartPack+='<button type="button" class="close deleteFromCart" id="'+batteryData.id+'" onclick="deleteFromCart('+batteryData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
                     CartPack+='<div id="collapseOne'+batteryData.id+'" class="collapse" aria-labelledby="heading'+batteryData.id+'" data-parent="#accordion"><div class="card-body">';                   
                     CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+batteryData.part_description+'</h6>';
                     CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
                     CartPack+=  '</div></div></div></ul>';
                     CartPack+='</div></div></div></div>';
                });
              }

              if(data.accPartsData !== []) {

                $.each(data.accPartsData,function(partKey, cartPart){
                  // console.log(cartPart);

                  CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+cartPart.id+'">';
               CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+cartPart.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+cartPart.partName.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
               CartPack+= '<div class="col-lg-2 col-md-4 col-sm-4 text-right d-flex pr-0">';
               CartPack+= '<h5  style="color:#121A7F;" class="m-auto">Approx. ₹<span  style=" font-weight: bold;margin-left: 0px; font-size: 1rem;">'+cartPart.partPrice+'</span></h5>';
               CartPack+='<button type="button" class="close deleteFromCart" id="'+cartPart.id+'" onclick="deleteFromCart('+cartPart.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
               CartPack+='<div id="collapseOne'+cartPart.id+'" class="collapse" aria-labelledby="heading'+cartPart.id+'" data-parent="#accordion"><div class="card-body">';                   
               CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
               CartPack+=  '</div></div></div></ul>';
               // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
               // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
               // CartPack+='</div></div>';
               CartPack+='</div></div></div></div>';
                });
              }
              if(data.acData !== []) {
              $.each(data.acData,function(acId,acData){
               // console.log(acData);
              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+acData.id+'">';
               CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+acData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+acData.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
               CartPack+= '<div class="col-lg-2 col-md-4 col-sm-4 text-right d-flex pr-0">';
               CartPack+= '<h5  style="color:#121A7F;" class="m-auto">Approx. ₹<span  style=" font-weight: bold;margin-left: 0px; font-size: 1rem;">'+acData.price+'</span></h5>';
               CartPack+='<button type="button" class="close deleteFromCart" id="'+acData.id+'" onclick="deleteFromCart('+acData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
               CartPack+='<div id="collapseOne'+acData.id+'" class="collapse" aria-labelledby="heading'+acData.id+'" data-parent="#accordion"><div class="card-body">';                   
               CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
               CartPack+=  '</div></div></div></ul>';
               // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
               // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
               // CartPack+='</div></div>';
               CartPack+='</div></div></div></div>';
            });
          }
          if(data.mechData !== []) {
            $.each(data.mechData,function(mechKey, mechCheck){
            // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.acCheck);
              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+mechCheck.id+'">';
               CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+mechCheck.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+mechCheck.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
               CartPack+= '<div class="col-lg-2 col-md-4 col-sm-4 text-right d-flex pr-0">';
               CartPack+= '<h5  style="color:#121A7F;" class="m-auto">Approx. ₹<span  style=" font-weight: bold;margin-left: 0px; font-size: 1rem;">'+mechCheck.price+'</span></h5>';
               CartPack+='<button type="button" class="close deleteFromCart" id="'+mechCheck.id+'" onclick="deleteFromCart('+mechCheck.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
               CartPack+='<div id="collapseOne'+mechCheck.id+'" class="collapse" aria-labelledby="heading'+mechCheck.id+'" data-parent="#accordion"><div class="card-body">';                   
               CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
               CartPack+=  '</div></div></div></ul>';
               // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
               // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
               // CartPack+='</div></div>';
               CartPack+='</div></div></div></div>';
          });
        }
        if(data.upData !== []) {
          $.each(data.upData,function(upKey, upCheck){
            // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.upCheck);
            CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+upCheck.id+'">';
            CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+upCheck.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+upCheck.part_name.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
            CartPack+= '<div class="col-lg-3  col-md-4 col-sm-4 text-right d-flex pr-0">';
            CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+upCheck.price+'</h5>';
            CartPack+='<button type="button" class="close deleteFromCart" id="'+upCheck.id+'" onclick="deleteFromCart('+upCheck.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>';
            CartPack+='<div id="collapseOne'+upCheck.id+'" class="collapse" aria-labelledby="heading'+upCheck.id+'" data-parent="#accordion"><div class="card-body">';                   
            CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+upCheck.part_description+'</h6>';
            CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
            CartPack+=  '</div></div></div></ul>';
            // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
            // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
            // CartPack+='</div></div>';
            CartPack+='</div></div></div></div>';
          });
        }

         $.each(data.MemData,function(keyMem,cartMem){
              var packageDescription = "";
              if(cartMem.package_name !== null) {
                packageDescription = cartMem.package_name.toUpperCase();
              } else {
                packageDescription = cartMem.package_name;
              }

              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+keyMem+'">';
              CartPack+=  '<button class="btn btn-link CartButton collapsed p-0" data-toggle="collapse" data-target="#collapseOne'+keyMem+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+packageDescription+'<i class="fas fa-caret-down ml-1"></i></button>';
              // CartPack+= '<div class="col-lg-3 text-right d-flex">';
              if(cartMem.discounted_price>0) {
                                      CartPack+='<div class="col-lg-4 col-md-4 col-sm-4 text-right pr-0"><h5 style="color:#121A7F; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 10px;margin-right: 5px; font-size: 1rem;" >₹'+cartMem.total_price+'</span><span style="font-size: 1rem;">₹'+cartMem.discounted_price+'</span><button type="button" class="close deleteFromCart" id="'+cartMem.id+'" onclick="deleteFromCart('+cartMem.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5></div>';
                                  } else {
                                      CartPack+='<div class="col-lg-3  col-md-4 col-sm-4 text-right pr-0"><h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">₹'+cartMem.total_price+'<button type="button" class="close deleteFromCart" style="margin-top:-3px" id="'+cartMem.id+'" onclick="deleteFromCart('+cartMem.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5></div>';
                                  }
              CartPack+= '</div></div></div>';

              var packageDescription = "";
              if(cartMem.package_description !== null) {
                packageDescription = cartMem.package_description.toUpperCase();
              } else {
                packageDescription = cartMem.package_description;
              }

              CartPack+='<div id="collapseOne'+keyMem+'" class="collapse" aria-labelledby="heading'+keyMem+'" data-parent="#accordion"><div class="card-body">';                   
              CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+packageDescription+'</h6>';
              CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
              CartPack+=  '</div></div></div></ul>';
              // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
              // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
              // CartPack+='</div></div>';
              CartPack+='</div></div></div></div>';
           });

           }
           else
           {
              CartPack+='<div><h5>Cart is Empty. Please add packages to Cart.</h5></div>';
              // console.log(id);
              // console.log(discountPrice)
              // CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="headingOne">';
              // CartPack+=  '<button class="btn btn-link CartButton" data-toggle="collapse" data-target="#collapseOne'+id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+packName+'</button>';
              // CartPack+= '<div class="col-lg-3 text-right">';
              // CartPack+= '<h5  style="color:#121A7F;">$<span  style="text-decoration-line: line-through; font-weight: 100;margin-left: 0px; font-size: 1rem;">'+packPrice+'</span>  $<span>'+discountPrice+'</span></h5>';
              // CartPack+='</div></div>';
              // CartPack+='<div id="collapseOne'+id+'" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion"><div class="card-body">';                   
              // CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+packDescription+'</h6>';
              // CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';

              // CartPack+='<div class="col-lg-6"><span>';
              // CartPack+='<li style="font-size: 0.7rem;"></li>';
              // CartPack+='</span></div>';

              // CartPack+=  '</div></div></div></ul>';
              // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
              // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >'+serviceTime+'</span> hours </h6>';
              // CartPack+='</div></div>';
              // CartPack+='</div></div></div></div>';
           }
           $('#checkoutCart').append(CartPack);
           $('#deletePack').append(CartID);
        }
     });
    }, 500);

    // $("#addNewPack").modal('show');
     $('#addNewPack').modal({
                backdrop: 'static',
                keyboard: true, 
                show: true
              });
  
  // setTimeout(function(){ $("#addNewPack").modal('show'); }, 600);


}

// Disable body scrolling on checkout modal
$("#payment").on('hide.bs.modal', function(e) {
  $('.modal-backdrop').css('display','none');
}).on('hidden', function(){
    $('body').css('overflow', 'auto');
});

$("#payment").on('show.bs.modal', function(e) {
  $('body').css('overflow', 'hidden');
});

$('.bookingsAssignGarageBtn').on('click',function(e) {
  console.log("bookingsAssignGarageBtn clicked----"+$(this).html());
  $orderId = $(this).attr('data-bookingId');
  $('.assignService').attr("orderId",$orderId);
  
  if($(this).html() == "Unassign") {

    $orderIdd = $(this).attr('data-bookingid');
    // var orderId= $(this).attr('data-bookingId');
    console.log('orferId----'+$orderIdd);
    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $.ajax({
        url: "/Dashboard/unassignGarage",
        method: 'POST',
        data:{'orderId':$orderIdd},
        success: function(data,status,xhr){
          if(xhr.status==250) {
            alert(xhr.responseText);
          }
          if(xhr.status==200) {
            alert(xhr.responseText);
            window.location.href="/Dashboard/Bookings"
          }
        }
      }); 
  }
});

function checkoutMembershipPackage(packId) {
  // console.log($('#isUserEstimate').val());
  // console.log($('#mobile1').val());
  $auth = $('#isUserEstimate').val();
  $brandId = $('#MemBrandSelect').val();
  $modelId = $('#MemModelSelect').val();
  $fuelId = $('#MemFuelSelect').val();
  if(!$('#MemBrandSelect').val() || $('#MemBrandSelect').val() == 'Select Make'){
      $('#brandError').removeClass('d-none');
      $("#brandError").html("Select Make");
      return false;
    }else{
      $('#brandError').addClass('d-none');
    }
    if($('#MemModelSelect').val() == "Model" || $('#MemModelSelect').val() == "") {
      $('#modelError').removeClass('d-none');
      $('#modelError').text("Select Model.");
      return false;
    }else {
      $('#modelError').addClass('d-none');
    }

    if($('#MemFuelSelect').val() == "Fuel" || $('#MemFuelSelect').val() == "") {
      $('#fuelError').removeClass('d-none');
      $('#fuelError').text("Select fuel type.");
      // alert($('#accidentalQuery').val());
      return false;
    } else {
    $('#fuelError').addClass('d-none');
    $('#brandError').addClass('d-none');
    $('#modelError').addClass('d-none');

    // console.log("packId---"+JSON.stringify($fuelId));

  if ($auth == "true") {
    $.ajax({
        url:'addMemPackToCart',
        type:'post',
        data: { "packId" : packId, 'brandId':$brandId , 'modelId':$modelId, 'fuelId':$fuelId },
        success:function(data){
          // console.log("Data---"+JSON.stringify(data));
          if(data.status == true) {
            $.ajax({
              url:'checkoutPage',
              type:'post',
              success:function(data){
                $.each(data.mobile,function(checkoutKey,checkoutData){
                  // console.log(checkoutData.mobile);
                  $('#mobileBlock').html('<input type="tel" name="mobileVerification" maxlength="10" id="mobileVerification" value="'+checkoutData.mobile+'" class="form-control" disabled>');
                });
                $.each(data,function(sumKey,sumData){

                  var total_amt = data.sum - data.applied_points;
                  if(data.applied_points>0 && data.sum>=data.minimumAmtForReward){
                    $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+total_amt+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
                    $('#rewardPoint').html('<input type="checkbox" name="rewardPoints" class="rewardPoints" id="rewardPoints" value="'+data.applied_points+'" checked> Use MyCarMech money (Max '+ data.max_reward_point_to_apply+' MyCarMech money can be used. You have <b>'+ data.total_points +' MyCarMech money available. </b>)');

                    $('.codBtn').addClass("customDisabled");
                    // $('.codBtn').css("pointer-events","none");
                    // $('.codBtn').css("opacity",0.5);
                  }else{
                     $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+data.sum+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
                    // $('#rewardPoint').html('<input type="checkbox" value="true" disabled> You have <b>'+ data.applied_points+'</b> reward points.');
                  }

                  console.log('sumData---'+JSON.stringify(sumData));

                // $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+data.sum+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
                });

                $('#packageCheckout').html("");
                checkpackData = '';
                $('#packageCheckout').append(checkpackData);
                // console.log("Checlkout Data----hiii"+JSON.stringify(data.MemData));  
                $.each(data.cartData,function(cartKey, cartCheck){
                  // console.log(cartCheck);
                  checkpackData += '<div class="col-lg-6 col-6 p-0">';
                  checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
                  checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartCheck.package_name.toUpperCase()+'</h6>';
                  checkpackData += '</div>';
                  checkpackData += '<div class="col-lg-6 col-6 p-0">';
                  // checkpackData += '<h6 class="text-right m-0">$<span>'+cartCheck.discounted_price+'</span</h6>';
                  if(cartCheck.discounted_price>0) {
                    checkpackData += '<h6 class="text-right m-0" style="font-weight:bold;color:#121A7F;">₹<span>'+cartCheck.discounted_price+'</span</h6>';
                  } else {
                    checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartCheck.total_price+'</span</h6>';
                  }

                  // var packageDescription = "";
                  // if(cartCheck.package_description !== null) {
                  //   packageDescription = cartCheck.package_description.toUpperCase();
                  // } else {
                  //   packageDescription = cartCheck.package_description;
                  // }

                  checkpackData += '</div>';
                  checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
                  // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
                  // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+packageDescription+'" </p>';
                  // checkpackData += '<hr class="final-payment-line">';
                  // checkpackData += '</div>';
                });
                if(data.MemData !== []) {

                $.each(data.MemData,function(kayMem, cartMem){
                  // console.log("hi"+cartMem);
                  checkpackData += '<div class="col-lg-6 col-6 p-0">';
                  checkpackData += '<input type="hidden" name="pid" value="'+cartMem.id+'">';
                  checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartMem.package_name.toUpperCase()+'</h6>';
                  checkpackData += '</div>';
                  checkpackData += '<div class="col-lg-6 col-6 p-0">';
                  // checkpackData += '<h6 class="text-right m-0">$<span>'+cartCheck.discounted_price+'</span</h6>';
                  if(cartMem.discounted_price>0) {
                    checkpackData += '<h6 class="text-right m-0" style="font-weight:bold;color:#121A7F;">₹<span>'+cartMem.discounted_price+'</span</h6>';
                  } else {
                    checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartMem.total_price+'</span</h6>';
                  }

                  // var packageDescription = "";
                  // if(cartMem.package_description !== null) {
                  //   packageDescription = cartMem.package_description.toUpperCase();
                  // } else {
                  //   packageDescription = cartMem.package_description;
                  // }

                  // checkpackData += '</div>';
                  // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
                  // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+packageDescription+'" </p>';
                  checkpackData += '<hr class="final-payment-line">';
                  checkpackData += '</div>';
                });
              }

                if(data.batteryTyrePartsData.batteryTyreData !== []) {
                  $.each(data.batteryTyrePartsData.batteryTyreData,function(cartKey, cartCheck){
                    // console.log("Checkout Final cartCheck---"+JSON.stringify(cartKey));
                    checkpackData += '<div class="col-lg-6 col-6 p-0">';
                    checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
                    checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartCheck.part_name.toUpperCase()+'&nbsp(x'+data.batteryTyrePartsData.partsQty[cartKey]+')</h6>';
                    checkpackData += '</div>';
                    checkpackData += '<div class="col-lg-6 col-6 p-0">';
                    
                    checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+cartCheck.price+'</span</h6>';
                    checkpackData += '</div>';
                    checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
                    // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+cartCheck.part_description.toUpperCase()+'" </p>';
                    checkpackData += '<hr class="final-payment-line">';
                    checkpackData += '</div>';
                  });
                }

                if(data.accPartsData !== []) {
                  // console.log("Checlkout accPartsData----"+JSON.stringify(data));  
                  $.each(data.accPartsData,function(partKey, cartPart){
                    // console.log(cartPart);
                    checkpackData += '<div class="col-lg-6 col-6 p-0">';
                    // checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
                    checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartPart.partName.toUpperCase()+'</h6>';
                    checkpackData += '</div>';
                    checkpackData += '<div class="col-lg-6 col-6 p-0">';
                    // checkpackData += '<h6 class="text-right m-0">$<span>'+cartPart.discounted_price+'</span</h6>';
                    
                    checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+cartPart.partPrice+'</span</h6>';
                    checkpackData += '</div>';
                    checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
                    checkpackData += '<hr class="final-payment-line">';
                    checkpackData += '</div>';
                  });
                }

                $('#packageCheckout').append(checkpackData);
              }
            });
            $("#membershipModal").modal('hide');

            // $("#payment").modal('show');
            $('#payment').modal({
                backdrop: 'static',
                keyboard: true, 
                show: true
              });
          } else if(data.status == false) {
            // console.log("Checlkout Data----"+JSON.stringify(data));  
            swal({
                title: data.msg,
                text: "",
                icon: "warning",
                showCancelButton: false,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Okay',
                closeOnConfirm: true,
                closeOnClickOutside: false
            }).then(function(isConfirm) {
              if (isConfirm) {

                }
            });
          }
          
        }
      });
    }  /* if_end */
    else{
      // console.log('heeyyyyyyyyyyyyyy'+packId);
      $('.hideData').html('');
      $('.hideData').append('<input type="hidden" id="packId" name="packId" value="'+packId+'" >');
      $('.hideData').append('<input type="hidden" id="brandId" name="brandId" value="'+$brandId+'" >');
      $('.hideData').append('<input type="hidden" id="modelId" name="modelId" value="'+$modelId+'" >');
      $('.hideData').append('<input type="hidden" id="fuelId" name="fuelId" value="'+$fuelId+'" >');

            $("#membershipModal").modal('hide');
      // alert('auth is not login');
       $('#accLogin').modal({
        backdrop: 'static',
        keyboard: true, 
        show: true
      });
       // swal({
       //          title: "Not Logged In",
       //          text: "Please Login to get membership Package",
       //          icon: "warning",
       //          showCancelButton: false,
       //          confirmButtonColor: '#DD6B55',
       //          confirmButtonText: 'Okay',
       //          closeOnConfirm: true,
       //          closeOnClickOutside: false
       //      }).then(function(isConfirm) {
       //        if (isConfirm) {
       //          window.location.href = '/login';
       //          }
       //      });
    }
  }

  // alert("hello");
}
// $('.promocodeBtn').click(function(){
//   console.log("On promo clic----");
//   console.log($('#promo').val());
//   if($('#promo').val() != null || !$('#promo').val()){
//     $('#promoCodeError').removeClass('d-none');
//       $("#promoCodeError").html("Please Enter Promocode");
//       return false;
//     }else{
//       $('#promoCodeError').addClass('d-none');
//     }
// });

$('#membershipPackageCheck').click(function(){
  // alert('hekk');
    var packId = $('#packId').val();
    var brandId = $('#brandId').val();
    var modelId = $('#modelId').val();
    var fuelId = $('#fuelId').val();
    var mobile1 = $('#mobile1').val();
    var OTP = $('#otpVal').val()
    // console.log("aaaaaaaaaaaaa=>"+mobile1);
    // console.log($('#membeshipLoginForm').serialize());

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    $storedOTP = localStorage.getItem('otp');
      // console.log($storedOTP);
      if($storedOTP == OTP) {
        // console.log("formData----");
        $.ajax({
        url:'addMemPackToCartLoginCheck',
        type:'post',
        data: $('#membeshipLoginForm').serialize(),
        success:function(data,status,xhr){
          $('#accLogin').modal('hide');
          swal({
                title: "Logged In Successfully",
                text: " Membership Package added into Cart please check it.",
                icon: "success",
                showCancelButton: false,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Okay',
                closeOnConfirm: true,
                closeOnClickOutside: false
              }).then(function(isConfirm) {
                if (isConfirm) {
                  window.location.reload();
                }
              });
           
        }
       });
     }else {
       alert("Invalid OTP");
     // $('#loginWithOTPModal').modal('show');
   }


});
function hideBatteryModal(data) {
  $("#batteryTyreModal").modal('hide');
  $('.modal-backdrop').css('display','none');
  
}

$(document).on('change', '#rewardPoints', function (e) {
  var isChecked = $('#rewardPoints:checkbox:checked').length > 0;
  var isCouponAppliedAmount =  $('.newTotalAmount').html();
  var couponAmt = $('#couponAmt').val();
  console.log("couponAmt---------"+couponAmt);

  $.ajaxSetup({
     headers: {
       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
  });

  $.ajax({
    url:'checkoutPage',
    type:'post',
    success:function(data){

        
        if(couponAmt !== "" ) {
          var updatedAmt = isCouponAppliedAmount - data.applied_points;
          // $('.newTotalAmount').html('');
          if(isChecked == true) {
            $('.newTotalAmount').html(updatedAmt);
            $('.codBtn').addClass('customDisabled');
          } else {
            $('.newTotalAmount').html(parseInt(isCouponAppliedAmount)+parseInt(data.applied_points));
            $('.codBtn').removeClass('customDisabled');
          }
        }else {
          console.log("Custom Disabled-----"+isChecked);
          var total_amt = data.sum - data.applied_points;
          if(isChecked == true) {
            $('.codBtn').addClass('customDisabled');
            $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+total_amt+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
            $('#rewardPoint').html('<input type="checkbox" name="rewardPoints" class="rewardPoints" id="rewardPoints" value="'+data.applied_points+'" checked> Use MyCarMech money (Max '+ data.max_reward_point_to_apply+' MyCarMech money can be used. You have <b>'+ data.total_points +' MyCarMech money available.</b> )');
          }else {
            $('.codBtn').removeClass('customDisabled');
            $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+data.sum+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
          }
        }


          // var total_amt = data.sum - data.applied_points;
          // if(isChecked == true) {
          //   $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+total_amt+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
          //   $('#rewardPoint').html('<input type="checkbox" name="rewardPoints" class="rewardPoints" id="rewardPoints" value="'+data.applied_points+'" checked> Apply Reward Points (Max '+ data.max_reward_point_to_apply+' reward points can be applied. You have '+ data.total_points +' reward points available. )');
          // }else {
          //   $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+data.sum+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
          // }
    }
  });
});

function checkout(){
  var checkpackData = '';
  var finalAmount = 0;
  $("#addNewPack").modal('hide');
  $("#batteryTyreModal").modal('hide');

  // jQuery.noConflict();
  $.ajaxSetup({
     headers: {
       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
 });
  $.ajax({
    url:'checkoutPage',
    type:'post',
    success:function(data){
      // console.log(data);
      $.each(data.mobile,function(checkoutKey,checkoutData){
        // console.log(checkoutData.mobile);
        $('#mobileBlock').html('<input type="tel" name="mobileVerification" maxlength="10" id="mobileVerification" value="'+checkoutData.mobile+'" class="form-control"  disabled>');
      });
  
        console.log("data-sum----------"+data.sum);
        console.log("data-minimumAmtForReward----------"+data.minimumAmtForReward);

        var total_amt = data.sum - data.applied_points;
        if(data.applied_points>0 && data.sum>=data.minimumAmtForReward){
          $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify; display:flex;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+total_amt+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
          $('#rewardPoint').html('<input type="checkbox" name="rewardPoints" class="rewardPoints" id="rewardPoints" value="'+data.applied_points+'" checked> Use MyCarMech money (Max '+ data.max_reward_point_to_apply+' MyCarMech money can be used. You have <b>'+ data.total_points +' MyCarMech money available. </b>)');

          $('.codBtn').addClass("customDisabled");
          // $('.codBtn').css("pointer-events","none");
          // $('.codBtn').css("opacity",0.5);
        }else{
           $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+data.sum+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');
          // $('#rewardPoint').html('<input type="checkbox" value="true" disabled> You have <b>'+ data.applied_points+'</b> reward points.');
        }

      // $('#finalAmount').html('<h6 class="m-0 py-2 text-right text-dark" style="font-weight:bold;font-size:25px;text-align-last:justify;" ><span>TOTAL &nbsp;&nbsp;&nbsp;</span>₹<span class="totalAmount"> '+data.sum+'</span><span class="d-none pl-2 newTotalAmount"></span></h6>');

      $('#packageCheckout').html("");
      checkpackData = '';
      $('#packageCheckout').append(checkpackData);
      $.each(data.cartData,function(cartKey, cartCheck){

        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
        checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartCheck.package_name.toUpperCase()+'</h6>';
        checkpackData += '</div>';
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        // checkpackData += '<h6 class="text-right m-0">$<span>'+cartCheck.discounted_price+'</span</h6>';
        if(cartCheck.discounted_price>0) {
          checkpackData += '<h6 class="text-right m-0" style="font-weight:bold;color:#121A7F;">₹<span>'+cartCheck.discounted_price+'</span</h6>';
        } else {
          checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartCheck.total_price+'</span</h6>';
        }

        // var packageDescription = "";
        // if(cartCheck.package_description !== null) {
        //   packageDescription = cartCheck.package_description.toUpperCase();
        // } else {
        //   packageDescription = cartCheck.package_description;
        // }
        checkpackData += '</div>';
        checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
        // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
        // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+packageDescription+'" </p>';
        // checkpackData += '</div>';
      });
      $.each(data.MemData,function(cartMem, cartMem){
        // console.log(cartMem);
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<input type="hidden" name="pid" value="'+cartMem.id+'">';
        checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartMem.package_name.toUpperCase()+'</h6>';
        checkpackData += '</div>';
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        if(cartMem.discounted_price>0) {
          checkpackData += '<h6 class="text-right m-0" style="font-weight:bold;color:#121A7F;">₹<span>'+cartMem.discounted_price+'</span</h6>';
        } else {
          checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartMem.total_price+'</span</h6>';
        }
        checkpackData += '</div>';
        checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
      });


      if(data.batteryTyrePartsData.batteryTyreData !== []) {
        $.each(data.batteryTyrePartsData.batteryTyreData,function(cartKey, cartCheck){
          // console.log("Checkout Final cartCheck---"+JSON.stringify(cartKey));
          checkpackData += '<div class="col-lg-6 col-6 p-0">';
          checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
          checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartCheck.part_name.toUpperCase()+'&nbsp(x'+data.batteryTyrePartsData.partsQty[cartKey]+')</h6>';
          checkpackData += '</div>';
          checkpackData += '<div class="col-lg-6 col-6 p-0">';
          
          checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+cartCheck.price+'</span</h6>';
          checkpackData += '</div>';
          // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
          // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+cartCheck.part_description.toUpperCase()+'" </p>';
          // checkpackData += '</div>';
          checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
        });
      }

      if(data.accPartsData !== []) {
        // console.log("Checlkout accPartsData----"+JSON.stringify(data));  
        $.each(data.accPartsData,function(partKey, cartPart){
          // console.log(cartPart);
          checkpackData += '<div class="col-lg-6 col-6 p-0">';
          // checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
          checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartPart.partName.toUpperCase()+'</h6>';
          checkpackData += '</div>';
          checkpackData += '<div class="col-lg-6 col-6 p-0">';
          // checkpackData += '<h6 class="text-right m-0">$<span>'+cartPart.discounted_price+'</span</h6>';
          
          checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+cartPart.partPrice+'</span</h6>';
          checkpackData += '</div>';
          // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
          // checkpackData += '</div>';
          checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
        });
      }
      if(data.addonData !== []) {
      $.each(data.addonData,function(addonKey, addonCheck){
        // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.addonCheck);
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<input type="hidden" name="aid" value="'+addonCheck.id+'">';
        checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+addonCheck.addon_name+'</h6>';
        checkpackData += '</div>';
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+addonCheck.addon_price+'</span</h6>';
        checkpackData += '</div>';
        // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
        // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+addonCheck.addon_description+'" </p>';
        // checkpackData += '</div>';
        checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
      });
    }

      if(data.acData !== []) {
      $.each(data.acData,function(acKey, acCheck){
        // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.acCheck);
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<input type="hidden" name="aid" value="'+acCheck.id+'">';
        checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+acCheck.part_name+'</h6>';
        checkpackData += '</div>';
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+acCheck.price+'</span</h6>';
        checkpackData += '</div>';
        // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
        // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+acCheck.part_description+'" </p>';
        // checkpackData += '</div>';
        checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
      });
    }
    if(data.mechData !== []) {
      $.each(data.mechData,function(mechKey, mechCheck){
        // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.acCheck);
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<input type="hidden" name="aid" value="'+mechCheck.id+'">';
        checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+mechCheck.part_name+'</h6>';
        checkpackData += '</div>';
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+mechCheck.price+'</span</h6>';
        checkpackData += '</div>';
        // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
        // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+mechCheck.part_description+'" </p>';
        // checkpackData += '</div>';
        checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
      });
    }
    if(data.upData !== []) {
      $.each(data.upData,function(upKey, upCheck){
        // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.upCheck);
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<input type="hidden" name="aid" value="'+upCheck.id+'">';
        checkpackData += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+upCheck.part_name+'</h6>';
        checkpackData += '</div>';
        checkpackData += '<div class="col-lg-6 col-6 p-0">';
        checkpackData += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">Approx. ₹<span>'+upCheck.price+'</span</h6>';
        checkpackData += '</div>';
        // checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
        // checkpackData += '<p type="text" class="text-warning" style="font-size:10px;margin-bottom:0.5rem;margin-top:0.5rem;">'+upCheck.part_description+'" </p>';
        // checkpackData += '</div>';
        checkpackData += '<hr class="final-payment-line mb-4 col-lg-12 p-0">';
      });
    }
      $('#packageCheckout').append(checkpackData);
      $('.close').addClass('closePackage');
    }
  });

  // $("#payment").modal('show');
  $('#payment').modal({
        backdrop: 'static',
        keyboard: true, 
        show: true
      });
}

var callRazorPayScript = function(amount,mobile,email,name) {
  var merchangeName = "SWAPNA NITIN GAJBHIYE",
  img = "/images/loginImg.png",
  description = "Purchase Description",
  amount = amount*100;
  // console.log("email--"+email);
  console.log("amount is===========>"+amount);

  loadExternalScript('https://checkout.razorpay.com/v1/checkout.js').then(function() { 
    var options = {
      key: 'rzp_test_L2iZfynSaUyYe0',
      protocol: 'https',
      hostname: 'api.razorpay.com',
      amount: amount.toFixed(2),
      name: name,
      image: img,
      email:email,
      prefill: {
        "contact": mobile,
        "email": email,
        "name"  : name,
      },
      theme: {
        color: '#f7ce46'
      },
      handler: function (transaction, response){
        // console.log('Tshirt\\ntransaction id: ' + transaction.razorpay_payment_id);
        // console.log('ResponseRazorpay-------'+JSON.stringify(transaction));
        if(transaction.razorpay_payment_id) {
          jQuery.noConflict();
          $.ajaxSetup({
            headers: {
             'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
          });

          $('#payment').css('z-index',1); 
          $('#accCheckout').css('z-index',1);

          $('.loader-wrapper').css('display','flex');
          $('.modal-backdrop.show').css('opacity','0');
                 

          var formdata= {'data':$("#registerSubmit").serialize(), 'transactionId':transaction.razorpay_payment_id,'email': email }
           
          $.ajax({
            url:'onlineCheckout',
            type:'post',
            data: formdata,
            success:function(data){
              $('.outerCheckoutBtnDiv').css('display','none');
              // console.log("OrderPlaceData--"+data);
              // swal({
              //   title: "Order Placed Successfully!!!",
              //   text: "",
              //   icon: "success",
              //   showCancelButton: false,
              //   confirmButtonColor: '#DD6B55',
              //   confirmButtonText: 'Okay',
              //   closeOnConfirm: true,
              //   closeOnClickOutside: false
              // }).then(function(isConfirm) {
              //   if (isConfirm) {
              //   }
              // });
              $('.loader-wrapper').css('display','none');
              swal({
                title: "Confirmed",
                text: "Thank you for choosing MyCarMech. You will receive Service Center details by SMS and/or mail shortly.",
                icon: "success",
                showCancelButton: false,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Okay',
                closeOnConfirm: true,
                closeOnClickOutside: false
              }).then(function(isConfirm) {
                  window.location.href = '/';
                
              });
            }
          });
        }
      }
    };
    window.rzpay = new Razorpay(options);
    // console.log('Item Id: ', amount);
    rzpay.open();
  })
}

$('.online').click(function(){
  var amount = $('.totalAmount').text();
  var mobile = $('#mobileVerification').val();
  var email = $('#hiddenEmail').val();
  payment_option = 'online';
  // console.log('clicked online');
  $(".online").css({"background-color":'#f7ce46', "font-weight":'bold', "border-color":'#fff', "color":'#fff'});
  $(".garage").css({"border-color":'#343a40', "color":'#000', "background-color":'transparent', "font-weight":'unset'});
  // callRazorPayScript(amount,mobile,email);
})

payment_option  = '';

function Online(){
  // console.log('online');
  payment_option = 'online';
  $(".online").css({"background-color":'#f7ce46', "font-weight":'bold', "border-color":'#fff', "color":'#fff'});
  $(".garage").css({"border-color":'#343a40', "color":'#000', "background-color":'transparent', "font-weight":'unset'});
}

function Garage(){
   // console.log('garage');
   payment_option = 'garage';
   // console.log('clicked offline');
   $(".garage").css({"background-color":'#f7ce46', "font-weight":'bold', "border-color":'#fff', "color":'#fff'});
   $(".online").css({"border-color":'#343a40', "color":'#000', "background-color":'transparent', "font-weight":'unset'});

}

function onOuterCheckoutClick() {
  // alert("hello");
  // console.log("onOuterCheckoutClicked-------");
  $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
  //   $.ajax({
  //     url:'checkoutPage',
  //     type:'post',
  //     success:function(data){
        // console.log(data);
  //       $.each(data.mobile,function(checkoutKey,checkoutData){
          // console.log(checkoutData.mobile);
  //         $('#mobileBlock').html('<input type="tel" name="mobileVerification" id="mobileVerification" value="'+checkoutData.mobile+'" class="form-control" disabled>');
  //       });
  //       $.each(data,function(sumKey,sumData){
          // console.log(sumData);
  //         $('#finalAmount').html('<h6 class="m-0 py-2 text-right" >TOTAL &nbsp;&nbsp;&nbsp;$<span> '+sumData+'</span></h6>');
  //       });

  //       $('#packageCheckout').html("");
  //       checkpackData = '';
  //       $('#packageCheckout').append(checkpackData);
  //       $.each(data.cartData,function(cartKey, cartCheck){
          // console.log(cartCheck);
  //         checkpackData += '<div class="col-lg-6 p-0">';
  //         checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
  //         checkpackData += '<h6 class="m-0">'+cartCheck.package_name+'</h6>';
  //         checkpackData += '</div>';
  //         checkpackData += '<div class="col-lg-6 p-0">';
  //         checkpackData += '<h6 class="text-right m-0">$<span>'+cartCheck.discounted_price+'</span</h6>';
  //         checkpackData += '</div>';
  //         checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
  //         checkpackData += '<input type="text" class="form-control text-warning" value="'+cartCheck.package_description+'" disabled>';
  //         checkpackData += '</div>';
  //       });
  //       $('#packageCheckout').append(checkpackData);
  //     }
  //   });


    $.ajax({
      url:'getCartData',
      type:'post',
      success:function(data){
        $("#checkoutCart").html("");
        CartPack = '';
        // console.log("response Code"+data);
        if(data.responseCode != 400 ){          
            // alert('Data Found');

            $.each(data.res,function(keyCart,cartData){
              var packageDescription = "";
              if(cartData.package_name !== null) {
                packageDescription = cartData.package_name.toUpperCase();
              } else {
                packageDescription = cartData.package_name;
              }

              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+keyCart+'">';
              CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+keyCart+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+packageDescription+'<i class="fas fa-caret-down ml-1"></i></button>';
              // CartPack+= '<div class="col-lg-3 text-right d-flex">';
              if(cartData.discounted_price>0) {
                                      CartPack+='<div class="col-lg-4 col-md-4 col-sm-4 text-right"><h5 style="color:#121A7F; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 10px;margin-right: 5px; font-size: 1rem;" >₹'+cartData.total_price+'</span><span style="font-size: 1rem;">₹'+cartData.discounted_price+'</span><button type="button" class="close deleteFromCart" id="'+cartData.id+'" onclick="deleteFromCart('+cartData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5></div>';
                                  } else {
                                      CartPack+='<div class="col-lg-3  col-md-4 col-sm-4 text-right"><h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">₹'+cartData.total_price+'<button type="button" class="close deleteFromCart" style="margin-top:-3px" id="'+cartData.id+'" onclick="deleteFromCart('+cartData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5></div>';
                                  }
              CartPack+= '</div></div></div>';

              var packageDescription = "";
              if(cartData.package_description !== null) {
                packageDescription = cartData.package_description.toUpperCase();
              } else {
                packageDescription = cartData.package_description;
              }

              CartPack+='<div id="collapseOne'+keyCart+'" class="collapse" aria-labelledby="heading'+keyCart+'" data-parent="#accordion"><div class="card-body">';                   
              CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+packageDescription+'</h6>';
              CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
             //  $.each(cartData.has_services,function(keyServ,cartServ){
             //    CartPack+='<div class="col-lg-6"><span>';
             //    CartPack+='<li style="font-size: 0.7rem;">'+cartServ.service_name+'</li>';
             //    CartPack+='</span></div>';
             // });
              CartPack+=  '</div></div></div></ul>';
              // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
              // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
              // CartPack+='</div></div>';
              CartPack+='</div></div></div></div>';
           });
            $.each(data.MemData,function(keyMem,cartMem){
              var packageDescription = "";
              if(cartMem.package_name !== null) {
                packageDescription = cartMem.package_name.toUpperCase();
              } else {
                packageDescription = cartMem.package_name;
              }

              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+keyMem+'">';
              CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+keyMem+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+packageDescription+'<i class="fas fa-caret-down ml-1"></i></button>';
              // CartPack+= '<div class="col-lg-3 text-right d-flex">';
              if(cartMem.discounted_price>0) {
                                      CartPack+='<div class="col-lg-4 col-md-4 col-sm-4 text-right"><h5 style="color:#121A7F; font-weight: 1000;"><span class="discontedPrice" style="text-decoration-line: line-through; margin-left: 10px;margin-right: 5px; font-size: 1rem;" >₹'+cartMem.total_price+'</span><span style="font-size: 1rem;">₹'+cartMem.discounted_price+'</span><button type="button" class="close deleteFromCart" id="'+cartMem.id+'" onclick="deleteFromCart('+cartMem.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5></div>';
                                  } else {
                                      CartPack+='<div class="col-lg-3  col-md-4 col-sm-4 text-right"><h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">₹'+cartMem.total_price+'<button type="button" class="close deleteFromCart" style="margin-top:-3px" id="'+cartMem.id+'" onclick="deleteFromCart('+cartMem.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5></div>';
                                  }
              CartPack+= '</div></div></div>';

              var packageDescription = "";
              if(cartMem.package_description !== null) {
                packageDescription = cartMem.package_description.toUpperCase();
              } else {
                packageDescription = cartMem.package_description;
              }

              CartPack+='<div id="collapseOne'+keyMem+'" class="collapse" aria-labelledby="heading'+keyMem+'" data-parent="#accordion"><div class="card-body">';                   
              CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+packageDescription+'</h6>';
              CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
             //  $.each(cartData.has_services,function(keyServ,cartServ){
             //    CartPack+='<div class="col-lg-6"><span>';
             //    CartPack+='<li style="font-size: 0.7rem;">'+cartServ.service_name+'</li>';
             //    CartPack+='</span></div>';
             // });
              CartPack+=  '</div></div></div></ul>';
              // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
              // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
              // CartPack+='</div></div>';
              CartPack+='</div></div></div></div>';
           });
            $.each(data.addon,function(addonId,addonData){
             // console.log(addonData);
             CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+addonData.id+'">';
             CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+addonData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+addonData.addon_name+'<i class="fas fa-caret-down ml-1"></i></button>';
             CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
             CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+addonData.addon_price+'<button type="button" class="close deleteFromCart" id="'+addonData.id+'" onclick="deleteFromCart('+addonData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5>';
             CartPack+='</div></div>';
             CartPack+='<div id="collapseOne'+addonData.id+'" class="collapse" aria-labelledby="heading'+addonData.id+'" data-parent="#accordion"><div class="card-body">';                   
             CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+addonData.addon_description+'</h6>';
             CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
             CartPack+=  '</div></div></div></ul>';
             // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
             // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
             // CartPack+='</div></div>';
             CartPack+='</div></div></div></div>';
          });
            $.each(data.acData,function(acId,acData){
             // console.log(acData);
             CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+acData.id+'">';
             CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+acData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+acData.part_name+'<i class="fas fa-caret-down ml-1"></i></button>';
             CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
             CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+acData.price+'<button type="button" class="close deleteFromCart" id="'+acData.id+'" onclick="deleteFromCart('+acData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5>';
             CartPack+='</div></div>';
             CartPack+='<div id="collapseOne'+acData.id+'" class="collapse" aria-labelledby="heading'+acData.id+'" data-parent="#accordion"><div class="card-body">';                   
             // CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+acData.addon_description+'</h6>';
             CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
             CartPack+=  '</div></div></div></ul>';
             // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
             // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
             // CartPack+='</div></div>';
             CartPack+='</div></div></div></div>';
          });

          if(data.batteryData !== []) {
            $.each(data.batteryData,function(batteryId,batteryData){
                CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+batteryData.id+'">';
                 CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+batteryData.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+batteryData.part_name+'<i class="fas fa-caret-down ml-1"></i></button>';
                 CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
                 CartPack+= '<h5  style="color:#121A7F;" class="m-auto"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;display:flex; align-items:baseline;">Approx. ₹'+batteryData.price+'<button type="button" class="close deleteFromCart" id="'+batteryData.id+'" onclick="deleteFromCart('+batteryData.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5>';
                 CartPack+='</div></div>';
                 CartPack+='<div id="collapseOne'+batteryData.id+'" class="collapse" aria-labelledby="heading'+batteryData.id+'" data-parent="#accordion"><div class="card-body">';                   
                 CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+batteryData.part_description+'</h6>';
                 CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
                 CartPack+=  '</div></div></div></ul>';
                 CartPack+='</div></div></div></div>';
            });
          }

          if(data.accPartsData !== []) {
            // console.log("Checlkout accPartsData----"+JSON.stringify(data));  
            $.each(data.accPartsData,function(partKey, cartPart){
              // console.log("mmmmmmmmnnnnnnnnn"+cartPart.id);
              // CartPack += '<div class="col-lg-12 pt-2" style="display:flex; flex-direction:row; padding-left:20px;">';
              // CartPack += '<div class="col-lg-6 p-0" style="padding-left:20px;">';
              // // CartPack += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
              // CartPack += '<h6 class="m-0" style="font-weight:bold;color:#121A7F;">'+cartPart.partName.toUpperCase()+'</h6>';
              // CartPack += '</div>';
              // CartPack += '<div class="col-lg-6 p-0">';
              // // CartPack += '<h6 class="text-right m-0">$<span>'+cartPart.discounted_price+'</span</h6>';
              // CartPack += '<h6 class="text-right m-0"  style="font-weight:bold;color:#121A7F;">₹<span>'+cartPart.partPrice+'</span</h6>';
              // CartPack += '</div>';
              // CartPack += '</div>';
              // CartPack += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
              // CartPack += '<hr class="final-payment-line">';
              // CartPack += '</div>';
              CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+cartPart.id+'">';
             CartPack+=  '<button class="btn btn-link CartButton accPartData" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+cartPart.partName.toUpperCase()+'<i class="fas fa-caret-down ml-1"></i></button>';
             CartPack+= '<div class="col-lg-3 text-right" style="display:flex; align-items:center;justify-content:flex-end;">';
             CartPack+= '<h5 style="color:#121A7F;margin-bottom:0px;""><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;display:flex; align-items:baseline;">Approx. ₹'+cartPart.partPrice+'<button type="button" class="close deleteFromCart" id="'+cartPart.id+'" onclick="deleteFromCart('+cartPart.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5>';
             CartPack+='</div></div>';
             CartPack+='</div></div></div></div>';
            });
          }
          if(data.mechData !== []) {
      $.each(data.mechData,function(mechKey, mechCheck){
        // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.acCheck);
        CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+mechCheck.id+'">';
        CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+mechCheck.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+mechCheck.part_name+'<i class="fas fa-caret-down ml-1"></i></button>';
        CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
        CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+mechCheck.price+'<button type="button" class="close deleteFromCart" id="'+mechCheck.id+'" onclick="deleteFromCart('+mechCheck.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5>';
        CartPack+='</div></div>';
        CartPack+='<div id="collapseOne'+mechCheck.id+'" class="collapse" aria-labelledby="heading'+mechCheck.id+'" data-parent="#accordion"><div class="card-body">';                   
        CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+mechCheck.part_description+'</h6>';
        CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
        CartPack+=  '</div></div></div></ul>';
        // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
        // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
        // CartPack+='</div></div>';
        CartPack+='</div></div></div></div>';
      });
    }
    if(data.upData !== []) {
      $.each(data.upData,function(upKey, upCheck){
        // console.log('aaaaaaaaaaaaaaaaaaaaaaa'+data.upCheck);
        CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="heading'+upCheck.id+'">';
        CartPack+=  '<button class="btn btn-link CartButton collapsed" data-toggle="collapse" data-target="#collapseOne'+upCheck.id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+upCheck.part_name+'<i class="fas fa-caret-down ml-1"></i></button>';
        CartPack+= '<div class="col-lg-3 col-md-4 col-sm-4 text-right">';
        CartPack+= '<h5 style="color:#121A7F;"><span style="font-weight: 1000;margin-left: 10px;margin-right: 5px; font-size: 1rem;">Approx. ₹'+upCheck.price+'<button type="button" class="close deleteFromCart" id="'+upCheck.id+'" onclick="deleteFromCart('+upCheck.id+')" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5>';
        CartPack+='</div></div>';
        CartPack+='<div id="collapseOne'+upCheck.id+'" class="collapse" aria-labelledby="heading'+upCheck.id+'" data-parent="#accordion"><div class="card-body">';                   
        CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+upCheck.part_description+'</h6>';
        CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';
        CartPack+=  '</div></div></div></ul>';
        // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
        // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >2</span> hours </h6>';
        // CartPack+='</div></div>';
        CartPack+='</div></div></div></div>';
      });
    }

         }
         else
         {
            CartPack+='<div><h5>Cart is Empty. Please add packages to Cart.</h5></div>';
            // console.log(id);
            // console.log(discountPrice)
            // CartPack+='<div id="accordion" class="my-1"><div class="card"><div class="card-header d-flex justify-content-between" id="headingOne">';
            // CartPack+=  '<button class="btn btn-link CartButton" data-toggle="collapse" data-target="#collapseOne'+id+'" aria-expanded="false" aria-controls="collapseOne" style="font-size: 0.9rem;font-weight: bolder;color:#121A7F;">'+packName+'</button>';
            // CartPack+= '<div class="col-lg-3 text-right">';
            // CartPack+= '<h5  style="color:#121A7F;">$<span  style="text-decoration-line: line-through; font-weight: 100;margin-left: 0px; font-size: 1rem;">'+packPrice+'</span>  $<span>'+discountPrice+'</span></h5>';
            // CartPack+='</div></div>';
            // CartPack+='<div id="collapseOne'+id+'" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion"><div class="card-body">';                   
            // CartPack+='<h6 style="font-size: 0.7rem;" class="text-warning">'+packDescription+'</h6>';
            // CartPack+='<ul class="pl-0"><div class="row"><div class="col-lg-11"><div class="row" >';

            // CartPack+='<div class="col-lg-6"><span>';
            // CartPack+='<li style="font-size: 0.7rem;"></li>';
            // CartPack+='</span></div>';

            // CartPack+=  '</div></div></div></ul>';
            // CartPack+='<div class="row align-items-center"><div class="col-lg-2">';
            // CartPack+='<h6 class="bg-dark px-3 py-1 m-0 text-center text-light" style="font-size: 14px;"><span >'+serviceTime+'</span> hours </h6>';
            // CartPack+='</div></div>';
            // CartPack+='</div></div></div></div>';
         }
         $('#checkoutCart').append(CartPack);
         $('#deletePack').append(CartID);
      }
    });
    // $("#addNewPack").modal('show');
    $('#addNewPack').modal({
                backdrop: 'static',
                keyboard: true, 
                show: true
              });
}

$(document).ready(function(){
  $(".AddonServices").click(function(e){
    e.preventDefault();
    var Addon_id = $(this).attr("id");

    $.ajaxSetup({
      headers: {
       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
    $.ajax({
      url:'AddonModelData',
      type:'post',
      data: { "id" : Addon_id },
      success:function(data){
        $.each(data.Add_Data,function(add_id,add_data){
          $('#addonServTitle').html('<h5 class="modal-title text-uppercase text-light">'+add_data.addon_name+'</h5>');
          $('#addonServDesc').html('<p> <span class="font-weight-bold" style="font-size:18px;">Description :</span> '+add_data.addon_description+'</p>');
          $('#addonServPrice').html('<p> <span class="font-weight-bold" style="font-size:18px;">Price :</span> ₹ '+add_data.addon_price+'</p>');
          $('#model-button').html('<button type="button" class="btn blueButton text-light font-weight-bold px-5" id="'+add_data.id+'" data-price="'+add_data.addon_price+'" data-user="true" onclick="addNewAddon(this)">Add to Cart</button>');

        });
      }
    });
    // $("#addonServ").modal('toggle');
    $('#addonServ').modal({
                backdrop: 'static',
                keyboard: true, 
                show: true
              });
  });

  $(".AddNewUser").click(function(e){
    e.preventDefault();
      var AddId= $(this).attr('data-addId');
      // console.log(AddId);
      $('#addonIds').html('<input type="hidden" value="'+AddId+'" id="add_id" data-id="'+AddId+'" name="hiddenAddonId">');
      // $("#authLogin").modal('toggle');
      $('#authLogin').modal({
                backdrop: 'static',
                keyboard: true, 
                show: true
              });

  });

  $('.otpText').hide();
  $('.loginUserBtn').hide();
  $('.otp-block').hide();
  $('.login-btn').hide();


  $('#AuthOtp').click(function(){
     var mobNum = $('#authMobile').val()
        var filter = /^\d*(?:\.\d{1,2})?$/;

          if (filter.test(mobNum)) {
            if(mobNum.length==10){
                  // alert("valid");
             } else {
              swal({
                  title: "",
                  text: "Please put 10  digit mobile number",
                  type: "warning",
                  showCancelButton: true,
                  confirmButtonColor: '#121A7F',
                  confirmButtonText: 'Close',
                  cancelButtonText: "Close",
                  closeOnConfirm: false,
                  closeOnCancel: false
               });
                return false;
              }
            }
            else {
              swal({
                  title: "",
                  text: "Not a valid number",
                  type: "warning",
                  showCancelButton: true,
                  confirmButtonColor: '#121A7F',
                  confirmButtonText: 'Close',
                  cancelButtonText: "Close",
                  closeOnConfirm: false,
                  closeOnCancel: false
               });
              return false;
           }
    // console.log('hiiii');
    // console.log(mobile);
    var mobileNumber = {'mobileNumber': $('#authMobile').val()}
        $("#authMobile").prop("readonly", true);
        // console.log('abce'+$('#authMobile').val());
    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
    // console.log('hello');
    $.ajax({
      url: "leadOtp",
      method: 'post',
      data: mobileNumber,
      success:function(data,status,xhr) {
        // console.log("OTP Test5---"+JSON.stringify(xhr));
        if(xhr.status==200) {
          localStorage.setItem("otp", xhr.responseText);
            $('.otpText').show();
            $('.loginUserBtn').show();
            $('.sendOtpBtn').hide();
          // Resend OTP Code ---------------------------------------------
      
          $('.resendOtpDiv').removeClass('d-none');
          $('.resendOtpText').css('cursor','not-allowed');
          $('.resendOtpText').css('pointer-events','none');
           // var fiveMinutes = 60 * 1,
          var display2 = document.querySelector('#time3');
          var timer2 = new CountDownTimer(30);
          timer2.onTick(format(display2)).start();
          function format(display) {
            return function (minutes, seconds) {
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              display.textContent = minutes + ':' + seconds;
             // console.log("Check---"+seconds);
              if(seconds == 0) {
                $('.resendOtpTextTimer').addClass('d-none');
                $('.resendOtpText').css('pointer-events','auto');
                $('.resendOtpText').css('cursor','pointer');
              }
            };
          } 

                // Resend OTP Code Ends ---------------------------------------------
        }
        if(xhr.status==250) {
          swal(xhr.responseText, "", "warning");
        }
      },
      error:function () {
        // console.log('error');
      }
    });
  });
// $(".nav-item .nav-link").click(function () {
//         alert('hi');
//        $(".nav-item.active .nav-link").removeClass("active");
//        $(this).addClass("active");
//        return false;
//    });
// $(document).on('click', '.nav-item a', function (e) {
//         $(this).parent().addClass('active').siblings().removeClass('active');
//     });
  $('#aLogin').click(function(e){
      e.preventDefault();
    if(!$('#mOtp').val()){
      $('#requestOtpError').removeClass('d-none');
      document.getElementById("div2").innerHTML="Enter OTP";
      return false;
    } 

    var mobileNumber = {'mobileNumber': $('#authMobile').val(), 'otp' : $('#mOtp').val(), 'a_Id' : $('#add_id').val()}
    var mobile = $('#authMobile').val();
    var OTP = $('#mOtp').val()
    // console.log(mobile);
    // console.log(OTP);
    
    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
    $storedOTP = localStorage.getItem('otp');
      // console.log($storedOTP);
      if($storedOTP == OTP) {
        // console.log("formData----");
        $.ajax({
        url:'AddonLead',
        type:'post',
        data: mobileNumber,
        success:function(data,status,xhr){
        $("#authLogin").modal('toggle');
        if (data.status == true) {
            $.ajaxSetup({
              headers: {
               'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
              }
          });
        $.ajax({
          url:'AddonModelData',
          type:'post',
          data: { "id" : data.a_id },
          success:function(data){
            $.each(data.Add_Data,function(add_id,add_data){
              // $('#addonServ').addClass("addServ");
              $('#addonServTitle').html('<h5 class="modal-title text-uppercase text-light">'+add_data.addon_name+'</h5>');              $('#addonServDesc').html('<p> <span class="font-weight-bold" style="font-size:18px;">Description :</span> '+add_data.addon_description+'</p>');
              $('#addonServPrice').html('<p> <span class="font-weight-bold" style="font-size:18px;">Price :</span> ₹ '+add_data.addon_price+'</p>');
               $('#model-button').html('<button type="button" class="btn blueButton text-light font-weight-bold px-5" id="'+add_data.id+'" data-price="'+add_data.addon_price+'" data-user="false" onclick="addNewAddon(this)">Add Addon</button>');
               $('.close').addClass('closePackage');
               // $(button)

            });
          }
        });
        // window.location.reload();
        // $("#addonServ").modal('toggle');
        $('#addonServ').modal({
                backdrop: 'static',
                keyboard: true, 
                show: true
              });

          }
           
        }
       });
     }else {
       alert("Invalid OTP");
     // $('#loginWithOTPModal').modal('show');
   }
    // console.log(mobileNumber);
  });


  $('.contactSubmit').click(function(){
    var name =  $('#name').val();
    var message = $('#message').val();
    var mobileNo = $('#number').val();

    // console.log("Check0"+!name.trim());

    if (!$('#name').val()) {
      $('#requestNameError').removeClass('d-none');
      $("#requestNameError").html("Enter Name");
      return false;
    }else if(name.length == 0 || !name.trim()) {
      $('#requestNameError').removeClass('d-none');
      $("#requestNameError").html("Enter A Valid Name");
      return false;
    }else{
      $("#requestNameError").html("");
    }

    if (!$('#number').val()) {
      $('#requestMobileError').removeClass('d-none');
      $("#requestMobileError").html("Enter Mobile Number");
      return false;
    }else if(mobileNo.length >10 || mobileNo.length <7) {
      $('#requestMobileError').removeClass('d-none');
      $("#requestMobileError").html("Enter A Valid Mobile Number");
      return false;
    }else{
      $("#requestMobileError").html("");
    }
    if (!$('#message').val()) {
      $('#requestMessageError').removeClass('d-none');
      $("#requestMessageError").html("Enter Message");
      return false;
    }else if(message.length == 0 || !message.trim()) {

      $('#requestMessageError').removeClass('d-none');
      $("#requestMessageError").html("Enter A Valid Message");
      return false;
    }else{
      $("#requestMessageError").html("");
    }

      $('#requestNameError').addClass('d-none');
      $('#requestNumberError').addClass('d-none');
      $('#requestMessageError').addClass('d-none');

        $('.contactSubmit').html('Sending..');

        /* Submit form data using ajax*/
        $.ajax({
          url: "contactMail",
          method: 'post',
          data: $('#contact-form').serialize(),
          success: function(response){
            //------------------------
            $('#request_submit').html('Submit');
            $('#res_message').show();
            $('#res_message').html(response.msg);
            $('#msg_div').removeClass('d-none');

            document.getElementById("contact-form").reset(); 
            $('.contactSubmit').html('Send');

            setTimeout(function(){
               $('#res_message').hide();
               $('#msg_div').hide();
            },8000);
            //--------------------------
          }
        });

  });
  
//   $('.addServ').on('hidden.bs.modal', function () {
//     $('#addonServ').removeClass("addServ");
//     location.reload();
// })


  // $('#outerCheckoutBtn').click(function(){
  //   $.ajaxSetup({
  //     headers: {
  //       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  //     }
  //   });
  //   $.ajax({
  //     url:'checkoutPage',
  //     type:'post',
  //     success:function(data){
        // console.log(data);
  //       $.each(data.mobile,function(checkoutKey,checkoutData){
          // console.log(checkoutData.mobile);
  //         $('#mobileBlock').html('<input type="tel" name="mobileVerification" id="mobileVerification" value="'+checkoutData.mobile+'" class="form-control" disabled>');
  //       });
  //       $.each(data,function(sumKey,sumData){
          // console.log(sumData);
  //         $('#finalAmount').html('<h6 class="m-0 py-2 text-right" >TOTAL &nbsp;&nbsp;&nbsp;$<span> '+sumData+'</span></h6>');
  //       });

  //       $('#packageCheckout').html("");
  //       checkpackData = '';
  //       $('#packageCheckout').append(checkpackData);
  //       $.each(data.cartData,function(cartKey, cartCheck){
          // console.log(cartCheck);
  //         checkpackData += '<div class="col-lg-6 p-0">';
  //         checkpackData += '<input type="hidden" name="pid" value="'+cartCheck.id+'">';
  //         checkpackData += '<h6 class="m-0">'+cartCheck.package_name+'</h6>';
  //         checkpackData += '</div>';
  //         checkpackData += '<div class="col-lg-6 p-0">';
  //         checkpackData += '<h6 class="text-right m-0">$<span>'+cartCheck.discounted_price+'</span</h6>';
  //         checkpackData += '</div>';
  //         checkpackData += '<div class="form-group mb-4 briefDescription col-lg-12 p-0">';
  //         checkpackData += '<input type="text" class="form-control text-warning" value="'+cartCheck.package_description+'" disabled>';
  //         checkpackData += '</div>';
  //       });
  //       $('#packageCheckout').append(checkpackData);
  //     }
  //   });
  //   $("#payment").modal('show');
  // });

  $("#finalCheck").click(function(){
   jQuery.noConflict();

    if(!$('#pickupDate').val()){
      $('#pickupdate').removeClass('d-none');
      $("#pickupdate").html("Enter Date");
      return false;
    }else{
      $("#pickupdate").html("");
    }

    if(!$('#pickupTime').val()){
      $('#pickuptime').removeClass('d-none');
      $("#pickuptime").html("Enter Time");
      return false;
    }else{
      $("#pickuptime").html(""); 
    }
    if(!$('#carNumber').val()){
      $('#carNumberErr').removeClass('d-none');
      $("#carNumberErr").html("Enter Car Number");
      return false;
    }else{
      $("#carNumberErr").html(""); 
    }

    if(!$('#location').val()){
      $('#pickuplocation').removeClass('d-none');
      $("#pickuplocation").html("Enter Location");
      return false;
    }else{
      $("#pickuplocation").html("");
    }

    if(payment_option == 'online'){
      $("#paymentType").html("");
      // alert(payment_option);
      onlineCheckout();
    }else if(payment_option == 'garage'){
      $("#paymentType").html("");    
      offlineCheckout();
    }else{
      $('#paymentType').removeClass('d-none');
      $("#paymentType").html("please select payment type");
      return false;
    // alert('please select payment option.');
    }
  });
});

$(document).on("click", "a.loadMoreBtn" , function() {
  var classSelected = $(this).attr('id')+'_hidden';
  var hideBtnClass = $(this).attr('id')+'_hideBtn';
  $("."+classSelected).css('display','block');
  $("."+hideBtnClass).css('display','block');
  $(this).css('display','none');
    // $(this).parent().remove();
});

$(document).on("click", "a.hideLoadMoreBtn" , function() {
  var classSelected = $(this).attr('id')+'_hidden';
  var hideBtnClass = $(this).attr('id')+'_hideBtn';
  var selectedId= $(this).attr('id');
  $("."+classSelected).css('display','none');
  $("."+hideBtnClass).css('display','none');
  $("#"+selectedId).css('display','block');
  // $(this).css('display','block');
  // console.log("Hellooo----");
});

$('#accountEditBtn').click(function(e) {
  e.preventDefault();
  // if($('#accountEditBtn').text()=='Edit') {
    $('#inputUsername').attr('disabled',false);
    $('#inputMobile').attr('readonly',true);
    $('#inputEmail').attr('disabled',false);
    $('#inputAddress').attr('disabled',false);
    $('.editmode .form-control').css('background-color','#fff');
    $('.editmode .form-control').css('color','#000 !important');
    $('#accountSaveBtn').removeClass("d-none");
    $('#accountEditBtn').addClass("d-none");
  // } else {
    // $('#inputUsername').attr('disabled',true);
    // $('#inputMobile').attr('disabled',true);
    // $('#inputEmail').attr('disabled',true);
    // $('#inputAddress').attr('disabled',true);
    
  // }
});

$('#accountSaveBtn').click(function(e) {
  e.preventDefault();

  var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
  var emailValidation = emailReg.test($('#inputEmail').val());

  var name =  $('#inputUsername').val();
  var address =  $('#inputAddress').val();

  // console.log("emailValidation--------"+address);


  if($('#inputEmail').val() !=="" && emailValidation == true && name.length>0 && address.length>0 && name.trim() && address.trim()) {
    $.ajax({
      url: "/updateAccount",
      method: 'POST',
      data: $("#accountForm").serialize(),
      success: function(data,status,xhr){
        if(xhr.status==250) {
          swal(xhr.responseText,'','warning');
          // alert(xhr.responseText);
        }
        if(xhr.status==200) {
          // swal(xhr.responseText,'','success');
          swal({
            title: xhr.responseText,
            text: "",
            icon: "success",
            showCancelButton: false,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'Okay',
            closeOnConfirm: true,
            closeOnClickOutside: false
          }).then(function(isConfirm) {
             // window.location.href="/account";
              $('#inputUsername').attr('disabled',true);
              $('#inputMobile').attr('readonly',true);
              $('#inputEmail').attr('disabled',true);
              $('#inputAddress').attr('disabled',true);
              $('.editmode .form-control').css('background-color','#121A7F');
              $('.editmode .form-control').css('color','#fff !important');
              $('#accountEditBtn').removeClass("d-none");
              $('#accountSaveBtn').addClass("d-none");
          });

          // window.location.href="/account";
        }
      }
    }); 

  }else {
  // console.log("else EMail------");

    if($('#inputEmail').val() ==""){
      swal('Invalid Email', "", "warning");
    }else if(emailValidation==false) {
      swal('Invalid Email', "", "warning");
    } else if(!name.trim() || name.length ==0) {
      swal('Enter valid username', "", "warning");
    } else if(!address.trim() || address.length ==0) {
      swal('Enter valid address', "", "warning");
    } else {

    }
  }



  // $('#inputUsername').attr('disabled',true);
  // $('#inputMobile').attr('readonly',true);
  // $('#inputEmail').attr('disabled',true);
  // $('#inputAddress').attr('disabled',true);
  // $('.editmode .form-control').css('background-color','#121A7F');
  // $('.editmode .form-control').css('color','#fff !important');
  // $('#accountEditBtn').removeClass("d-none");
  // $('#accountSaveBtn').addClass("d-none");
});

$('#batteryTyreCheckout').click(function(){
     if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Make'){
      $('#requestMakeError').removeClass('d-none');
      $("#requestMakeError").html("Select Make");
      return false;
    }else{
      $('#requestMakeError').addClass('d-none');
    }
    if($('#modelSelect').val() == "Model" || $('#modelSelect').val() == "") {
      $('#requestModelError').removeClass('d-none');
      $('#requestModelError').text("Select Model.");
      return false;
    }else {
      $('#requestModelError').addClass('d-none');
    }

    if($('#fuelSelect').val() == "Fuel" || $('#fuelSelect').val() == "") {
      $('#requestFuelError').removeClass('d-none');
      $('#requestFuelError').text("Select fuel type.");
      return false;
    }else {
      $('#requestFuelError').addClass('d-none');
    }
     if($('#batteryPartSelect').val() == "Select Battery OR Tyre" || $('#batteryPartSelect').val() == "") {
      $('#requestPartSelectError').removeClass('d-none');
      $('#requestPartSelectError').text("Select Battery Or Tyre.");
      return false;
    }else {
      $('#requestPartSelectError').addClass('d-none');
    }
    if($('#batteryPartFound').val() == "false"){
      if($('#batteryQuery').val() == "Enter car part details." || $('#batteryQuery').val() == "") {
      $('#requestBatteryQueryError').removeClass('d-none');
      $('#requestBatteryQueryError').text("Select fuel type.");
      return false;
    }else {
      $('#requestBatteryQueryError').addClass('d-none');
    }
    }
      // console.log($('#batteryPartSelect').val());
      var auth        = $('#isUserEstimate').val();
      $makeId         = $( "#brandSelect" ).val();
      $modelId        = $( "#modelSelect" ).val();
      $fuelId         = $( "#fuelSelect" ).val();
      $batteryORTyre  = $( "#batteryPartSelect" ).val();
      $batteryRemark  = $( "#batteryRemark" ).val();
      $mobile         = $( "#mobile1" ).val();
      // alert('hi');
      if (auth == 'true') {
      // $batteryOrTyre= $( ".batteryPartSelect option:selected" ).val();
      // console.log('heeeeeeeeeeeeeeeeee'+$( ".batteryPartSelect option:selected" ).val());
      var name='';
      if($( ".batteryPartSelect option:selected" ).val() == 0){
        name = "Batteries";
      }else{
        name = "Tyres";
      }
      var base_url = window.location.origin;
      $serviceType = $( "#serviceType" ).val();
      $.ajax({
        url: "/BatteryTyreService/getBatteryParts",
        method: 'POST',
        data:{'brandId':$makeId, 'modelId':$modelId, 'fuelId':$fuelId, 'serviceType':$serviceType, 'batteryOrTyre':$batteryORTyre,'mobile':$mobile},
        success: function(data,status,xhr){
          // console.log("XHRData---"+JSON.stringify(data.serviceParts));
          $('#batteryTyreDiv').html('');
          var partSelectOptions='';

          if(data !== []) {
            // console.log('empty data'+data.serviceParts.length);

            partSelectOptions+='<div class="col-lg-12 batteryTyreContainer">';
            if(data.serviceParts.length >=1 )  {
                 partSelectOptions+='<table class="table table-bordered tableData"><thead><tr><th>'+name+'</th></tr></thead><tbody>';
              data.serviceParts.map((partData,idx)=>{
                 partSelectOptions+='<tr><td>'
                partSelectOptions+='<div class="col-lg-12 mb-3 pt-3 batteryTyreDiv2" style="display:flex; flex-direction:row;">';

                partSelectOptions+='<div class="col-lg-4 batteryTyreDiv3">';
                partSelectOptions+='<div class=""><img src="'+base_url+'/images/carParts/'+partData.part_image+'" style="width:100px;height: 100px" /></div>';
                partSelectOptions+='</div>';

                partSelectOptions+='<div class="col-lg-5 batteryTyreDiv3">';
                partSelectOptions+='<div class"col-lg-12"><h4 class="pt-2 batteryTyreName">'+partData.part_name+'<h4></div>';
                partSelectOptions+='<div class"col-lg-12"><h5 class="batteryTyrePrice">₹'+partData.price+'<h5></div>';
                partSelectOptions+='</div>';
                partSelectOptions+='<div class="col-lg-3 batteryTyreDiv3" style="display: flex;align-items: center;">';

                    var count =0;
                if(data.existingParts.length > 1) {
                  // data.existingParts.map((existingPart,key)=>{
                  for (var i = 0; i < data.existingParts.length; i++) {
                    if(data.existingParts[i].partId == partData.id) {
                      partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="'+data.existingParts[i].qty+'" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';
                      count = 1;
                    }
                  }

                  if(count != 1) {
                    partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="0" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';
                  }
                } else {
                  partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="0" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';
                }
                // partSelectOptions+='<div style="display:flex; flex-direction:row;"><button class="btn decQty" id="decQty-'+partData.id+'" onclick="decrementPartQty('+partData.id+')" >-</button><input type="number" class="partQty text-center" readonly id="partQty-'+partData.id+'" value="0" min="0" style="width:30%;" /><button class="incQty btn" onclick="incrementPartQty('+partData.id+')" id="incQty-'+partData.id+'">+</button></div>';

                partSelectOptions+='</div>';
                partSelectOptions+='</div>';
                partSelectOptions+='</td></tr>';

                // partSelectOptions+='<hr />';
                $('#batteryCheckoutBtn').removeClass('d-none');
              $('.hideBatteryModal').addClass('d-none');

              });
              partSelectOptions+=' </tbody></table>';

            } else {
              // console.log("No products---");
              partSelectOptions+='<div class="p-3"><h4>No products available for the selected Make, Model & Fuel</h4></div>';
              $('#batteryCheckoutBtn').addClass('d-none');
              $('.hideBatteryModal').removeClass('d-none');
            }

            partSelectOptions+='</div>';
          }

          $('#batteryTyreDiv').append(partSelectOptions);
          $('.table').dataTable({
              dom: 'Bfrtip',
              buttons: []
          });
        }
      });
      $('#batteryTyreModal').modal({
        backdrop: 'static',
        keyboard: true, 
        show: true
      });
      }else{

        $('#hideData').html('');
         $('.hideData').append('<input type="hidden" name="makeId" id="makeId" value="'+$makeId+'">');
        $('.hideData').append('<input type="hidden" name="modelId" id="modelId" value="'+$modelId+'">');
        $('.hideData').append('<input type="hidden" name="fuelId" id="fuelId" value="'+$fuelId+'">');
        $('.hideData').append('<input type="hidden" name="batteryOrTyre" id="batteryOrTyre" value="'+$batteryORTyre+'">');
        $('.hideData').append('<input type="hidden" name="batteryRemark" id="batteryRemark" value="'+$batteryRemark+'">'); 

        $('#accLogin').modal({
        backdrop: 'static',
        keyboard: true, 
        show: true
      });

      }


});
$('#batterySubmitRequest').click(function(){
  // alert($('#brandSelect').val());
  

});
// $('.searchPackage').click(function(){
//        if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Brand'){
//   $('#requestMakeError').removeClass('d-none');
//   $("#requestMakeError").html("Select Make");
//   return false;
// }else{
//   $('#requestMakeError').addClass('d-none');
// }
// if($('#modelSelect').val() == "Model" || $('#modelSelect').val() == "") {
//   $('#requestModelError').removeClass('d-none');
//   $('#requestModelError').text("Select Model.");
//   return false;
// }else {
//   $('#requestModelError').addClass('d-none');
// }

// if($('#fuelSelect').val() == "Fuel" || $('#fuelSelect').val() == "") {
//   $('#requestFuelError').removeClass('d-none');
//   $('#requestFuelError').text("Select fuel type.");
//   return false;
// }else {
//   $('#requestFuelError').addClass('d-none');
// }
// if(!$('#mobile1').val() || $('#mobile1').val() == "") {
//   $('#requestMobError').removeClass('d-none');
//   $('#requestMobError').text("Enter Mobile.");
//   return false;
// }else {
//   $('#requestMobError').addClass('d-none');
// }
// });

$('#conFirmAccidentalBooking').click(async function(){

  if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Select Make'){
      $('#requestMakeError').removeClass('d-none');
      $("#requestMakeError").html("Select Make");
      return false;
    }else{
      $('#requestMakeError').addClass('d-none');
    }
    if($('#modelSelect').val() == "Select Model" || $('#modelSelect').val() == "") {
      $('#requestModelError').removeClass('d-none');
      $('#requestModelError').text("Select Model.");
      return false;
    }else {
      $('#requestModelError').addClass('d-none');
    }

    if($('#fuelSelect').val() == "Select Fuel" || $('#fuelSelect').val() == "") {
      $('#requestFuelError').removeClass('d-none');
      $('#requestFuelError').text("Select fuel type.");
      return false;
    }else {
      $('#requestFuelError').addClass('d-none');
    }
    // alert($('#partColor').val());
    if($('#partsToRepair').val() == null || $('#partsToRepair').val() == "") {
      $('#servicePartError').removeClass('d-none');
      $('#servicePartError').text("Select Part.");
      return false;
    }else {
      $('#servicePartError').addClass('d-none');
    }
    if($('#partColor').val() == null || $('#partColor').val() == "Select Color") {
      $('#partColorError').removeClass('d-none');
      // console.log($('#isUserEstimate').val());
      $('#partColorError').text("Select Color.");
      return false;
    }else {
      $('#partColorError').addClass('d-none');
    }
    // alert($('#financeType').val());
    if($('#financeType').val() == null || $('#financeType').val() == "Repair Expenses By") {
      $('#financeError').removeClass('d-none');
      $('#financeError').text("Select Insurance Claim.");
      return false;
    }else {
      $('#financeError').addClass('d-none');
    }
    if($('#financeType').val() == "1"){
     if($('#insuranceCompany').val() == "Select Your Insurance Company" || $('#insuranceCompany').val() == "") {
      $('#financeCompanyError').removeClass('d-none');
      $('#financeCompanyError').text("Please select an Insurance Company from the above list.");
      return false;
    }else {
      $('#financeCompanyError').addClass('d-none');
    }
  }


         var mobileNum  =  $('#mobile1').val();
         var brands = $('#brandSelect').val();
         var isUserEstimate = $('#isUserEstimate').val();
         var partsToRepair = $('#partsToRepair').val();
         var partColor = $('#partColor').val();
         var partFound = $('#partFound').val();
         var accidentalRemark = $('#accidentalRemark').val();
         var FinanceType = $('#FinanceType').val();
         var insuranceCompany  = $('#insuranceCompany').val();
         var hiddenBrand = $('#hiddenBrand').val();
         var hiddenModel = $('#hiddenModel').val();
         // var accidentalQuery = $('#accidentalQuery').val();
         var hiddenFuel = $('#hiddenFuel').val();
         var carTypeHidden = $('#carTypeHidden').val();
         if(accidentalRemark == ''){
          accidentalRemark  = null;
         }
         if(FinanceType == null){
          FinanceType =null;
         }
         if(insuranceCompany == 'Select Insurance Your Company'){
          insuranceCompany = null;
         }
  // console.log("CartCount2---"+$count);

         // if(accidentalRemark == null){
         //  alert('accidentalRemark');
         // }
     // console.log("1"+mobileNum);
     // console.log('2'+brands);
     // console.log('3'+isUserEstimate);
     // console.log('4'+partsToRepair);
     // console.log('5'+partColor);
     // console.log('6'+partFound);
     // console.log('7'+accidentalRemark);
     // console.log('8'+FinanceType);
     // console.log('9'+insuranceCompany);
     // console.log('10'+hiddenBrand);
     // console.log('11'+hiddenModel);
     // console.log('12'+hiddenFuel);
     // console.log('13'+carTypeHidden);

    $formData = { 'partsToRepair':partsToRepair,'mobile': mobileNum ,'isUserEstimate':isUserEstimate,'partColor':partColor,'partFound':partFound,'insuranceCompany':insuranceCompany,'hiddenBrand':hiddenBrand,'hiddenBrand':hiddenBrand,'hiddenModel':hiddenModel,'hiddenFuel':hiddenFuel,'carTypeHidden':carTypeHidden,'accidentalRemark':accidentalRemark,'FinanceType':FinanceType,'insuranceCompany':insuranceCompany};



    if($('#isUserEstimate').val() == "false"){
      $('.hiddenData').html('');
      var abc = $('#accidentalForm').serialize();
       $('#accLogin').modal({
        backdrop: 'static',
        keyboard: true, 
        show: true
      });




        $('.hiddenData').append('<input type="hidden" name="brands" id="brands" value="'+brands+'">');
        $('.hiddenData').append('<input type="hidden" name="isUserEstimate" id="isUserEstimate" value="'+isUserEstimate+'">');
        // $('.hiddenData').append('<input type="hidden" name="fuels" id="fuels" value="'+fuels+'">');
        $('.hiddenData').append('<input type="hidden" name="partsToRepair" id="partsToRepair" value="'+partsToRepair+'">');
        $('.hiddenData').append('<input type="hidden" name="partColor" id="partColor" value="'+partColor+'">');        
        $('.hiddenData').append('<input type="hidden" name="partFound" id="partFound" value="'+partFound+'">');
        $('.hiddenData').append('<input type="hidden" name="FinanceType" id=.FinanceType" value="'+FinanceType+'">');
        $('.hiddenData').append('<input type="hidden" name="accidentalRemark" id="accidentalRemark" value="'+accidentalRemark+'">');
        $('.hiddenData').append('<input type="hidden" name="insuranceCompany" id="insuranceCompany" value="'+insuranceCompany+'">');
        $('.hiddenData').append('<input type="hidden" name="hiddenBrand" id="hiddenBrand" value="'+hiddenBrand+'">');
        $('.hiddenData').append('<input type="hidden" name="hiddenModel" id="hiddenModel" value="'+hiddenModel+'">');
        $('.hiddenData').append('<input type="hidden" name="hiddenFuel" id="hiddenFuel" value="'+hiddenFuel+'">');
        $('.hiddenData').append('<input type="hidden" name="carTypeHidden" id="carTypeHidden" value="'+carTypeHidden+'">');
       return false;
      // console.log(abc);
    }else{
     $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });
    // console.log("formData==========>"+JSON.stringify($formData));

    $.ajax({
        url:'/sendemail/send',
        type:'post',
        data:$formData,
        // alert(data);
        success:function(data,status,xhr) {
          if(xhr.status==200) {
            $.ajax({
              url: "/PServices/getCartCount",
              method: 'POST',
              success: function(response){
                  if(response) {
                    $countData =  JSON.parse(response);
                    $count = $countData.count;
                      $('.outerCheckoutBtnDiv').css('display','block');
                console.log("checkCartCount called---------"+$count);
                    if($count>0) {
                      $('.bookServiceBtn').css('display','block');
                    }else {
                      $('.bookServiceBtn').css('display','none');
                    }
                  }
              
              }
            });
               
          // console.log(data);
          onOuterCheckoutClick();
          }
        },
        error:function () {
            // console.log('error');
        }
    });
    }
});

$('#submitAccidentalRequest').click(function(){
   if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Make'){
      $('#requestMakeError').removeClass('d-none');
      $("#requestMakeError").html("Select Make");
      return false;
    }else{
      $('#requestMakeError').addClass('d-none');
    }
    if($('#modelSelect').val() == "Model" || $('#modelSelect').val() == "") {
      $('#requestModelError').removeClass('d-none');
      $('#requestModelError').text("Select Model.");
      return false;
    }else {
      $('#requestModelError').addClass('d-none');
    }

    if($('#fuelSelect').val() == "Fuel" || $('#fuelSelect').val() == "") {
      $('#requestFuelError').removeClass('d-none');
      $('#requestFuelError').text("Select fuel type.");
      // alert($('#accidentalQuery').val());
      return false;
    }else {
      $('#requestFuelError').addClass('d-none');
    }
     if(!$('#mobile1').val() || $('#mobile1').val() == ''){
        $('#mobileError').removeClass('d-none');
        $("#mobileError").html("Enter mobile number");
        return false;
      }else{
        $('#mobileError').addClass('d-none');
      }
     if(!$('#accidentalRemark').val() || $('#accidentalRemark').val() == ''){
        $('#accidentalRemarkError').removeClass('d-none');
        $("#accidentalRemarkError").html("Enter Query");
        return false;
      }else{
        $('#accidentalRemarkError').addClass('d-none');
      }
      var mobileNum  =  $('#mobile1').val();
         var brands = $('#brandSelect').val();
         var isUserEstimate = $('#isUserEstimate').val();
         var partsToRepair = $('#partsToRepair').val();
         var partColor = $('#partColor').val();
         var partFound = $('#partFound').val();
         var accidentalRemark = $('#accidentalRemark').val();
         var FinanceType = $('#FinanceType').val();
         var insuranceCompany  = $('#insuranceCompany').val();
         var hiddenBrand = $('#hiddenBrand').val();
         var hiddenModel = $('#hiddenModel').val();
         // var accidentalQuery = $('#accidentalQuery').val();
         var hiddenFuel = $('#hiddenFuel').val();
         var carTypeHidden = $('#carTypeHidden').val();
         // var accidentalQuery = $('#accidentalQuery').val();
         // if(accidentalQuery == ''){
         //  accidentalQuery  = null;
         // }
         if(FinanceType == null){
          FinanceType =null;
         }
         if(insuranceCompany == 'Select Your Insurance Company'){
          insuranceCompany = null;
         }


        let image_upload = new FormData();
        let TotalImages = $('#accidentalImage')[0].files.length;  //Total Images
        let images = $('#accidentalImage')[0];  

        for (let i = 0; i < TotalImages; i++) {
          image_upload.append('images[]', images.files[i]);
        }
        // for (let i = 0; i < TotalImages; i++) {
        //   image_upload.append('images' + i, images.files[i]);
        // }
        image_upload.append('TotalImages', TotalImages);

        image_upload.append('partsToRepair', partsToRepair);
        image_upload.append('mobile', mobileNum);
        image_upload.append('isUserEstimate', isUserEstimate);
        image_upload.append('partColor', partColor);
        image_upload.append('partFound', partFound);
        image_upload.append('insuranceCompany', insuranceCompany);
        image_upload.append('hiddenBrand', hiddenBrand);
        image_upload.append('hiddenModel', hiddenModel);
        image_upload.append('hiddenFuel', hiddenFuel);
        image_upload.append('carTypeHidden', carTypeHidden);
        image_upload.append('accidentalRemark', accidentalRemark);
        image_upload.append('FinanceType', FinanceType);
        image_upload.append('insuranceCompany', insuranceCompany);
 

         console.log("Image is===---------"+TotalImages);

        //  var form_data = new FormData();
        // var totalfiles = document.getElementById('accidentalImage').files.length;
        // for (var index = 0; index < totalfiles; index++) {
        //   form_data.append("accidentalImage[]", document.getElementById('accidentalImage').files[index]);
        // }


         // if(accidentalRemark == null){
         //  alert('accidentalRemark');
         // }
     // console.log("1"+mobileNum);
     // console.log('2'+brands);
     // console.log('3'+isUserEstimate);
     // console.log('4'+partsToRepair);
     // console.log('5'+partColor);
     // console.log('6'+partFound);
     // console.log('7'+accidentalRemark);
     // console.log('8'+FinanceType);
     // console.log('9'+insuranceCompany);
     // console.log('10'+hiddenBrand);
     // console.log('11'+hiddenModel);
     // console.log('12'+hiddenFuel);
     // console.log('13'+carTypeHidden);
     // console.log('13'+accidentalQuery);

    $formData = { 'partsToRepair':partsToRepair,'mobile': mobileNum ,'isUserEstimate':isUserEstimate,'partColor':partColor,'partFound':partFound,'insuranceCompany':insuranceCompany,'hiddenBrand':hiddenBrand,'hiddenModel':hiddenModel,'hiddenFuel':hiddenFuel,'carTypeHidden':carTypeHidden,'accidentalRemark':accidentalRemark,'FinanceType':FinanceType,'insuranceCompany':insuranceCompany,'accidentalImage':image_upload};

       $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });
    // console.log("formData==========>"+JSON.stringify($formData));

    $.ajax({
        url:'/sendemail/send',
        type:'post',
        data:image_upload,
        contentType: false,
        processData: false,
        success:function(data,status,xhr) {
          if(xhr.status==200) {
          // console.log(data);
            swal({
                title: "Thank you for enquiry",
                text: "Your query has been registered with us. We will get in touch with you as soon as possible.",
                icon: "success",
                showCancelButton: false,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Okay',
                closeOnConfirm: true,
                closeOnClickOutside: false
              }).then(function(isConfirm) {
                 window.location.reload();
                
              });
         
          }
        },
        error:function () {
            // console.log('error');
        }
    });
});


$('#home-send-request').click(function(e){
  console.log("home-send-request clicked----");
  // alert($('#brandSelect').val());
  if(!$('#brandSelect').val() || $('#brandSelect').val() == 'Select Make'){
      $('#requestMakeError').removeClass('d-none');
      $("#requestMakeError").html("Select Make");
      return false;
    }else{
      $('#requestMakeError').addClass('d-none');
    }
    if($('#modelSelect').val() == "Select Model" || $('#modelSelect').val() == "") {
      $('#requestModelError').removeClass('d-none');
      $('#requestModelError').text("Select Model.");
      return false;
    }else {
      $('#requestModelError').addClass('d-none');
    }

    if($('#fuelSelect').val() == "Select Fuel" || $('#fuelSelect').val() == "") {
      $('#requestFuelError').removeClass('d-none');
      $('#requestFuelError').text("Select fuel type.");
      // alert($('#accidentalQuery').val());
      return false;
    }else {
      $('#requestFuelError').addClass('d-none');
    }
  // console.log($('#storeDataInSession').serialize());
  $auth = $('#isUserEstimate').val();
  $brand = $('#brandSelect').val();
  $model = $('#modelSelect').val();
  $fuel = $('#fuelSelect').val();
  // console.log($auth);
  // console.log($brand);
  // console.log($model);
  // console.log($fuel);
  if($auth == 'true'){
    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
    $.ajax({
      url: "/saveHomeDataToSession",
      method: 'post',
      data: {'brand':$brand,'model':$model,'fuel':$fuel},
      success:function(data,status,xhr) {
        // console.log("OK-------"+JSON.stringify(xhr));
        if(xhr.status == 200) {
          window.location.href = "/services";
        }
      }
    });
  }
  else{
    $('#Ids').html('');
    $('#Ids').append('<input type="hidden" value="'+$brand+'" id="brandSelect" data-id="'+$brand+'" name="hiddenbrand">');
    $('#Ids').append('<input type="hidden" value="'+$model+'" id="modelSelect" data-id="'+$model+'" name="hiddenModel">');
    $('#Ids').append('<input type="hidden" value="'+$fuel+'" id="fuelSelect" data-id="'+$fuel+'" name="hiddenFuel">');
      $('#HomeSessionLogin').modal({
        backdrop: 'static',
        keyboard: true, 
        show: true
      });
  }
});

  $('#HomeAuthOtp').click(function(){
        var mobNum = $('#authHomeMobile').val()
        var filter = /^\d*(?:\.\d{1,2})?$/;

          if (filter.test(mobNum)) {
            if(mobNum.length==10){
                  // alert("valid");
             } else {
              swal({
                  title: "",
                  text: "Please put 10  digit mobile number",
                  type: "warning",
                  showCancelButton: true,
                  confirmButtonColor: '#121A7F',
                  confirmButtonText: 'Close',
                  cancelButtonText: "Close",
                  closeOnConfirm: false,
                  closeOnCancel: false
               });
                return false;
              }
            }
            else {
              swal({
                  title: "",
                  text: "Not a valid number",
                  type: "warning",
                  showCancelButton: true,
                  confirmButtonColor: '#121A7F',
                  confirmButtonText: 'Close',
                  cancelButtonText: "Close",
                  closeOnConfirm: false,
                  closeOnCancel: false
               });
              return false;
           }
    // console.log('hiiii');
    var mobileNumber = {'mobileNumber': $('#authHomeMobile').val()}
        $("#authMobile").prop("readonly", true);

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
    // console.log('hello'+$('#authHomeMobile').val());
    $.ajax({
      url: "leadOtp",
      method: 'post',
      data: mobileNumber,
      success:function(data,status,xhr) {
        // console.log("OTP Test6---"+JSON.stringify(xhr));
        if(xhr.status==200) {
          localStorage.setItem("otp", xhr.responseText);
            $('.otpText').show();
            $('.loginUserBtn').show();
            $('.sendOtpBtn').hide(); 
            $("#authHomeMobile").prop("readonly", true);
          // Resend OTP Code ---------------------------------------------
      
          $('.resendOtpDiv').removeClass('d-none');
          $('.resendOtpText').css('cursor','not-allowed');
          $('.resendOtpText').css('pointer-events','none');
           // var fiveMinutes = 60 * 1,
          var display2 = document.querySelector('#time2');

          // console.log("display2 is-------------"+JSON.stringify(display2));

          var timer2 = new CountDownTimer(30);
          timer2.onTick(format(display2)).start();
          function format(display) {
            return function (minutes, seconds) {
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              display.textContent = minutes + ':' + seconds;
             // console.log("Check---"+seconds);
              if(seconds == 0) {
                $('.resendOtpTextTimer').addClass('d-none');
                $('.resendOtpText').css('pointer-events','auto');
                $('.resendOtpText').css('cursor','pointer');
              }
            };
          } 

                // Resend OTP Code Ends ---------------------------------------------
        }
        if(xhr.status==250) {
          swal(xhr.responseText, "", "warning");
        }
      },
      error:function () {
        // console.log('error');
      }
    });
  });

  
  $('#HomeLogin').click(function(e){
    e.preventDefault();
    // aler
       $brand = $('#brandSelect').val();
        $model = $('#modelSelect').val();
        $fuel = $('#fuelSelect').val();
      $formData = $("#HomeLoginForm").serialize();
      var leadMobile = $('#authHomeMobile').val();
      var leadOtp = $('#HomeOtp').val();
      $storedOTP = localStorage.getItem('otp');
      // console.log($storedOTP);
        // console.log("leadOtp----"+leadOtp);
      if($storedOTP == leadOtp) {
         $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
    $.ajax({
      url: "/saveAuthHomeDataToSession",
      method: 'post',
      data: {'brand':$brand,'model':$model,'fuel':$fuel,'mobile':leadMobile},
      success:function(data,status,xhr) {
        // console.log("OK-------"+JSON.stringify(xhr));
        if(xhr.status == 200) {
          window.location.href = "/services";
        }
      }
    });
        $("#HomeSessionLogin").modal('hide');
     }else {
       alert("Invalid OTP");
   }
});


function offlineCheckout(){
    
    // $('#payment').css('z-index',1);
    // $('#accCheckout').css('z-index',1);

      if(!$('#pickupDate').val()){
      $('#pickupdate').removeClass('d-none');
      $("#pickupdate").html("Enter Date");
      return false;
    }else{
      $("#pickupdate").html("");
    }

    if(!$('#pickupTime').val()){
      $('#pickuptime').removeClass('d-none');
      $("#pickuptime").html("Enter Time");
      return false;
    }else{
      $("#pickuptime").html(""); 
    }
    if(!$('#carNumber').val()){
      $('#carNumberErr').removeClass('d-none');
      $("#carNumberErr").html("Enter Car Number");
      return false;
    }else{
      $("#carNumberErr").html(""); 
    }

    if(!$('#location').val()){
      $('#pickuplocation').removeClass('d-none');
      $("#pickuplocation").html("Enter Location");
      return false;
    }else{
      $("#pickuplocation").html("");
    }

    $('#payment').css('z-index',1);
    $('#accCheckout').css('z-index',1);

     $('.loader-wrapper').css('display','flex');
     $('.modal-backdrop.show').css('opacity','0');

    jQuery.noConflict();
    $.ajaxSetup({
      headers: {
       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });
   $.ajax({
      url:'offlineCheck',
      type:'post',
      data: $("#registerSubmit").serialize(),
      success:function(data){
        $('.outerCheckoutBtnDiv').css('display','none');
        // console.log("Offline Order Placed");
        
        $('.loader-wrapper').css('display','none');
        swal({
          title: "Confirmed",
          text: "Thank you for choosing MyCarMech. You will receive Service Center details by SMS and/or mail shortly.",
          icon: "success",
          showCancelButton: false,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'Okay',
          closeOnConfirm: true,
          closeOnClickOutside: false
        }).then(function(isConfirm) {
            $(".swal2-modal").css('background-color', '#2732A3');
            window.location.href = '/';
        });
     }
  });

}

function onlineCheckout() {
  jQuery.noConflict();
  //   if($('#nameFound').val() == "false"){
  //     if(!$('#checkoutName').val()){
  //       $('#checkoutNameError').removeClass('d-none');
  //       $("#checkoutNameError").html("Enter Name");
  //       return false;
  //     }else{
  //       $("#checkoutNameError").html("");
  //   }
  // }
    // if($('#emailFound').val() == false){
    //    if(!$('#email').val()){
    //     $('#checkoutEmailError').removeClass('d-none');
    //     $("#checkoutEmailError").html("Enter Email");
    //     return false;
    //   }else{
    //     $("#checkoutEmailError").html("");
    //   }
    //     }
  if(!$('#pickupDate').val()){
      $('#pickupdate').removeClass('d-none');
      $("#pickupdate").html("Enter Date");
      return false;
    }else{
      $("#pickupdate").html("");
    }

    if(!$('#pickupTime').val()){
      $('#pickuptime').removeClass('d-none');
      $("#pickuptime").html("Enter Time");
      return false;
    }else{
      $("#pickuptime").html(""); 
    }
    if(!$('#carNumber').val()){
      $('#carNumberErr').removeClass('d-none');
      $("#carNumberErr").html("Enter Car Number");
      return false;
    }else{
      $("#carNumberErr").html(""); 
    }

    if(!$('#location').val()){
      $('#pickuplocation').removeClass('d-none');
      $("#pickuplocation").html("Enter Location");
      return false;
    }else{
      $("#pickuplocation").html("");
    }

  
  // console.log($('#registerSubmit').serialize());
  // console.log($('.hiddenEmail').val());
  // console.log($('.checkoutEmail').val());
  var amount = $('.totalAmount').text();
  var nameVal = $('#nameFound').val();
  var name = '';

  var discountedAmount = $('.newTotalAmount').text();
  if(discountedAmount>0) {
    amount = discountedAmount;
  }
  // alert('onlineCheckout called!!!');

 var mobile = $('#mobileVerification').val();
  if ($('.hiddenEmail').val() !== '' && $('.hiddenEmail').val() != undefined ) {
    var email = $('.hiddenEmail').val();
  }else{
    var email = $('.checkoutEmail').val();
  }

    if(nameVal =="true"){
    name = $('#hiddenName').val();
  }else{
    name = $('#checkoutName').val();
  }

  callRazorPayScript(amount,mobile,email,name);
}


function addAccidentalPart(id) {
  // console.log('Part---'+$('#partQty-'+id).val());
  var partQty = $('#partQty-'+id).val();

  $.ajax({
    url:'addPartToCart',
    type:'post',
    data:{'part_id': id, 'partQty':partQty},
    success:function(data){
      // console.log("CratData---"+JSON.stringify(data.pack_id));
      $('#part-'+data.pack_id).html("Added");
      $('#part-'+data.pack_id).prop('disabled', true);
      $('#remPart-'+data.pack_id).removeClass('d-none');
    }
  });
}

function incrementPartQty(id) {
  $currentQty = $('#partQty-'+id).val();
  $updatedQty = parseInt($currentQty)+parseInt(1);
  $('#partQty-'+id).val($updatedQty);
    // console.log("updatedQty---"+$updatedQty);

  $.ajax({
    url:'addPartToCart',
    type:'post',
    data:{'part_id': id, 'partQty':$updatedQty},
    success:function(data){
      // console.log("CratData---"+JSON.stringify(data.pack_id));
      // $('#part-'+data.pack_id).html("Added");
      // $('#part-'+data.pack_id).prop('disabled', true);
      // $('#remPart-'+data.pack_id).removeClass('d-none');
    }
  });
}

function decrementPartQty(id) {
  $currentQty = $('#partQty-'+id).val();
  if(parseInt($currentQty)>0) {
    $updatedQty = parseInt($currentQty)-parseInt(1);
    $('#partQty-'+id).val($updatedQty);
    // console.log("updatedQty---"+$updatedQty);

    $.ajax({
      url:'removePartFromCart',
      type:'post',
      data:{'part_id': id, 'partQty':$updatedQty},
      success:function(data){
        // console.log("CratData---"+JSON.stringify(data.pack_id));
        // $('#part-'+data.pack_id).html("Added");
        // $('#part-'+data.pack_id).prop('disabled', true);
        // $('#remPart-'+data.pack_id).removeClass('d-none');
      }
    });
  }
}

function removePartFromCart(id) {
  // console.log('Part---'+id);
  $.ajax({
    url:'removePartFromCart',
    type:'post',
    data:{'part_id': id},
    success:function(data){
      // console.log("CratData---"+JSON.stringify(data.pack_id));
      $('#part-'+data.pack_id).html("Add");
      $('#part-'+data.pack_id).prop('disabled', false);
      $('#remPart-'+data.pack_id).addClass('d-none');
      // $('.outerCheckoutBtnDiv').css('display','block');
      // if(data.responseCode == 404) {
      //   // alert(data.msg);
      //   $('#signup').modal('show');
      // }
    }
   
  });
}



function deleteCartItem(packid){
   var cartPackageId = packid.id;
   $.ajaxSetup({
     headers: {
       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
 });
   $.ajax({
      url:'deleteCartItem',
      type:'post',
      data: {'package_id': cartPackageId},
      success:function(data){
        // console.log(data);
     }
  });
}

function emptyCart(){
  $.ajaxSetup({
     headers: {
       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
 });
   $.ajax({
      url:'emptyCart',
      type:'post',
      // data: {'package_id': cartPackageId},
      success:function(data){
        // console.log(data);
     }
  });
}
//  $(document).on('ready', function() {
//   $('#services').onclick(function(){
//     alert('hi');
//     $(this).addClass(" active");
    
//   });
//  });
$(function(){
    $('.nav-item').filter(function(){return this.href==location.href}).parent().addClass('active').siblings().removeClass('active')
    $('.nav-item').click(function(){
      $(this).parent().addClass('active').siblings().removeClass('active')  
    })
  })

function reSendOtp(){
  $.ajax( {
    url:'leadOtp',
    type:'post',
    data: {'mobileNumber': $('#mobilenum1').val()},
    // alert(data);
    success:function(data,status,xhr) {
      if(xhr.status==200) {
        localStorage.setItem("otp", xhr.responseText);
          $('.otp-block').show();
          $('.login-btn').show();
          $('.otp-btn').hide();
          $('.resendOtpTextTimer').removeClass('d-none');
          $('.resendOtpDiv').removeClass('d-none');
          $('.resendOtpText').css('pointer-events','none');
          $('.resendOtpText').css('cursor','not-allowed');

          // var fiveMinutes = 60 * 1,
          var display2 = document.querySelector('#time2');
          var timer2 = new CountDownTimer(30);
          timer2.onTick(format(display2)).start();

          function format(display) {
            return function (minutes, seconds) {
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              display.textContent = minutes + ':' + seconds;
              // console.log("Check---"+seconds);
              if(seconds == 0){
                $('.resendOtpTextTimer').addClass('d-none');
                $('.resendOtpText').css('pointer-events','auto');
                $('.resendOtpText').css('cursor','pointer');
              }
            };
          }   
      }
      if(xhr.status==250) {
        swal(xhr.responseText, "", "warning");
      }
    },
    error:function () {
        // console.log('error');
    }
});
}

  function reSendOtp2(){
  $.ajax( {
    url:'leadOtp',
    type:'post',
    data: {'mobileNumber': $('#authHomeMobile').val()},
    // alert(data);
    success:function(data,status,xhr) {
      if(xhr.status==200) {
        localStorage.setItem("otp", xhr.responseText);
          $('.otp-block').show();
          $('.login-btn').show();
          $('.otp-btn').hide();
          $('.resendOtpTextTimer').removeClass('d-none');
          $('.resendOtpDiv').removeClass('d-none');
          $('.resendOtpText').css('pointer-events','none');
          $('.resendOtpText').css('cursor','not-allowed');

          // var fiveMinutes = 60 * 1,
          var display2 = document.querySelector('#time2');
          var timer2 = new CountDownTimer(30);
          timer2.onTick(format(display2)).start();

          function format(display) {
            return function (minutes, seconds) {
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              display.textContent = minutes + ':' + seconds;
              // console.log("Check---"+seconds);
              if(seconds == 0){
                $('.resendOtpTextTimer').addClass('d-none');
                $('.resendOtpText').css('pointer-events','auto');
                $('.resendOtpText').css('cursor','pointer');
              }
            };
          }   
      }
      if(xhr.status==250) {
        swal(xhr.responseText, "", "warning");
      }
    },
    error:function () {
        // console.log('error');
    }
});
}
  function reSendOtp3() {
  $.ajax( {
    url:'leadOtp',
    type:'post',
    data: {'mobileNumber': $('#authMobile').val()},
    // alert(data);
    success:function(data,status,xhr) {
      if(xhr.status==200) {
        localStorage.setItem("otp", xhr.responseText);
          $('.otp-block').show();
          $('.login-btn').show();
          $('.otp-btn').hide();
          $('.resendOtpTextTimer').removeClass('d-none');
          $('.resendOtpDiv').removeClass('d-none');
          $('.resendOtpText').css('pointer-events','none');
          $('.resendOtpText').css('cursor','not-allowed');

          // var fiveMinutes = 60 * 1,
          var display2 = document.querySelector('#time3');
          var timer2 = new CountDownTimer(30);
          timer2.onTick(format(display2)).start();

          function format(display) {
            return function (minutes, seconds) {
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              display.textContent = minutes + ':' + seconds;
              // console.log("Check---"+seconds);
              if(seconds == 0) {
                $('.resendOtpTextTimer').addClass('d-none');
                $('.resendOtpText').css('pointer-events','auto');
                $('.resendOtpText').css('cursor','pointer');
              }
            };
          }   
      }
      if(xhr.status==250) {
        swal(xhr.responseText, "", "warning");
      }
    },
    error:function () {
        // console.log('error');
    }
});
}
  function reSendOtp4() {
  $.ajax( {
    url:'leadOtp',
    type:'post',
    data: {'mobileNumber': $('#mobile1').val()},
    // alert(data);
    success:function(data,status,xhr) {
      if(xhr.status==200) {
        localStorage.setItem("otp", xhr.responseText);
          // $('.otp-block').show();
          // $('.login-btn').show();
          // $('.otp-btn').hide();
          $('.resendOtpTextTimer').removeClass('d-none');
          $('.resendOtpDiv').removeClass('d-none');
          $('.resendOtpText').css('pointer-events','none');
          $('.resendOtpText').css('cursor','not-allowed');

          // var fiveMinutes = 60 * 1,
          var display2 = document.querySelector('#time2');
          var timer2 = new CountDownTimer(30);
          timer2.onTick(format(display2)).start();

          function format(display) {
            return function (minutes, seconds) {
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              display.textContent = minutes + ':' + seconds;
              // console.log("Check---"+seconds);
              if(seconds == 0) {
                $('.resendOtpTextTimer').addClass('d-none');
                $('.resendOtpText').css('pointer-events','auto');
                $('.resendOtpText').css('cursor','pointer');
              }
            };
          }   
      }
      if(xhr.status==250) {
        swal(xhr.responseText, "", "warning");
      }
    },
    error:function () {
        // console.log('error');
    }
});
}


function reSendOtp6(){
  $.ajax( {
    url:'leadOtp',
    type:'post',
    data: {'mobileNumber': $('#mobile1').val()},
    // alert(data);
    success:function(data,status,xhr) {
      if(xhr.status==200) {
        localStorage.setItem("otp", xhr.responseText);
          $('.otp-block').show();
          $('.login-btn').show();
          $('.otp-btn').hide();
          $('.resendOtpTextTimer').removeClass('d-none');
          $('.resendOtpDiv').removeClass('d-none');
          $('.resendOtpText').css('pointer-events','none');
          $('.resendOtpText').css('cursor','not-allowed');

          // var fiveMinutes = 60 * 1,
          var display2 = document.querySelector('#time6');
          var timer2 = new CountDownTimer(30);
          timer2.onTick(format(display2)).start();

          function format(display) {
            return function (minutes, seconds) {
              minutes = minutes < 10 ? "0" + minutes : minutes;
              seconds = seconds < 10 ? "0" + seconds : seconds;
              display.textContent = minutes + ':' + seconds;
              // console.log("Check---"+seconds);
              if(seconds == 0){
                $('.resendOtpTextTimer').addClass('d-none');
                $('.resendOtpText').css('pointer-events','auto');
                $('.resendOtpText').css('cursor','pointer');
              }
            };
          }   
      }
      if(xhr.status==250) {
        swal(xhr.responseText, "", "warning");
      }
    },
    error:function () {
        // console.log('error');
    }
});
}


//  $("#services").click(function(){
//    $(this).addClass(" active");
//    $('#home').removeClass(" active");
// });

// $(".nav-item").on("click", function(e) {
//   $(".nav-item").removeClass("active");
//   $(this).addClass("active");
//   e.preventDefault();
// });

// function'offlineCheck(){

//   $("#registerSubmit").serialize() // returns all the data in your form
//   $.ajax({
//        type: "POST",
//        url: 'finalcheck',
//        data: $("#registerSubmit").serialize(),
//        success: function() {
//             //success message mybe...
//        }
//   });
// }
// document.getElementById(id2).setAttribute('aria-expanded', 'false');
// $( ".CartButton" ).first().nextAll().removeClass( "collapsed" );
//   $("button").attr("aria-expanded","false");
// $( ":nth-child(1)" ).nextAll( ".CartButton" ).addClass( "collapsed" );
$('.table').dataTable({
    dom: 'Bfrtip',
    order: [[ 0, "desc" ]],
    buttons: [{
      extend: 'pdf',
      title: 'Customized PDF Title',
      filename: 'customized_pdf_file_name'
    }, {
      extend: 'excel',
      title: 'Customized EXCEL Title',
      filename: 'customized_excel_file_name'
    }, {
      extend: 'csv',
      filename: 'customized_csv_file_name'
    }]
});

$('#servicesTable').DataTable( {
  dom: 'Bfrtip',
  order: [[ 0, "desc" ]],
  buttons: [{
    extend: 'pdf',
    title: 'Customized PDF Title',
    filename: 'customized_pdf_file_name'
  }, {
    extend: 'excel',
    title: 'Customized EXCEL Title',
    filename: 'customized_excel_file_name'
  }, {
    extend: 'csv',
    filename: 'customized_csv_file_name'
  }],
  "scrollX": true
});


// $(".calendarIcon").click(function(){
//   $("#pickupDate").datepicker("show");
// });


// $('#pickupDate').datepicker({
//   dateFormat: "yy-mm-dd",
// });

// $('#pickupTime').timepicker();
// $('#pickupTime').timepicker();

// $('#pickupTimeAc').click(function(){
// alert('unclicked');
// })

// $('#pickupTimeAc').timepicker({
//   timeFormat: 'h:mm p',
// });

// $(".clockIcon").click(function(){
//   $("#pickupTime").timepicker("show");
// });

// $('.time').datetimepicker({
//     pickDate: false,
//     use24hours: true,
//     minuteStepping: 15,
//     format: 'HH:mm'
//   });

$('.time').timepicker({ 'step': 15, 'scrollDefault': 'now' });
$( "#accordion" ).accordion();

// $('#carouselExampleIndicators1').bind('slide.bs.carousel', function (e) {
//     console.log('slide event!');
//     $(".info-tabs").hide().fadeIn(3000);
// });
// $('.inner-info-tabs h6').effect("bounce", {
//     times: 5,
//     distance: 100
// }, 5000);
// $('#carouselExampleIndicators1').carousel({
//   interval: 5000,
//   pause: false
// })

// CountDown Timer Code-------------------------------

  function CountDownTimer(duration, granularity) {
    this.duration = duration;
    this.granularity = granularity || 1000;
    this.tickFtns = [];
    this.running = false;
  }

  CountDownTimer.prototype.start = function() {
    if (this.running) {
      return;
    }
    this.running = true;
    var start = Date.now(),
        that = this,
        diff, obj;

    (function timer() {
      diff = that.duration - (((Date.now() - start) / 1000) | 0);
      
      if (diff > 0) {
        setTimeout(timer, that.granularity);
      } else {
        diff = 0;
        that.running = false;
      }

      obj = CountDownTimer.parse(diff);
      that.tickFtns.forEach(function(ftn) {
        ftn.call(this, obj.minutes, obj.seconds);
      }, that);
    }());
  };

  CountDownTimer.prototype.onTick = function(ftn) {
    if (typeof ftn === 'function') {
      this.tickFtns.push(ftn);
    }
    return this;
  };

  CountDownTimer.prototype.expired = function() {
    return !this.running;
  };

  CountDownTimer.parse = function(seconds) {
    return {
      'minutes': (seconds / 60) | 0,
      'seconds': (seconds % 60) | 0
    };
  };
  // CountDown Timer Code End-------------------------------

function ServicePageRedirection(seasonalId){
  var id = seasonalId.id;
  // alert("ServicePageRedirection page alert"+id);
  // $.ajaxSetup({
  //     headers: {
  //       'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
  //     }
  //   });
  // $.ajax({
  //   url: "SeasonalOfferPage",
  //   method: 'POST',
  //   data: {'id' : id },
  //   success: function(data,status,xhr){

  //   }
  // }); 
  if(id == 1){
     window.location.href="/PeriodicServices";
  }
  else if(id == 2){
     window.location.href="/accidentalRepair";
  }
    else if(id == 3){
     window.location.href="/mechanicalRepairServices";
  }
    else if(id == 4){
     window.location.href="/ACRepairServices";
  }
    else if(id == 5){
     window.location.href="/BatteryAndTyre";
  }
    else if(id == 6){
     window.location.href="/upkeepServ";
  }else{
    window.location.href="/";
  }

}


  $("body").delegate("#MemBrandSelect", "change", function(event){
      // $("#brandSelect").change(function (event) {
         // console.log("Brand click---");
          $('.loader-wrapper').css('display','flex');

         $("#modelSelect").innerHTML = '';
         // alert("You have Selected  :: "+$(this).val());
         Brand_id = $(this).val();
         // console.log("hiiii"+Brand_id);
         emptyCart();
         $.ajaxSetup({
            headers: {
               'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
         });
          $.ajax({
            url:'models',
            type:'post',
            data:{Brand_id},
            success:function(data){
               // $(".modelSelect").html("");
               // $("#MemModelSelect").select2("destroy").select2();
               $("#MemModelSelect").empty();
               // makeData = '<option selected hidden>Select Model</option>';
               $("#MemModelSelect").append('<option selected hidden>Select Model</option>');
               $("#MemFuelSelect").append('<option selected hidden>Select Fuel</option>');
               $(".MemFuelSelect").html("");
               fuelsData = '';
               // $("#MemFuelSelect").append('<option selected disabled>Select Fuel</option>');
               // console.log(data);
               $.each(data,function(index,row){
                  makeData+="<option id=model-"+row.id+" value="+row.id+">"+row.model_name+"</option>";
               });
                // $("#MemModelSelect").select2({ placeholder: 'Select Model', minimumResultsForSearch: Infinity});
               $("#MemModelSelect").append(makeData);
               // $("#MemModelSelect").select2({minimumResultsForSearch: Infinity});
                $('.loader-wrapper').css('display','none');

            }
         });
});

  $("body").delegate("#MemModelSelect", "change", function(event){
    // console.log("Heooo---");
     $('.loader-wrapper').css('display','flex');

   // $("#modelSelect").change(function(event){
      $("#MemFuelSelect").innerHTML = '';
      Model_id = $(this).val();
      // console.log("heeyyyyyyyy"+Model_id);
      emptyCart();
      $.ajaxSetup({
         headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
         }
      });
      $.ajax({
        url:'fuels',
        type:'post',
        data:{Model_id},
        success:function(data) {
          // if(typeof $("#MemFuelSelect").select2() !== 'undefined' ) {
          //   $("#MemFuelSelect").select2("destroy").select2();
          // }
          $("#MemFuelSelect").empty();
          fuelsData = '<option selected hidden>Select Fuel</option>';

          $("#MemFuelSelect").append('<option selected disabled>Select Fuel</option>');
          // $("#MemFuelSelect").select2({minimumResultsForSearch: Infinity});
          $.each(data,function(key,value){
            // console.log("Key---"+key);
             fuelsData+="<option id='fuel"+key+"' class='fuelsClass' value="+value[0]+">"+value[1]+"</option>";
          });
          $("#MemFuelSelect").html(fuelsData);

          // $("#MemFuelSelect").select2({ placeholder: 'Select Fuel',minimumResultsForSearch: Infinity});
          $('.loader-wrapper').css('display','none');

          }     
    });
  });


function onlyLetters(t) {
  var letters = /^[0-9]+$/;
  if(t.value.match(letters))
  {
   // alert('Sorry, letters not allowed');
    t.value=t.value.replace(/^[0-9]+$/, '');
  }
}

function onlyNoSpaces(t) {
  if(t.value.match(/\s/g)){

  // alert('Sorry, you are not allowed to enter any spaces');

  t.value=t.value.replace(/\s/g,'');

  }
}

function nospaces(t){

    var letters = /^[A-Za-z]+$/;
    // alert($.isNumeric(t.value));

  if(t.value.match(/\s/g)){
    t.value=t.value.replace(/\s/g,'');
  }
  if(!$.isNumeric(t.value)){
            t.value = t.value.slice(0, -1);
  }

   // if(t.value.match(letters))
   //   {
   //     // alert('Sorry, letters not allowed');
   //     // t.value=t.value.replace(/\s/g,'');
   //      t.value = t.value.substr(t.value.length - 1);
   //      for (var i = 0; i < t.value.length; i++) 
   //      {
   //          // document.getElementById("tbtwo").value = output;

   //      }
   //   }
}

// $('input[type="text"].date').datetimepicker({
//         // format: 'yyyy-mm-dd hh:ii',
//         // // startDate: dateNext,
//         // minuteStep : 15
//          pickDate: false,
//     use24hours: true,
//     minuteStepping: 15,
//     format: 'HH:mm'
//     });



 


function sendLeadOtp() {
   var mobNum = $('#mobilenum1').val();
    // console.log("Checii---"+$('#mobile1').val());
    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });
    $.ajax( {
        url:'leadOtp',
        type:'post',
        data: {'mobileNumber': $('#mobile1').val()},
        // alert(data);
        success:function(data,status,xhr) {
          if(xhr.status==200) {
          localStorage.setItem("otp", xhr.responseText);
              $('.otp-block').show();
              $('.login-btn').show();
              $('.otp-btn').hide();
              $('.resendOtpDiv').removeClass('d-none');
              $('.resendOtpText').css('cursor','not-allowed');
              $('.resendOtpText').css('pointer-events','none');
              // var fiveMinutes = 60 * 1,
              var display2 = document.querySelector('#time6');
              var timer2 = new CountDownTimer(30);
              timer2.onTick(format(display2)).start();

              function format(display) {
                return function (minutes, seconds) {
                  minutes = minutes < 10 ? "0" + minutes : minutes;
                  seconds = seconds < 10 ? "0" + seconds : seconds;
                  display.textContent = minutes + ':' + seconds;
                  // console.log("Check---"+seconds);
                  if(seconds == 0) {
                    $('.resendOtpTextTimer').addClass('d-none');
                    $('.resendOtpText').css('pointer-events','auto');
                    $('.resendOtpText').css('cursor','pointer');
                  }
                };
              }   
          }
          if(xhr.status==250) {
            swal(xhr.responseText, "", "warning");
          }
        },
        error:function () {
            // console.log('error');
        }
    });
  }

 
//  $("#tooltipContent").mouseover(function(){
//   alert('hiiiii');
// });
//   $(document).ready(function(){
 // initialize tooltip
 // $( ".tooltipContent" ).tooltip({
 //   track:true,
 //   open: function( event, ui ) {
 //    alert('jo');
 //   var id = this.id;
 //   var userid = $(this).attr('data-id');
 
 //   $.ajax({
 //    url:'fetch_details.php',
 //    type:'post',
 //    data:{userid:userid},
 //    success: function(response){
 
 //    // Setting content option
 //    $("#"+id).tooltip('option','content',response);
 
 //   }
 //  });
 //  }
 // });

 // $(".content span").mouseout(function(){
 //   // re-initializing tooltip
 //   $(this).attr('title','Please wait...');
 //   $(this).tooltip();
 //   $('.ui-tooltip').hide();
 // });

// });

</script>